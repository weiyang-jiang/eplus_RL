<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="system" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="9.0.devel">
    </property>
    <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
        <property name="iterations" class="ptolemy.data.expr.Parameter" value="(endTime-beginTime)/timeStep+1">
        </property>
        <property name="vectorizationFactor" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <property name="allowDisconnectedGraphs" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="period" class="ptolemy.data.expr.Parameter" value="timeStep">
        </property>
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[100.0, 10.0]">
        </property>
    </property>
    <property name="timeStep" class="ptolemy.data.expr.Parameter" value="60">
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 15.0]">
        </property>
    </property>
    <property name="beginTime" class="ptolemy.data.expr.Parameter" value="0">
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, -5.0]">
        </property>
    </property>
    <property name="endTime" class="ptolemy.data.expr.Parameter" value="3600">
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 35.0]">
        </property>
    </property>
    <property name="annotation" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">This model illustrates the use of the actor SystemCommand 
that calls an external system command.
The actor SystemCommand computes the control signal
in a program written in C. This program writes the control 
signal to the file output.txt.
If the program returns 0 as its exit value, then the 
actor OutputFileParser will parse the output file.
Otherwise, the simulation will stop.

The SampleDelay actor is used to break an algebraic loop,
which is not allowed with the SDF director.

Click on the actor SystemCommand to see how to use port values
as arguments of a system command.</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[290.0, -30.0]">
        </property>
    </property>
    <property name="annotation2" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:darkgray">Author: Michael Wetter</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 415.0]">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={148, 70, 1039, 640}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[823, 516]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.967421357349">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{462.3575723484357, 218.6678505930066}">
    </property>
    <entity name="OutputFileParser" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 280.0]">
        </property>
        <property name="OutputFileName" class="ptolemy.data.expr.StringParameter" value="output.txt">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 0.0, 0.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:red" y="20">-S-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 245.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={703, 260, 736, 640}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[520, 350]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0044204964558">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{265.8557291666704, 338.6673177083335}">
        </property>
        <property name="annotation" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">The modal model reads the output file if the input port is zero.
Otherwise, it throws an error and stops the simulation.</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 175.0]">
            </property>
        </property>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 405.0]">
            </property>
        </port>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[400.0, 405.0]">
            </property>
        </port>
        <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[220.0, 405.0]">
            </property>
            <port name="trigger" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="output" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={308, 129, 816, 641}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{300.0, 200.0}">
                </property>
                <port name="trigger" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
                    </property>
                </port>
                <port name="output" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 240.0]">
                    </property>
                </port>
                <entity name="state" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="state">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[170.0, 205.0]">
                    </property>
                </entity>
                <entity name="errorState" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="errorState">
                    </property>
                    <property name="isFinalState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[355.0, 215.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="trigger != 0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.08390917704271467">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </relation>
                <link port="state.outgoingPort" relation="relation"/>
                <link port="errorState.incomingPort" relation="relation"/>
            </entity>
            <entity name="state" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{70, 60}">
                    </property>
                </property>
                <port name="trigger" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
                    </property>
                </port>
                <port name="output" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[490.0, 235.0]">
                    </property>
                </port>
                <entity name="StringFunction" class="ptolemy.actor.lib.string.StringFunction">
                    <doc>Trim a string, convert a string to uppercase, or convert a string to&#10;            lowercase depending on the user's selection.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="11">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[200.0, 145.0]">
                    </property>
                </entity>
                <entity name="ExpressionToToken" class="ptolemy.actor.lib.conversions.ExpressionToToken">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, 145.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                        </property>
                    </port>
                </entity>
                <entity name="FileReader" class="ptolemy.actor.lib.io.FileReader">
                    <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="$OutputFileName">
                    </property>
                    <doc>Read an entire file and output as a string</doc>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[105.0, 145.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="output" relation="relation2"/>
                <link port="StringFunction.input" relation="relation3"/>
                <link port="StringFunction.output" relation="relation"/>
                <link port="ExpressionToToken.input" relation="relation"/>
                <link port="ExpressionToToken.output" relation="relation2"/>
                <link port="FileReader.output" relation="relation3"/>
            </entity>
            <entity name="errorState" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="allowDisconnectedGraphs" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 50.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={431, 266, 813, 510}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{300.0, 200.0}">
                </property>
                <port name="trigger" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
                    </property>
                </port>
                <port name="output" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 240.0]">
                    </property>
                </port>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{185.0, 140.0}">
                    </property>
                </entity>
                <entity name="ThrowException" class="ptolemy.actor.lib.ThrowException">
                    <property name="message" class="ptolemy.kernel.util.StringAttribute" value="Model stopped because the actor systemCommand had a non-zero exit value.">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[380.0, 140.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[185.0, 240.0]">
                    </property>
                </entity>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="output" relation="relation2"/>
                <link port="Const2.output" relation="relation"/>
                <link port="ThrowException.input" relation="relation"/>
                <link port="Const.output" relation="relation2"/>
            </entity>
            <relation name="triggerRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="outputRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <link port="trigger" relation="triggerRelation"/>
            <link port="output" relation="outputRelation"/>
            <link port="_Controller.trigger" relation="triggerRelation"/>
            <link port="_Controller.output" relation="outputRelation"/>
            <link port="state.trigger" relation="triggerRelation"/>
            <link port="state.output" relation="outputRelation"/>
            <link port="errorState.trigger" relation="triggerRelation"/>
            <link port="errorState.output" relation="outputRelation"/>
        </entity>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="trigger" relation="relation5"/>
        <link port="output" relation="relation"/>
        <link port="ModalModel.trigger" relation="relation5"/>
        <link port="ModalModel.output" relation="relation"/>
    </entity>
    <entity name="StandardOutputStream" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1051, 500, 379, 208}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[379, 164]">
        </property>
        <property name="columnsDisplayed" class="ptolemy.data.expr.Parameter" value="30">
        </property>
        <property name="suppressBlankLines" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[515.0, 410.0]">
        </property>
    </entity>
    <entity name="StandardErrorStream" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1021, 86, 364, 208}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[364, 164]">
        </property>
        <property name="columnsDisplayed" class="ptolemy.data.expr.Parameter" value="30">
        </property>
        <property name="suppressBlankLines" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[370.0, 445.0]">
        </property>
    </entity>
    <entity name="room" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[725.0, 270.0]">
        </property>
        <property name="TIni" class="ptolemy.data.expr.Parameter" value="10">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 55.0]">
            </property>
        </property>
        <property name="tau" class="ptolemy.data.expr.Parameter" value="0.5*3600">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 80.0]">
            </property>
        </property>
        <property name="Q0Hea" class="ptolemy.data.expr.Parameter" value="100">
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 105.0]">
            </property>
        </property>
        <property name="UA" class="ptolemy.data.expr.Parameter" value="Q0Hea/20.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 60.0]">
            </property>
        </property>
        <property name="C" class="ptolemy.data.expr.Parameter" value="tau*UA">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 85.0]">
            </property>
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Derived parameters">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 20.0]">
            </property>
        </property>
        <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Room parameters">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 15.0]">
            </property>
        </property>
        <property name="delTime" class="ptolemy.data.expr.Parameter" value="timeStep">
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 130.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={313, 195, 813, 510}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{300.0, 200.0}">
        </property>
        <port name="TOut" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 170.0]">
            </property>
        </port>
        <port name="TRoo" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[560.0, 330.0]">
            </property>
        </port>
        <port name="y" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 235.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="delTime/C * ( UA * (TOut-TRoo) + Q0Hea * y )">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[250.0, 180.0]">
            </property>
            <port name="TOut" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="TRoo" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="y" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="Accumulator" class="ptolemy.actor.lib.Accumulator">
            <property name="init" class="ptolemy.data.expr.Parameter" value="TIni">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[465.0, 190.0]">
            </property>
        </entity>
        <entity name="SampleDelay" class="ptolemy.domains.sdf.lib.SampleDelay">
            <property name="initialOutputs" class="ptolemy.data.expr.Parameter" value="{TIni}">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="initialOutputs">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[290.0, 325.0]">
            </property>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[515.0, 240.0]">
            </vertex>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <link port="TOut" relation="relation"/>
        <link port="TRoo" relation="relation3"/>
        <link port="y" relation="relation5"/>
        <link port="Expression.output" relation="relation2"/>
        <link port="Expression.TOut" relation="relation"/>
        <link port="Expression.TRoo" relation="relation4"/>
        <link port="Expression.y" relation="relation5"/>
        <link port="Accumulator.input" relation="relation2"/>
        <link port="Accumulator.output" relation="relation3"/>
        <link port="SampleDelay.input" relation="relation3"/>
        <link port="SampleDelay.output" relation="relation4"/>
    </entity>
    <entity name="controlError" class="ptolemy.actor.lib.AddSubtract">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[165.0, 280.0]">
        </property>
    </entity>
    <entity name="SystemCommand" class="lbnl.actor.lib.SystemCommand">
        <property name="programName" class="ptolemy.data.expr.FileParameter" value="pcontroller">
        </property>
        <property name="programArguments" class="ptolemy.data.expr.Parameter" value="&quot;$e $kP&quot;">
        </property>
        <property name="showConsoleWindow" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[270.0, 290.0]">
        </property>
        <port name="exitValue" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="error" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="e" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="kP" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="kP" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="2">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[200.0, 325.0]">
        </property>
    </entity>
    <entity name="TOut" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="5">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[645.0, 225.0]">
        </property>
    </entity>
    <entity name="SampleDelay" class="ptolemy.domains.sdf.lib.SampleDelay">
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="initialOutputs">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[595.0, 280.0]">
        </property>
    </entity>
    <entity name="TimedPlotter" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={888, 105, 500, 344}, maximized=false}">
        </property>
        <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[500, 300]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[825.0, 375.0]">
        </property>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>TimedPlotter</title>
<xLabel></xLabel>
<yLabel></yLabel>
<xRange min="0.0" max="3600.0"/>
<yRange min="5.0" max="20.0"/>
</plot>?>
        </configure>
    </entity>
    <entity name="Scale" class="ptolemy.actor.lib.Scale">
        <property name="factor" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[610.0, 330.0]">
        </property>
    </entity>
    <entity name="TSet" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="20">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 370.0]">
        </property>
    </entity>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
    </relation>
    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[765.0, 365.0]">
        </vertex>
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[115.0, 370.0]">
        </vertex>
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation13" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[545.0, 280.0]">
        </vertex>
    </relation>
    <link port="OutputFileParser.trigger" relation="relation"/>
    <link port="OutputFileParser.output" relation="relation13"/>
    <link port="StandardOutputStream.input" relation="relation5"/>
    <link port="StandardErrorStream.input" relation="relation6"/>
    <link port="room.TOut" relation="relation8"/>
    <link port="room.TRoo" relation="relation12"/>
    <link port="room.y" relation="relation9"/>
    <link port="controlError.plus" relation="relation4"/>
    <link port="controlError.minus" relation="relation12"/>
    <link port="controlError.output" relation="relation2"/>
    <link port="SystemCommand.exitValue" relation="relation"/>
    <link port="SystemCommand.output" relation="relation5"/>
    <link port="SystemCommand.error" relation="relation6"/>
    <link port="SystemCommand.e" relation="relation2"/>
    <link port="SystemCommand.kP" relation="relation3"/>
    <link port="kP.output" relation="relation3"/>
    <link port="TOut.output" relation="relation8"/>
    <link port="SampleDelay.input" relation="relation13"/>
    <link port="SampleDelay.output" relation="relation9"/>
    <link port="TimedPlotter.input" relation="relation12"/>
    <link port="TimedPlotter.input" relation="relation4"/>
    <link port="TimedPlotter.input" relation="relation7"/>
    <link port="Scale.input" relation="relation13"/>
    <link port="Scale.output" relation="relation7"/>
    <link port="TSet.output" relation="relation4"/>
</entity>
