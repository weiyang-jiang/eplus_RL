<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Building Controls Virtual Test Bed: compile.m Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Building Controls Virtual Test Bed
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('compile_8m_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">compile.m</div>  </div>
</div><!--header-->
<div class="contents">
<a href="compile_8m.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;% This file compiles the BSD socket <span class="keyword">interface </span>for Simulink.</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;% It is called by ant.</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;%</div>
<div class="line"><a name="l00005"></a><span class="lineno"><a class="line" href="compile_8m.html#a8f23c46b55063e44e60842ee4f1f461c">    5</a></span>&#160;% On <a class="code" href="compile_8m.html#a8f23c46b55063e44e60842ee4f1f461c">Windows</a>, it requires the Microsoft compiler</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;%</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;% <a class="code" href="compile_8m.html#a86ad7719e95c6eccc3cf82dcea7eb442">Note</a>: We set the <a class="code" href="processError_8m.html#a6b9a398ddfe8daf053afe59563080985">number</a> of outputs to 1024, since matlab requires the</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;%       size of output arrays to be fixed.</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;%       If more elements <a class="code" href="exchangeDoublesWithSocket_8m.html#aa5570979aa52a893305635561642a7a3">are</a> <a class="code" href="compile_8m.html#abcb5211dc00997f6e04c42f013f79575">required</a>, </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;%        - change the entry y4[1024] in the assignment of &#39;<a class="code" href="compile_8m.html#ac7eaa62950c3b7efa6c697ee8fd4d1b7">funSpe</a>&#39; below, </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;%        - change <a class="code" href="defines_8h.html#a3d5492759783915a49db6525ed363408">NDBLMAX</a>=1024 in the file exchangeDoublesWithSocket.m,</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;%          <a class="code" href="establishClientSocket_8m.html#a5f90916e00cff497b4a0c036365e1e4e">and</a> </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;%        - change the entry #define <a class="code" href="defines_8h.html#a3d5492759783915a49db6525ed363408">NDBLMAX</a> 1024 in the file lib/defines.h</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;%</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;%       Then, compile the matlab files by opening a development console.</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;%       On <a class="code" href="compile_8m.html#a8f23c46b55063e44e60842ee4f1f461c">Windows</a>, this can be done by double-clicking the file </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;%       <a class="code" href="establishClientSocket_8m.html#a4436ed76464ff5a77cdc35dedc2078d3">bcvtb</a>/bin/setDevelopmentEnvironment.bat. On Linux <a class="code" href="establishClientSocket_8m.html#a5f90916e00cff497b4a0c036365e1e4e">and</a> Mac, </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;%       this can be done by starting a terminal window <a class="code" href="establishClientSocket_8m.html#a5f90916e00cff497b4a0c036365e1e4e">and</a> typing</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;%         <a class="code" href="util_2utilXml_8h.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a> bin/setDevelopmentEnvironment.sh</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;%       from the BCVTB root directory. Next, type</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;%         cd lib</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;%         cd matlab</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;%         ant clean all</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;%       This will recompile all <a class="code" href="compile_8m.html#abcb5211dc00997f6e04c42f013f79575">required</a> files.</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;%</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;%</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;% Compile matlab library</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;% This creates a file <a class="code" href="establishClientSocket_8m.html#a4436ed76464ff5a77cdc35dedc2078d3">bcvtb</a>.m with the <a class="code" href="exchangeDoublesWithSocket_8m.html#a32f8b60b22c4f80750b0ae1e0a5be587">function</a> prototypes.</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;os=<a class="code" href="compile_8m.html#a680f489d763e6be8bffafce4649a8b95">deblank</a>(getenv(&#39;BCVTB_OS&#39;));</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keywordflow">if</span> (<a class="code" href="compile_8m.html#a404fc0a2c7978147c8b98f0a2b3d1798">strcmp</a>(os,<span class="stringliteral">&#39;windows&#39;</span>)) % have <a class="code" href="compile_8m.html#a8f23c46b55063e44e60842ee4f1f461c">Windows</a>  </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="compile_8m.html#a2a692011b8a9f7559baf2d9522e0e0d5">LIBBCVTB</a>=<span class="stringliteral">&#39;..\util\bcvtb&#39;</span>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<a class="code" href="compile_8m.html#a3e2d11cbdd835d101284c39b019e6e8d">elseif</a> (<a class="code" href="compile_8m.html#a404fc0a2c7978147c8b98f0a2b3d1798">strcmp</a>(os,<span class="stringliteral">&#39;mac&#39;</span>))</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  LIBBCVTB=&#39;../util/libbcvtb.dylib&#39;;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;else</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="compile_8m.html#a2a692011b8a9f7559baf2d9522e0e0d5">   37</a></span>&#160;  LIBBCVTB=&#39;../util/libbcvtb.so&#39;;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<a class="code" href="util_2utilXml_8c.html#a66b814b0426b992e7ebe37246bc43ae6">end</a></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="compile_8m.html#a54cdbecf40f2e55cfadbc0c812d73eda">   39</a></span>&#160;<a class="code" href="compile_8m.html#a54cdbecf40f2e55cfadbc0c812d73eda">incPat</a> = [pwd, &#39;/..&#39;];</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<a class="code" href="compile_8m.html#aa20d495184d5ef93b0b851f0b4ce4a39">loadlibrary</a>(LIBBCVTB, ...</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            &#39;matlabSocket.h&#39;, ...</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            &#39;includepath&#39;, &#39;./..&#39;, ...</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            &#39;mfilename&#39;, &#39;<a class="code" href="establishClientSocket_8m.html#a4436ed76464ff5a77cdc35dedc2078d3">bcvtb</a>.m&#39;)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;% -------------------------------------------------------------------</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;% Check <a class="code" href="compile_8m.html#a4a6f78e5437fa712087328fb2273fb77">if</a> Simulink is installed on this system. If Simulink is</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="compile_8m.html#a1bfc77eb145d1a8d8a706ea85abc19fe">   47</a></span>&#160;% is not installed, exit. <a class="code" href="compile_8m.html#a1bfc77eb145d1a8d8a706ea85abc19fe">Otherwise</a>, continue <a class="code" href="establishClientSocket_8m.html#a5f90916e00cff497b4a0c036365e1e4e">and</a> compile </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;% simulink libraries.</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="compile_8m.html#a4d653c04a251f9ba0a335a12e280e552">   49</a></span>&#160;<a class="code" href="compile_8m.html#a4d653c04a251f9ba0a335a12e280e552">retVal</a>=which(&#39;simulink&#39;);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<a class="code" href="compile_8m.html#a4a6f78e5437fa712087328fb2273fb77">if</a> <a class="code" href="compile_8m.html#a404fc0a2c7978147c8b98f0a2b3d1798">strcmp</a>(<a class="code" href="compile_8m.html#a4d653c04a251f9ba0a335a12e280e552">retVal</a>, &#39;&#39;)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(&#39;Simulink is not installed on this computer.&#39;)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(&#39;The Simulink library will not be compiled.&#39;)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;else</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  makeSBlock=false;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="compile_8m.html#adefaf64a0bbe772b9463fa2a9cba904e">   56</a></span>&#160;  <a class="code" href="compile_8m.html#adefaf64a0bbe772b9463fa2a9cba904e">modelName</a> = &#39;BSDSocket&#39;;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">   58</a></span>&#160;  <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>=legacy_code(&#39;initialize&#39;);</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="compile_8m.html#a9c9f8fffbafd7820810e6c3d32af9eb1">   59</a></span>&#160;  <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>.<a class="code" href="compile_8m.html#a9c9f8fffbafd7820810e6c3d32af9eb1">SourceFiles</a>={<span class="stringliteral">&#39;simulinkSocket.c&#39;</span>};</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="compile_8m.html#abfe0312a27be9a38b3116b7b6c28fb50">   60</a></span>&#160;  <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>.HeaderFiles={<span class="stringliteral">&#39;simulinkSocket.h&#39;</span>};</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="compile_8m.html#a1e2bff9c9e6ccee20b0ce2f04e496d3d">   61</a></span>&#160;  <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>.SampleTime  = <span class="stringliteral">&#39;inherited&#39;</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="compile_8m.html#aa2b716b7c192f1dd569230e66252cbc0">   63</a></span>&#160;  <a class="code" href="compile_8m.html#aa2b716b7c192f1dd569230e66252cbc0">funNam</a> = {<span class="stringliteral">&#39;establishBSDSocket&#39;</span>, <span class="stringliteral">&#39;exchangeDoublesWithBSDSocket&#39;</span>, <span class="stringliteral">&#39;closeBSDSocket&#39;</span>};</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="compile_8m.html#ac7eaa62950c3b7efa6c697ee8fd4d1b7">   64</a></span>&#160;  <a class="code" href="compile_8m.html#ac7eaa62950c3b7efa6c697ee8fd4d1b7">funSpe</a> = {<span class="stringliteral">&#39;int16 y1 = establishBSDSocket(int16 u1[1])&#39;</span>, ...</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <span class="stringliteral">&#39;int16 y1 = exchangeDoublesWithBSDSocket(int16 u1[1], int16 u2[1], int16 y2[1], int16 u3[1], double u4[1], double u5[], double y3[1], double y4[1024])&#39;</span>, ...</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="stringliteral">&#39;int16 y1 = closeBSDSocket(int16 u1[1], int16 u2[1])&#39;</span>};</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="compile_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">   69</a></span>&#160;  <span class="keywordflow">for</span> <a class="code" href="compile_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=1:3</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>.SFunctionName = char(<a class="code" href="compile_8m.html#aa2b716b7c192f1dd569230e66252cbc0">funNam</a>(<a class="code" href="compile_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>));</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="compile_8m.html#a834fec45431e2905e722b52f5e2a2b53">   71</a></span>&#160;    <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>.OutputFcnSpec = char(<a class="code" href="compile_8m.html#ac7eaa62950c3b7efa6c697ee8fd4d1b7">funSpe</a>(<a class="code" href="compile_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>));</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(<span class="stringliteral">&#39;*** Generating mex file&#39;</span>)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    legacy_code(&#39;sfcn_cmex_generate&#39;, <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(&#39;*** Compiling code&#39;)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    %%%%%%%%%%% fix from Mathworks (email from 2/7/08)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    fschange(&#39;&#39;);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    %% FSCHANGE is a Mathworks internal <a class="code" href="exchangeDoublesWithSocket_8m.html#a32f8b60b22c4f80750b0ae1e0a5be587">function</a> that is used</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    %% for troubleshooting purposes. It takes the name of a directory </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    %% as an input <a class="code" href="establishClientSocket_8m.html#a5f90916e00cff497b4a0c036365e1e4e">and</a> forces the MATLAB path manager to </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    %% recheck the contents of the directory to check for </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    %% <a class="code" href="compile_8m.html#ab1d896d406982d7c72cda42a5feac8db">new</a> (or deleted) files. When an empty <span class="keywordtype">string</span> is </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    %% passed as an input the entire path is rechecked. </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    try</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      % Compilation for <a class="code" href="compile_8m.html#a8f23c46b55063e44e60842ee4f1f461c">Windows</a></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <a class="code" href="compile_8m.html#a4a6f78e5437fa712087328fb2273fb77">if</a> (<a class="code" href="compile_8m.html#a404fc0a2c7978147c8b98f0a2b3d1798">strcmp</a>(os, &#39;windows&#39;)) % have <a class="code" href="compile_8m.html#a8f23c46b55063e44e60842ee4f1f461c">Windows</a>    </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(&#39;*** Compiling MATLAB interface for <a class="code" href="compile_8m.html#a8f23c46b55063e44e60842ee4f1f461c">Windows</a>&#39;)</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="compile_8m.html#aa9810536fd440aaff9be34abb52765b2">   89</a></span>&#160;        legacy_code(&#39;compile&#39;, <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>, {<span class="stringliteral">&#39;../util/bcvtb.lib&#39;</span>, <span class="stringliteral">&#39;-I../util&#39;</span>, <span class="stringliteral">&#39;-I..&#39;</span>})</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        % Compilation <span class="keywordflow">for</span> Mac OS X <a class="code" href="establishClientSocket_8m.html#a5f90916e00cff497b4a0c036365e1e4e">and</a> Linux</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(<span class="stringliteral">&#39;*** Compiling MATLAB interface for Mac OS X or Linux&#39;</span>)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        legacy_code(<span class="stringliteral">&#39;compile&#39;</span>, <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>, {<span class="stringliteral">&#39;-lxml2&#39;</span>, <span class="stringliteral">&#39;-I..&#39;</span>, <span class="stringliteral">&#39;-L../util&#39;</span>, <span class="stringliteral">&#39;-lbcvtb&#39;</span>})</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="util_2utilXml_8c.html#a66b814b0426b992e7ebe37246bc43ae6">end</a></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">catch</span> <a class="code" href="establishClientSocket_8m.html#aeb118d899043dc20122a190fbd0f6376">ME</a></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(<span class="stringliteral">&#39;*** Error when compiling MATLAB interface ***&#39;</span>)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(getReport(<a class="code" href="establishClientSocket_8m.html#aeb118d899043dc20122a190fbd0f6376">ME</a>, &#39;extended&#39;))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(&#39;*** Exit with <a class="code" href="establishClientSocket_8m.html#a859694b6d9ceec9462594444c1b61f61">error</a>.&#39;)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      exit(1)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="util_2utilXml_8c.html#a66b814b0426b992e7ebe37246bc43ae6">end</a></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(&#39;*** Returned from legacy_code&#39;)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="compile_8m.html#a4a6f78e5437fa712087328fb2273fb77">if</a> makeSBlock</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(&#39;*** Generating Simulink block&#39;)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      try</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        legacy_code(&#39;slblock_generate&#39;, <a class="code" href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a>, <a class="code" href="compile_8m.html#adefaf64a0bbe772b9463fa2a9cba904e">modelName</a>)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      catch ME</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(&#39;*** Error when generating Simulink interface ***&#39;)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(getReport(ME, &#39;extended&#39;))</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a>(&#39;*** Exit with <a class="code" href="establishClientSocket_8m.html#a859694b6d9ceec9462594444c1b61f61">error</a>.&#39;)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        exit(1)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <a class="code" href="util_2utilXml_8c.html#a66b814b0426b992e7ebe37246bc43ae6">end</a></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="util_2utilXml_8c.html#a66b814b0426b992e7ebe37246bc43ae6">end</a></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    % <a class="code" href="compile_8m.html#a040b83686012a50af731c6d77b7c08ec">delete</a> the files that we no longer need</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    fn = [<span class="keywordtype">char</span>(<a class="code" href="compile_8m.html#aa2b716b7c192f1dd569230e66252cbc0">funNam</a>(<a class="code" href="compile_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)), &#39;.<a class="code" href="compile_8m.html#aa9810536fd440aaff9be34abb52765b2">c</a>&#39;];</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="compile_8m.html#a040b83686012a50af731c6d77b7c08ec">delete</a>(fn)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="util_2utilXml_8c.html#a66b814b0426b992e7ebe37246bc43ae6">end</a></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<a class="code" href="util_2utilXml_8c.html#a66b814b0426b992e7ebe37246bc43ae6">end</a></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;exit;</div>
<div class="ttc" id="compile_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="compile_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00069">compile.m:69</a></div></div>
<div class="ttc" id="exchangeDoublesWithSocket_8m_html_aa5570979aa52a893305635561642a7a3"><div class="ttname"><a href="exchangeDoublesWithSocket_8m.html#aa5570979aa52a893305635561642a7a3">are</a></div><div class="ttdeci">exchanges data with the BCVTB The input arguments are</div><div class="ttdef"><b>Definition:</b> <a href="exchangeDoublesWithSocket_8m_source.html#l00012">exchangeDoublesWithSocket.m:12</a></div></div>
<div class="ttc" id="compile_8m_html_a680f489d763e6be8bffafce4649a8b95"><div class="ttname"><a href="compile_8m.html#a680f489d763e6be8bffafce4649a8b95">deblank</a></div><div class="ttdeci">getenv('BCVTB_OS' deblank()</div></div>
<div class="ttc" id="compile_8m_html_aa20d495184d5ef93b0b851f0b4ce4a39"><div class="ttname"><a href="compile_8m.html#aa20d495184d5ef93b0b851f0b4ce4a39">loadlibrary</a></div><div class="ttdeci">loadlibrary(LIBBCVTB,... 'matlabSocket.h',... 'includepath', './..',... 'mfilename', 'bcvtb.m')%-------------------------------------------------------------------%Check if Simulink is installed on this system.If Simulink is%is not installed</div></div>
<div class="ttc" id="compile_8m_html_aa2b716b7c192f1dd569230e66252cbc0"><div class="ttname"><a href="compile_8m.html#aa2b716b7c192f1dd569230e66252cbc0">funNam</a></div><div class="ttdeci">funNam</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00063">compile.m:63</a></div></div>
<div class="ttc" id="compile_8m_html_ad5bcb8bcbb8d930f89cdb3bd25f90930"><div class="ttname"><a href="compile_8m.html#ad5bcb8bcbb8d930f89cdb3bd25f90930">def</a></div><div class="ttdeci">def</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00058">compile.m:58</a></div></div>
<div class="ttc" id="establishClientSocket_8m_html_a859694b6d9ceec9462594444c1b61f61"><div class="ttname"><a href="establishClientSocket_8m.html#a859694b6d9ceec9462594444c1b61f61">error</a></div><div class="ttdeci">function sockfd will be a positive integer for the socket file descriptor In case of error</div><div class="ttdef"><b>Definition:</b> <a href="establishClientSocket_8m_source.html#l00001">establishClientSocket.m:1</a></div></div>
<div class="ttc" id="establishClientSocket_8m_html_a4436ed76464ff5a77cdc35dedc2078d3"><div class="ttname"><a href="establishClientSocket_8m.html#a4436ed76464ff5a77cdc35dedc2078d3">bcvtb</a></div><div class="ttdeci">if bcvtb</div><div class="ttdef"><b>Definition:</b> <a href="establishClientSocket_8m_source.html#l00022">establishClientSocket.m:22</a></div></div>
<div class="ttc" id="compile_8m_html_a3e2d11cbdd835d101284c39b019e6e8d"><div class="ttname"><a href="compile_8m.html#a3e2d11cbdd835d101284c39b019e6e8d">elseif</a></div><div class="ttdeci">elseif(strcmp(os,'mac')) LIBBCVTB</div></div>
<div class="ttc" id="compile_8m_html_ab1d896d406982d7c72cda42a5feac8db"><div class="ttname"><a href="compile_8m.html#ab1d896d406982d7c72cda42a5feac8db">new</a></div><div class="ttdeci">FSCHANGE is a Mathworks internal function that is used for troubleshooting purposes It takes the name of a directory as an input and forces the MATLAB path manager to recheck the contents of the directory to check for new(or deleted) files.When an empty string is%%passed as an input the entire path is rechecked.%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%Compilation for Windows if(strcmp(os</div></div>
<div class="ttc" id="compile_8m_html_a86ad7719e95c6eccc3cf82dcea7eb442"><div class="ttname"><a href="compile_8m.html#a86ad7719e95c6eccc3cf82dcea7eb442">Note</a></div><div class="ttdeci">This file compiles the BSD socket interface for Simulink It is called by ant On it requires the Microsoft compiler Note</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00005">compile.m:5</a></div></div>
<div class="ttc" id="establishClientSocket_8m_html_a5f90916e00cff497b4a0c036365e1e4e"><div class="ttname"><a href="establishClientSocket_8m.html#a5f90916e00cff497b4a0c036365e1e4e">and</a></div><div class="ttdeci">end Establish the socket connection if and(libisloaded(BCVTBLIB),(status==1)) sockfd</div></div>
<div class="ttc" id="util_2utilXml_8c_html_a66b814b0426b992e7ebe37246bc43ae6"><div class="ttname"><a href="util_2utilXml_8c.html#a66b814b0426b992e7ebe37246bc43ae6">end</a></div><div class="ttdeci">static void XMLCALL end(void *data, const char *el)</div><div class="ttdoc">Call back functions that will be used by the expat xml parser. </div><div class="ttdef"><b>Definition:</b> <a href="util_2utilXml_8c_source.html#l00707">util/utilXml.c:707</a></div></div>
<div class="ttc" id="compile_8m_html_abcb5211dc00997f6e04c42f013f79575"><div class="ttname"><a href="compile_8m.html#abcb5211dc00997f6e04c42f013f79575">required</a></div><div class="ttdeci">This file compiles the BSD socket interface for Simulink It is called by ant On it requires the Microsoft compiler since matlab requires the size of output arrays to be fixed If more elements are required</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00005">compile.m:5</a></div></div>
<div class="ttc" id="compile_8m_html_a4a6f78e5437fa712087328fb2273fb77"><div class="ttname"><a href="compile_8m.html#a4a6f78e5437fa712087328fb2273fb77">if</a></div><div class="ttdeci">if(strcmp(os,'windows'))%have Windows LIBBCVTB</div></div>
<div class="ttc" id="compile_8m_html_a2a692011b8a9f7559baf2d9522e0e0d5"><div class="ttname"><a href="compile_8m.html#a2a692011b8a9f7559baf2d9522e0e0d5">LIBBCVTB</a></div><div class="ttdeci">else LIBBCVTB</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00037">compile.m:37</a></div></div>
<div class="ttc" id="compile_8m_html_a1bfc77eb145d1a8d8a706ea85abc19fe"><div class="ttname"><a href="compile_8m.html#a1bfc77eb145d1a8d8a706ea85abc19fe">Otherwise</a></div><div class="ttdeci">exit Otherwise</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00047">compile.m:47</a></div></div>
<div class="ttc" id="compile_8m_html_a8f23c46b55063e44e60842ee4f1f461c"><div class="ttname"><a href="compile_8m.html#a8f23c46b55063e44e60842ee4f1f461c">Windows</a></div><div class="ttdeci">This file compiles the BSD socket interface for Simulink It is called by ant On Windows</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00005">compile.m:5</a></div></div>
<div class="ttc" id="compile_8m_html_ac7eaa62950c3b7efa6c697ee8fd4d1b7"><div class="ttname"><a href="compile_8m.html#ac7eaa62950c3b7efa6c697ee8fd4d1b7">funSpe</a></div><div class="ttdeci">funSpe</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00064">compile.m:64</a></div></div>
<div class="ttc" id="establishClientSocket_8m_html_aeb118d899043dc20122a190fbd0f6376"><div class="ttname"><a href="establishClientSocket_8m.html#aeb118d899043dc20122a190fbd0f6376">ME</a></div><div class="ttdeci">ME</div><div class="ttdef"><b>Definition:</b> <a href="establishClientSocket_8m_source.html#l00026">establishClientSocket.m:26</a></div></div>
<div class="ttc" id="compile_8m_html_adefaf64a0bbe772b9463fa2a9cba904e"><div class="ttname"><a href="compile_8m.html#adefaf64a0bbe772b9463fa2a9cba904e">modelName</a></div><div class="ttdeci">modelName</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00056">compile.m:56</a></div></div>
<div class="ttc" id="compile_8m_html_a4d653c04a251f9ba0a335a12e280e552"><div class="ttname"><a href="compile_8m.html#a4d653c04a251f9ba0a335a12e280e552">retVal</a></div><div class="ttdeci">exit continue and compile simulink libraries retVal</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00049">compile.m:49</a></div></div>
<div class="ttc" id="defines_8h_html_a3d5492759783915a49db6525ed363408"><div class="ttname"><a href="defines_8h.html#a3d5492759783915a49db6525ed363408">NDBLMAX</a></div><div class="ttdeci">#define NDBLMAX</div><div class="ttdoc">Maximum number of double values that can be exchanged by Simulink. </div><div class="ttdef"><b>Definition:</b> <a href="defines_8h_source.html#l00033">defines.h:33</a></div></div>
<div class="ttc" id="exchangeDoublesWithSocket_8m_html_a32f8b60b22c4f80750b0ae1e0a5be587"><div class="ttname"><a href="exchangeDoublesWithSocket_8m.html#a32f8b60b22c4f80750b0ae1e0a5be587">function</a></div><div class="ttdeci">function[retVal, flaRea, simTimRea, dblValRea]</div><div class="ttdef"><b>Definition:</b> <a href="exchangeDoublesWithSocket_8m_source.html#l00001">exchangeDoublesWithSocket.m:1</a></div></div>
<div class="ttc" id="processError_8m_html_a6b9a398ddfe8daf053afe59563080985"><div class="ttname"><a href="processError_8m.html#a6b9a398ddfe8daf053afe59563080985">number</a></div><div class="ttdeci">function if the BCVTB library can be loaded and if sockfd is not a negative number</div><div class="ttdef"><b>Definition:</b> <a href="processError_8m_source.html#l00001">processError.m:1</a></div></div>
<div class="ttc" id="compile_8m_html_a040b83686012a50af731c6d77b7c08ec"><div class="ttname"><a href="compile_8m.html#a040b83686012a50af731c6d77b7c08ec">delete</a></div><div class="ttdeci">delete(fn) end end exit</div></div>
<div class="ttc" id="compile_8m_html_a9c9f8fffbafd7820810e6c3d32af9eb1"><div class="ttname"><a href="compile_8m.html#a9c9f8fffbafd7820810e6c3d32af9eb1">SourceFiles</a></div><div class="ttdeci">def SourceFiles</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00059">compile.m:59</a></div></div>
<div class="ttc" id="compile_8m_html_aa9810536fd440aaff9be34abb52765b2"><div class="ttname"><a href="compile_8m.html#aa9810536fd440aaff9be34abb52765b2">c</a></div><div class="ttdeci">FSCHANGE is a Mathworks internal function that is used for troubleshooting purposes It takes the name of a directory as an input and forces the MATLAB path manager to recheck the contents of the directory to check for windows have Windows c</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00089">compile.m:89</a></div></div>
<div class="ttc" id="compile_8m_html_a54cdbecf40f2e55cfadbc0c812d73eda"><div class="ttname"><a href="compile_8m.html#a54cdbecf40f2e55cfadbc0c812d73eda">incPat</a></div><div class="ttdeci">end incPat</div><div class="ttdef"><b>Definition:</b> <a href="compile_8m_source.html#l00039">compile.m:39</a></div></div>
<div class="ttc" id="util_2utilXml_8h_html_a07a87b2e6ed927503e2f95f119c9fc23"><div class="ttname"><a href="util_2utilXml_8h.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a></div><div class="ttdeci">int source</div><div class="ttdoc">flag for function /c getepvariables 0=EnergyPlus, 1=Ptolemy </div><div class="ttdef"><b>Definition:</b> <a href="util_2utilXml_8h_source.html#l00158">util/utilXml.h:158</a></div></div>
<div class="ttc" id="compile_8m_html_ab6b13ae376927cb0b9603a280935f502"><div class="ttname"><a href="compile_8m.html#ab6b13ae376927cb0b9603a280935f502">disp</a></div><div class="ttdeci">disp('***Generating mex file') legacy_code('sfcn_cmex_generate'</div></div>
<div class="ttc" id="compile_8m_html_a404fc0a2c7978147c8b98f0a2b3d1798"><div class="ttname"><a href="compile_8m.html#a404fc0a2c7978147c8b98f0a2b3d1798">strcmp</a></div><div class="ttdeci">if strcmp(retVal, '') disp('Simulink is not installed on this computer.') disp('The Simulink library will not be compiled.') else makeSBlock</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_e0ed8aa96b5dd6800a0d8102c6a8fb4c.html">matlab</a></li><li class="navelem"><a class="el" href="compile_8m.html">compile.m</a></li>
    <li class="footer">Generated on Wed Apr 20 2016 10:24:19 for Building Controls Virtual Test Bed by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
