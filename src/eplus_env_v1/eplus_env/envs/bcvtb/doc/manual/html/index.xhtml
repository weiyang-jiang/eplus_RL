<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Building Controls Virtual Test Bed</title><link rel="stylesheet" type="text/css" href="bcvtb-manual.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"/><link rel="home" href="index.xhtml" title="Building Controls Virtual Test Bed"/><link rel="next" href="releaseNotes.xhtml" title="Chapter 1. Release Notes"/></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Building Controls Virtual Test Bed</th></tr><tr><td width="20%" align="left"> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="releaseNotes.xhtml"><img src="images/next.gif" alt="Next"/></a></td></tr></table></div><p ><div class="search"><form name="gs" action="http://google1.lbl.gov/search" method="get">
	Search
	<input maxlength="256" size="40" name="q"/><input type="hidden" name="btnG" class="submit"/><input type="hidden" name="site" value="BCVTB"/><input type="hidden" name="output" value="xml_no_dtd"/><input type="hidden" name="as_dt" value="i"/><input type="hidden" name="client" value="default_frontend"/><input type="hidden" name="oe" value="UTF-8"/><input type="hidden" name="proxystylesheet" value="default_frontend"/></form></div></p><div  class="breadcrumbs"><span class="breadcrumb-node">Building Controls Virtual Test Bed</span></div><div xml:lang="en" class="book"><div class="titlepage"><div><div><h1 class="title"><a id="d5e1"/>Building Controls Virtual Test Bed</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Michael</span> <span class="surname">Wetter</span></h3><div class="affiliation">
     <span class="orgname">Lawrence Berkeley National Laboratory<br/></span>
      <span class="orgdiv">Environmental Energy Technologies Division<br/></span>
     <span class="orgdiv">Building Technology and Urban Systems Department<br/></span>
     <span class="orgdiv">Simulation Research Group<br/></span>
   </div></div></div><div><p class="copyright">Copyright © 2008-2016 Lawrence Berkeley National Laboratory, Berkeley, CA</p></div><div><p class="pubdate">04/20/2016</p></div></div><hr/></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="chapter"><a href="releaseNotes.xhtml">1. Release Notes</a></span></dt><dd><dl><dt><span class="section"><a href="releaseNotes.xhtml#d5e22">1.1. Version 1.6.0</a></span></dt><dt><span class="section"><a href="ch01s02.xhtml">1.2. Version 1.5.0</a></span></dt><dt><span class="section"><a href="ch01s03.xhtml">1.3. Version 1.4.0</a></span></dt><dt><span class="section"><a href="ch01s04.xhtml">1.4. Version 1.3.0</a></span></dt><dt><span class="section"><a href="ch01s05.xhtml">1.5. Version 1.2.0</a></span></dt><dt><span class="section"><a href="ch01s06.xhtml">1.6. Version 1.1.0</a></span></dt><dt><span class="section"><a href="ch01s07.xhtml">1.7. Version 1.0.0</a></span></dt></dl></dd><dt><span class="chapter"><a href="introduction.xhtml">2. Introduction</a></span></dt><dt><span class="chapter"><a href="installation.xhtml">3. Installation and configuration</a></span></dt><dd><dl><dt><span class="section"><a href="installation.xhtml#d5e184">3.1. Introduction</a></span></dt><dt><span class="section"><a href="tit-InstallationUser.xhtml">3.2. Installation</a></span></dt><dt><span class="section"><a href="settingEnvironmentVariables.xhtml">3.3. Setting system environment variables</a></span></dt><dt><span class="section"><a href="ch03s04.xhtml">3.4. Uninstallation</a></span></dt></dl></dd><dt><span class="chapter"><a href="running.xhtml">4. Running simulations with the BCVTB</a></span></dt><dd><dl><dt><span class="section"><a href="running.xhtml#d5e241">4.1. Introduction</a></span></dt><dt><span class="section"><a href="tit-runExpWin.xhtml">4.2. Running the BCVTB from an explorer window</a></span></dt><dt><span class="section"><a href="tit-runTerWin.xhtml">4.3. Running the BCVTB from a terminal window</a></span></dt><dt><span class="section"><a href="tit-comLinArg.xhtml">4.4. Command line arguments</a></span></dt><dt><span class="section"><a href="ch04s05.xhtml">4.5. Example files</a></span></dt></dl></dd><dt><span class="chapter"><a href="configuration.xhtml">5. Configuring programs for use with the BCVTB</a></span></dt><dd><dl><dt><span class="section"><a href="configuration.xhtml#d5e404">5.1. Introduction</a></span></dt><dt><span class="section"><a href="tit-crePtoMod.xhtml">5.2. Ptolemy II</a></span></dt><dd><dl><dt><span class="section"><a href="tit-crePtoMod.xhtml#tit-SDF">5.2.1. Synchronous Data Flow (SDF) director</a></span></dt><dt><span class="section"><a href="tit-crePtoMod.xhtml#d5e547">5.2.2. Data Type Conversion</a></span></dt></dl></dd><dt><span class="section"><a href="tit-EnePluCon.xhtml">5.3. EnergyPlus</a></span></dt><dd><dl><dt><span class="section"><a href="tit-EnePluCon.xhtml#d5e698">5.3.1. Syntax of the xml file that configures the data mapping between EnergyPlus and the external interface</a></span></dt><dt><span class="section"><a href="tit-EnePluCon.xhtml#exa-enePlu-sch">5.3.2. Example 1: Interface using <code class="code">ExternalInterface:Schedule</code>
   </a></span></dt><dd><dl><dt><span class="section"><a href="tit-EnePluCon.xhtml#d5e770">5.3.2.1. Create an EnergyPlus idf file</a></span></dt><dt><span class="section"><a href="tit-EnePluCon.xhtml#d5e794">5.3.2.2. Create a configuration file</a></span></dt><dt><span class="section"><a href="tit-EnePluCon.xhtml#sec-crePtoMod">5.3.2.3. Create a Ptolemy II model</a></span></dt></dl></dd><dt><span class="section"><a href="tit-EnePluCon.xhtml#exa-enePlu-act">5.3.3. Example 2: Interface using <code class="code">ExternalInterface:Actuator</code>
   </a></span></dt><dd><dl><dt><span class="section"><a href="tit-EnePluCon.xhtml#d5e883">5.3.3.1. Create an EnergyPlus idf file</a></span></dt><dt><span class="section"><a href="tit-EnePluCon.xhtml#d5e897">5.3.3.2. Create a configuration file</a></span></dt></dl></dd><dt><span class="section"><a href="tit-EnePluCon.xhtml#exa-enePlu-var">5.3.4. Example 3: Interface using <code class="code">ExternalInterface:Variable</code>
   </a></span></dt><dd><dl><dt><span class="section"><a href="tit-EnePluCon.xhtml#d5e928">5.3.4.1. Create an EnergyPlus idf file</a></span></dt><dt><span class="section"><a href="tit-EnePluCon.xhtml#d5e952">5.3.4.2. Create a configuration file</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="tit-DymolaCon.xhtml">5.4. Dymola</a></span></dt><dd><dl><dt><span class="section"><a href="tit-DymolaCon.xhtml#d5e968">5.4.1. Create a Modelica model</a></span></dt><dt><span class="section"><a href="tit-DymolaCon.xhtml#d5e1002">5.4.2. Create a Modelica script</a></span></dt><dt><span class="section"><a href="tit-DymolaCon.xhtml#d5e1008">5.4.3. Create a Ptolemy II model</a></span></dt></dl></dd><dt><span class="section"><a href="tit-MatlabCon.xhtml">5.5. MATLAB</a></span></dt><dd><dl><dt><span class="section"><a href="tit-MatlabCon.xhtml#d5e1045">5.5.1. Create a MATLAB script</a></span></dt><dt><span class="section"><a href="tit-MatlabCon.xhtml#d5e1052">5.5.2. Create a Ptolemy II model</a></span></dt></dl></dd><dt><span class="section"><a href="tit-SimulinkCon.xhtml">5.6. Simulink</a></span></dt><dd><dl><dt><span class="section"><a href="tit-SimulinkCon.xhtml#d5e1082">5.6.1. Create a Simulink Block Diagram</a></span></dt><dt><span class="section"><a href="tit-SimulinkCon.xhtml#d5e1155">5.6.2. Create a MATLAB script</a></span></dt><dt><span class="section"><a href="tit-SimulinkCon.xhtml#d5e1160">5.6.3. Create a Ptolemy II model</a></span></dt></dl></dd><dt><span class="section"><a href="tit-EsprCon.xhtml">5.7. ESP-r</a></span></dt><dd><dl><dt><span class="section"><a href="tit-EsprCon.xhtml#d5e1189">5.7.1. Introduction</a></span></dt><dt><span class="section"><a href="tit-EsprCon.xhtml#d5e1195">5.7.2. Configuring ESP-r</a></span></dt><dt><span class="section"><a href="tit-EsprCon.xhtml#d5e1206">5.7.3. Examples</a></span></dt><dd><dl><dt><span class="section"><a href="tit-EsprCon.xhtml#d5e1208">5.7.3.1. HVAC control in MATLAB</a></span></dt><dt><span class="section"><a href="tit-EsprCon.xhtml#d5e1230">5.7.3.2. Solar shading control in Ptolemy II</a></span></dt></dl></dd><dt><span class="section"><a href="tit-EsprCon.xhtml#d5e1237">5.7.4. Developing new applications</a></span></dt></dl></dd><dt><span class="section"><a href="tit-TRNSYSCon.xhtml">5.8. TRNSYS</a></span></dt><dd><dl><dt><span class="section"><a href="tit-TRNSYSCon.xhtml#d5e1257">5.8.1. Introduction</a></span></dt><dt><span class="section"><a href="tit-TRNSYSCon.xhtml#d5e1271">5.8.2. Example: HVAC control in Ptolemy II</a></span></dt><dd><dl><dt><span class="section"><a href="tit-TRNSYSCon.xhtml#d5e1276">5.8.2.1. Create the TRNSYS input file</a></span></dt><dt><span class="section"><a href="tit-TRNSYSCon.xhtml#d5e1303">5.8.2.2. Create a Ptolemy II model</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="tit-FMUCon.xhtml">5.9. Functional Mock-up Unit for Co-Simulation Import</a></span></dt><dd><dl><dt><span class="section"><a href="tit-FMUCon.xhtml#d5e1324">5.9.1. Introduction</a></span></dt><dt><span class="section"><a href="tit-FMUCon.xhtml#d5e1332">5.9.2. Import an FMU in the BCVTB</a></span></dt><dt><span class="section"><a href="tit-FMUCon.xhtml#d5e1338">5.9.3. Example: Modelica room model in an FMU</a></span></dt><dd><dl><dt><span class="section"><a href="tit-FMUCon.xhtml#d5e1343">5.9.3.1.  Create and export the Modelica model as an FMU</a></span></dt><dt><span class="section"><a href="tit-FMUCon.xhtml#d5e1365">5.9.3.2.  Create a Ptolemy II system model</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="tit-CustomExeCon.xhtml">5.10. Custom program using a system command</a></span></dt><dd><dl><dt><span class="section"><a href="tit-CustomExeCon.xhtml#d5e1395">5.10.1. Create a Ptolemy II model</a></span></dt><dt><span class="section"><a href="tit-CustomExeCon.xhtml#d5e1411">5.10.2. Configure the ports of the <code class="code">SystemCommand</code> actor</a></span></dt><dt><span class="section"><a href="tit-CustomExeCon.xhtml#d5e1442">5.10.3. Configure the parameters of the <code class="code">SystemCommand</code> actor</a></span></dt></dl></dd><dt><span class="section"><a href="tit-RadianceCon.xhtml">5.11. Radiance</a></span></dt><dd><dl><dt><span class="section"><a href="tit-RadianceCon.xhtml#d5e1511">5.11.1. Introduction</a></span></dt><dt><span class="section"><a href="tit-RadianceCon.xhtml#d5e1514">5.11.2. Configuring Radiance</a></span></dt><dt><span class="section"><a href="tit-RadianceCon.xhtml#d5e1522">5.11.3. Create a Radiance script</a></span></dt><dt><span class="section"><a href="tit-RadianceCon.xhtml#d5e1526">5.11.4. Create a Ptolemy II model</a></span></dt></dl></dd><dt><span class="section"><a href="ch05s12.xhtml">5.12. BACnet</a></span></dt><dd><dl><dt><span class="section"><a href="ch05s12.xhtml#d5e1612">5.12.1. Introduction</a></span></dt><dt><span class="section"><a href="ch05s12.xhtml#tit-BACnetConfDataRea">5.12.2. Reading from BACnet</a></span></dt><dd><dl><dt><span class="section"><a href="ch05s12.xhtml#d5e1626">5.12.2.1. Specification of data that will be read from BACnet</a></span></dt><dt><span class="section"><a href="ch05s12.xhtml#d5e1772">5.12.2.2. Interface to BACnet Stack</a></span></dt></dl></dd><dt><span class="section"><a href="ch05s12.xhtml#tit-BACnetConfDataWri">5.12.3. Writing to BACnet</a></span></dt><dd><dl><dt><span class="section"><a href="ch05s12.xhtml#d5e1784">5.12.3.1. Specification of data that will be written to BACnet</a></span></dt><dt><span class="section"><a href="ch05s12.xhtml#d5e1867">5.12.3.2. Interface to BACnet Stack</a></span></dt></dl></dd><dt><span class="section"><a href="ch05s12.xhtml#d5e1881">5.12.4. Creating a Ptolemy II model</a></span></dt><dd><dl><dt><span class="section"><a href="ch05s12.xhtml#d5e1890">5.12.4.1. Configuring the <code class="code">BACnetReader</code>
    </a></span></dt><dt><span class="section"><a href="ch05s12.xhtml#d5e1942">5.12.4.2. Configuring the <code class="code">BACnetWriter</code>
    </a></span></dt><dt><span class="section"><a href="ch05s12.xhtml#d5e1992">5.12.4.3. Synchronization with real-time</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="ch05s13.xhtml">5.13. Analog/Digital Interface</a></span></dt><dd><dl><dt><span class="section"><a href="ch05s13.xhtml#d5e2002">5.13.1. Introduction</a></span></dt><dt><span class="section"><a href="ch05s13.xhtml#tit-ADInterfaceMCCConfDataRea">5.13.2. Reading from ADInterfaceMCC</a></span></dt><dd><dl><dt><span class="section"><a href="ch05s13.xhtml#d5e2009">5.13.2.1. Specification of data that will be read from ADInterfaceMCC</a></span></dt><dt><span class="section"><a href="ch05s13.xhtml#d5e2052">5.13.2.2. Interface to adInterfaceMCC-Stack</a></span></dt></dl></dd><dt><span class="section"><a href="ch05s13.xhtml#tit-ADInterfaceMCCConfDataWri">5.13.3. Writing to ADInterfaceMCC</a></span></dt><dd><dl><dt><span class="section"><a href="ch05s13.xhtml#d5e2061">5.13.3.1. Specification of data that will be written to ADInterfaceMCC</a></span></dt><dt><span class="section"><a href="ch05s13.xhtml#d5e2104">5.13.3.2. Interface to adInterfaceMCC-Stack</a></span></dt></dl></dd><dt><span class="section"><a href="ch05s13.xhtml#d5e2110">5.13.4. Creating a Ptolemy II model</a></span></dt><dd><dl><dt><span class="section"><a href="ch05s13.xhtml#d5e2117">5.13.4.1. Configuring the <code class="code">ADInterfaceMCCReader and ADInterfaceMCCWriter</code>
    </a></span></dt><dt><span class="section"><a href="ch05s13.xhtml#d5e2206">5.13.4.2. Synchronization with real-time</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="math.xhtml">6. Mathematics of the Implemented Co-Simulation</a></span></dt><dd><dl><dt><span class="section"><a href="math.xhtml#d5e2212">6.1. Introduction</a></span></dt><dt><span class="section"><a href="ch06s02.xhtml">6.2. Description</a></span></dt></dl></dd><dt><span class="chapter"><a href="development.xhtml">7. Development</a></span></dt><dd><dl><dt><span class="section"><a href="development.xhtml#d5e2743">7.1. Introduction</a></span></dt><dt><span class="section"><a href="ch07s02.xhtml">7.2. Functional requirements</a></span></dt><dt><span class="section"><a href="tit-sofReqDev.xhtml">7.3. Software requirements</a></span></dt><dd><dl><dt><span class="section"><a href="tit-sofReqDev.xhtml#d5e2769">7.3.1. Linux</a></span></dt><dt><span class="section"><a href="tit-sofReqDev.xhtml#d5e2777">7.3.2. Mac OS X</a></span></dt><dt><span class="section"><a href="tit-sofReqDev.xhtml#d5e2782">7.3.3. Windows</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s04.xhtml">7.4. Version control</a></span></dt><dt><span class="section"><a href="tit-updPto.xhtml">7.5. Updating Ptolemy II</a></span></dt><dt><span class="section"><a href="tit-buiManSys.xhtml">7.6. Compiling the BCVTB</a></span></dt><dd><dl><dt><span class="section"><a href="tit-buiManSys.xhtml#d5e2832">7.6.1. Compiling the BCVTB</a></span></dt><dt><span class="section"><a href="tit-buiManSys.xhtml#d5e2854">7.6.2. Custom configuration</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s07.xhtml">7.7. Structure of the file system</a></span></dt><dt><span class="section"><a href="ch07s08.xhtml">7.8. Running unit tests</a></span></dt><dt><span class="section"><a href="ch07s09.xhtml">7.9. Adding actors</a></span></dt><dd><dl><dt><span class="section"><a href="ch07s09.xhtml#tit-devAddMyAct">7.9.1. Adding actors to <code class="code">lib/ptII/myActors</code></a></span></dt><dt><span class="section"><a href="ch07s09.xhtml#tit-devAddActOth">7.9.2. Adding actors to other directories</a></span></dt></dl></dd><dt><span class="section"><a href="ch07s10.xhtml">7.10. Linking a simulation program to the BCVTB</a></span></dt><dt><span class="section"><a href="ch07s11.xhtml">7.11. Data exchange between Ptolemy II and programs that are started by the Simulator actor</a></span></dt></dl></dd><dt><span class="chapter"><a href="acknowledgements.xhtml">8. Acknowledgements</a></span></dt><dt><span class="bibliography"><a href="bibliography.xhtml">Bibliography</a></span></dt></dl></div><div class="list-of-tables"><p><strong>List of Tables</strong></p><dl><dt>5.1. <a href="tit-crePtoMod.xhtml#tabSimAct">Parameters of the <code class="code">Simulator</code> actor.</a></dt><dt>5.2. <a href="tit-EnePluCon.xhtml#tabEneOveExe">
        Overview of the EnergyPlus objects used in the examples.
	</a></dt><dt>5.3. <a href="tit-CustomExeCon.xhtml#tabParSysCom">Parameters of the <code class="code">SystemCommand</code> actor.</a></dt><dt>5.4. <a href="ch05s12.xhtml#tab-bacAnaOutObjTyp">Properties of the Analog Output Object Type according to BACnet Standard, Table 12-3 (not all properties are shown).</a></dt><dt>5.5. <a href="ch05s12.xhtml#tab-BACnetConCod">BACnet Conformance Codes.</a></dt><dt>5.6. <a href="ch05s12.xhtml#tab-BACWriAtt">Attributes of the <code class="code">PropertyIdentifier</code> xml element if used to write to a BACnet device.</a></dt><dt>5.7. <a href="ch05s12.xhtml#tab-BACnetReaOutPor">Output ports of the <code class="code">BACnetReader</code> actor.</a></dt><dt>5.8. <a href="ch05s12.xhtml#tab-BACnetWriOutPor">Output ports of the <code class="code">BACnetWriter</code> actor.</a></dt><dt>5.9. <a href="ch05s13.xhtml#tab-usb-1208Properties-reader">Attribute's values for the USB-1208LS Data Acquisition Device (<code class="code">READ</code> mode).</a></dt><dt>5.10. <a href="ch05s13.xhtml#tab-usb-1208Properties-writer">Attribute's values for the USB-1208LS Data Acquisition Device (<code class="code">WRITE</code> mode).</a></dt><dt>5.11. <a href="ch05s13.xhtml#tab-ADIntMCCReaderOutPor">Output ports of the <code class="code">ADInterfaceMCCReader</code> actor.</a></dt><dt>5.12. <a href="ch05s13.xhtml#tab-ADIntMCCWriterOutPor">Output ports of the <code class="code">ADInterfaceMCCWriter</code> actor.</a></dt><dt>7.1. <a href="ch07s07.xhtml#tab-strFilSy">Structure of the file system.</a></dt><dt>7.2. <a href="ch07s11.xhtml#tab-socketFlag">Definition of flag of BSD Socket message</a></dt></dl></div>
 













 




 
 


</div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="releaseNotes.xhtml"><img src="images/next.gif" alt="Next"/></a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"> </td><td width="40%" align="right" valign="top"> Chapter 1. Release Notes</td></tr></table></div></body></html>