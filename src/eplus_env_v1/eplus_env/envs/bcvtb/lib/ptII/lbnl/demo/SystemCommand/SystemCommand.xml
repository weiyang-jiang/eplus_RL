<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="SystemCommand" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="9.1.devel">
    </property>
    <property name="_noJNLPLink" class="ptolemy.data.expr.StringParameter" value="">
    </property>
    <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
        <property name="iterations" class="ptolemy.data.expr.Parameter" value="(finalTime-modelStartTime)/timeStep+1">
        </property>
        <property name="vectorizationFactor" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <property name="allowDisconnectedGraphs" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="period" class="ptolemy.data.expr.Parameter" value="timeStep">
        </property>
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[90.0, 65.0]">
        </property>
    </property>
    <property name="timeStep" class="ptolemy.data.expr.Parameter" value="1">
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 65.0]">
        </property>
    </property>
    <property name="modelStartTime" class="ptolemy.data.expr.Parameter" value="0">
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 45.0]">
        </property>
    </property>
    <property name="finalTime" class="ptolemy.data.expr.Parameter" value="3">
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 85.0]">
        </property>
    </property>
    <property name="annotation" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">This model illustrates the use of the actor
SystemCommand that calls an external system command.
The actor SystemCommand outputs the current time, X1 and X2 to 
the standard output stream. The actor also writes X1 and X2 
to the text files outputX1.txt and outputX2.txt.
These files are read by the composite actor which
converts the strings to numbers.
Note that the constants x1 and x2 need to be doubles, i.e., 
use 1.0 and not 1

Click on the actor SystemCommand to see how to use time and port values
as arguments of a system command.</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[300.0, 25.0]">
        </property>
    </property>
    <property name="annotation2" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:darkgray">Author: Michael Wetter</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 455.0]">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={97, 82, 1151, 634}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[917, 524]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{458.5, 262.0}">
    </property>
    <class name="CompositeClassDefinition" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 175.0]">
        </property>
        <property name="OutputFileName" class="ptolemy.data.expr.StringParameter" value="output.txt">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 0.0, 0.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:red" y="20">-S-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 195.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={188, 104, 1080, 768}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[846, 658]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0044204964558">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{428.1383593749966, 491.9895572916601}">
        </property>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 270.0]">
            </property>
        </port>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 375.0]">
            </property>
        </port>
        <entity name="StringFunction" class="ptolemy.actor.lib.string.StringFunction">
            <doc>Trim a string, convert a string to uppercase, or convert a string to&#10;            lowercase depending on the user's selection.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="11">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[490.0, 285.0]">
            </property>
        </entity>
        <entity name="AnythingToDouble" class="ptolemy.actor.lib.conversions.AnythingToDouble">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[615.0, 375.0]">
            </property>
        </entity>
        <entity name="ExpressionToToken" class="ptolemy.actor.lib.conversions.ExpressionToToken">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 375.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                </property>
            </port>
        </entity>
        <entity name="ThrowModelError" class="ptolemy.actor.lib.ThrowModelError">
            <property name="message" class="ptolemy.kernel.util.StringAttribute" value="The trigger is non-zero, which means that there was an error during the simulation.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[365.0, 365.0]">
            </property>
        </entity>
        <entity name="Equals" class="ptolemy.actor.lib.logic.Equals">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[161.7705192565918, 274.7770690917969]">
            </property>
        </entity>
        <entity name="LogicalNot" class="ptolemy.actor.lib.logic.LogicalNot">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 272.5]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="0">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 357.5]">
            </property>
        </entity>
        <entity name="FileReader" class="ptolemy.actor.lib.io.FileReader">
            <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="$OutputFileName">
            </property>
            <doc>Read an entire file and output as a string</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[385.0, 285.0]">
            </property>
        </entity>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <vertex name="vertex1" value="[310.0, 272.5]">
            </vertex>
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="trigger" relation="relation7"/>
        <link port="output" relation="relation4"/>
        <link port="StringFunction.input" relation="relation3"/>
        <link port="StringFunction.output" relation="relation"/>
        <link port="AnythingToDouble.input" relation="relation2"/>
        <link port="AnythingToDouble.output" relation="relation4"/>
        <link port="ExpressionToToken.input" relation="relation"/>
        <link port="ExpressionToToken.output" relation="relation2"/>
        <link port="ThrowModelError.input" relation="relation10"/>
        <link port="Equals.input" relation="relation7"/>
        <link port="Equals.input" relation="relation8"/>
        <link port="Equals.output" relation="relation5"/>
        <link port="LogicalNot.input" relation="relation5"/>
        <link port="LogicalNot.output" relation="relation10"/>
        <link port="Const.output" relation="relation8"/>
        <link port="FileReader.output" relation="relation3"/>
        <link port="FileReader.trigger" relation="relation10"/>
    </class>
    <entity name="SystemCommand" class="lbnl.actor.lib.SystemCommand">
        <property name="programName" class="ptolemy.data.expr.FileParameter" value="java">
        </property>
        <property name="programArguments" class="ptolemy.data.expr.Parameter" value="&quot;-cp ../../.. lbnl.demo.SystemCommand.Simulate $time $X1 $X2&quot;">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, 290.0]">
        </property>
        <port name="exitValue" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="error" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="X1" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="X2" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="x1" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="1.0">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[205.0, 280.0]">
        </property>
    </entity>
    <entity name="x2" class="ptolemy.actor.lib.Sequence">
        <property name="values" class="ptolemy.data.expr.Parameter" value="{-2.0, 2.0}">
        </property>
        <property name="repeat" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 300.0]">
        </property>
    </entity>
    <entity name="TimedPlotter" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={219, 447, 500, 344}, maximized=false}">
        </property>
        <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[500, 300]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 285.0]">
        </property>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>TimedPlotter</title>
<xRange min="0.0" max="3.0"/>
<yRange min="-2.0" max="2.0"/>
</plot>?>
        </configure>
    </entity>
    <entity name="ReadOutputFile1" class="CompositeClassDefinition">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, 280.0]">
        </property>
        <property name="OutputFileName" class="ptolemy.data.expr.StringParameter" value="outputX1.txt">
        </property>
    </entity>
    <entity name="ReadOutputFile2" class="CompositeClassDefinition">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, 350.0]">
        </property>
        <property name="OutputFileName" class="ptolemy.data.expr.StringParameter" value="outputX2.txt">
        </property>
    </entity>
    <entity name="StandardOutputStream" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={313, 509, 540, 196}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[540, 152]">
        </property>
        <property name="suppressBlankLines" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 410.0]">
        </property>
    </entity>
    <entity name="StandardErrorStream" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={665, 401, 540, 330}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[540, 286]">
        </property>
        <property name="suppressBlankLines" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[470.0, 465.0]">
        </property>
    </entity>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[420.0, 280.0]">
        </vertex>
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="SystemCommand.exitValue" relation="relation4"/>
    <link port="SystemCommand.output" relation="relation"/>
    <link port="SystemCommand.error" relation="relation7"/>
    <link port="SystemCommand.X1" relation="relation3"/>
    <link port="SystemCommand.X2" relation="relation5"/>
    <link port="x1.output" relation="relation3"/>
    <link port="x2.output" relation="relation5"/>
    <link port="TimedPlotter.input" relation="relation2"/>
    <link port="TimedPlotter.input" relation="relation6"/>
    <link port="ReadOutputFile1.trigger" relation="relation4"/>
    <link port="ReadOutputFile1.output" relation="relation2"/>
    <link port="ReadOutputFile2.trigger" relation="relation4"/>
    <link port="ReadOutputFile2.output" relation="relation6"/>
    <link port="StandardOutputStream.input" relation="relation"/>
    <link port="StandardErrorStream.input" relation="relation7"/>
</entity>
