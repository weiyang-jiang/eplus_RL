<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="Zigbee" class="ptolemy.actor.TypedCompositeActor">
    <property name="Ellipse" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[615.0, 375.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="9.0.devel">
    </property>
    <property name="Wireless Director" class="ptolemy.domains.wireless.kernel.WirelessDirector">
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="20.0">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, -110.0]">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={122, 22, 1286, 874}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 764]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7988302469388">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{545.607017956479, 339.8007812499999}">
    </property>
    <property name="inrange" class="ptolemy.data.expr.Parameter" value="200.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, 95.0]">
        </property>
    </property>
    <property name="NodeId" class="ptolemy.data.expr.Parameter" value="1">
    </property>
    <property name="Ellipse2" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0, 275.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Ellipse5" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[580.0, 270.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Ellipse3" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[765.0, 415.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Ellipse4" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[810.0, 570.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Ellipse6" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[900.0, 490.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Ellipse7" class="ptolemy.vergil.kernel.attributes.EllipseAttribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[945.0, 615.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="2*inrange">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Zigbee Radio Simulation&#10;&#10;This is a simple version of the protocol so that the simulation is &#10;as fast as possible.  The model has the main characteristics&#10;of Zigbee, but without separate layers, &#10;&#10;This version  just implements a very simple Ad-Hoc On-Demand&#10;Distance Vector Routing (AODVR), the next step would be to&#10;implement the Medium Access based on CSMA-CA for &#10;non-Beaconing Networks.&#10;">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-115.0, 350.0]">
        </property>
    </property>
    <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.4,0.4,0.4,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Author: Victor Rosello">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-110.0, 770.0]">
        </property>
    </property>
    <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
        <property name="time" class="ptolemy.data.expr.Parameter" value="0.1">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, 290.0]">
        </property>
    </entity>
    <entity name="Const" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="{Sender=27, Type=&quot;RREQ&quot;, Data={Responder=6, Requester=12,Lifetime=0,IdReq=10,NoH=5, SeqN=1}}">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 245.0]">
        </property>
    </entity>
    <entity name="Const2" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 290.0]">
        </property>
    </entity>
    <entity name="WiredToWireless" class="ptolemy.domains.wireless.lib.WiredToWireless">
        <property name="outputChannelName" class="ptolemy.data.expr.StringParameter" value="canal">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[575.0, 255.0]">
        </property>
    </entity>
    <entity name="WirelessToWired" class="ptolemy.domains.wireless.lib.WirelessToWired">
        <property name="inputChannelName" class="ptolemy.data.expr.StringParameter" value="canal">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[695.0, 335.0]">
        </property>
    </entity>
    <entity name="Display" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={11, 100, 1025, 225}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[1025, 181]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[1150.0, 110.0]">
        </property>
    </entity>
    <entity name="canal" class="ptolemy.domains.wireless.lib.PowerLossChannel">
        <property name="defaultProperties" class="ptolemy.data.expr.Parameter" value="{range = 200, power = Infinity}">
        </property>
        <property name="propagationSpeed" class="ptolemy.data.expr.Parameter" value="340.0">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 25.0]">
        </property>
    </entity>
    <entity name="WirelessComposite2" class="ptolemy.domains.wireless.kernel.WirelessComposite">
        <property name="DEDirector" class="ptolemy.domains.de.kernel.DEDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1710.0, -1070.0]">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[765.0, 425.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 0, 1278, 993}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 883]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0883901003088">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-1274.6640625, -692.0893770578552}">
        </property>
        <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 10, Lifetime = 0, NoH = 8, Requester = 12, Responder = 6, SeqN = 1}, Sender = 4, Type = &quot;RREQ&quot;}">
        </property>
        <property name="NodeId" class="ptolemy.data.expr.Parameter" value="3">
        </property>
        <property name="SeqN" class="ptolemy.data.expr.Parameter" value="65">
        </property>
        <property name="inrange" class="ptolemy.data.expr.Parameter" value="200.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1425.0, -900.0]">
            </property>
        </property>
        <property name="Table" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}, {Dest = 12, Next = 1, NoH = 6, SeqN = 1}, {Dest = 1, Next = 1, NoH = 1, SeqN = 1}, {Dest = 27, Next = 27, NoH = 1, SeqN = 1}}">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1725.0, -970.0]">
            </property>
        </property>
        <property name="ActiveREQ" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}, {IdReq = 10, Requester = 12, Responder = 6}}">
        </property>
        <port name="CommOut" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="output"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1140.0, -745.0]">
            </property>
        </port>
        <port name="ComIn" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="input"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1730.0, -700.0]">
            </property>
        </port>
        <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="conservativeAnalysis" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1525.0, -785.0}">
            </property>
            <port name="CommIn" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="NextState" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <port name="Comm" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 16, 1278, 991}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 879]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7814556033232">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{527.4925377411147, 614.330838714486}">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1105.0, 715.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1110.0, 785.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="NewREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="NewREQ">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, 760.0]">
                    </property>
                </entity>
                <entity name="Free" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Free">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{385.0, 540.0}">
                    </property>
                </entity>
                <entity name="GoodREP" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="GoodREP">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[255.0, 100.0]">
                    </property>
                </entity>
                <entity name="RepetedREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="RepetedREQ">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 535.0]">
                    </property>
                </entity>
                <entity name="ini" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ini">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 1140.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==3 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.331264840408476">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.606970218174628">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.41757594685401783">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==2 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3187945223103927">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.8303876318932162">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==1 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.8264783144694349">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==0 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.131114565077624">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState == 0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.4634021104919674">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <link port="NewREQ.incomingPort" relation="relation3"/>
                <link port="NewREQ.outgoingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation2"/>
                <link port="Free.incomingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation6"/>
                <link port="Free.incomingPort" relation="relation7"/>
                <link port="Free.outgoingPort" relation="relation"/>
                <link port="Free.outgoingPort" relation="relation3"/>
                <link port="Free.outgoingPort" relation="relation5"/>
                <link port="GoodREP.incomingPort" relation="relation"/>
                <link port="GoodREP.outgoingPort" relation="relation2"/>
                <link port="RepetedREQ.incomingPort" relation="relation5"/>
                <link port="RepetedREQ.outgoingPort" relation="relation6"/>
                <link port="ini.outgoingPort" relation="relation7"/>
            </entity>
            <entity name="Free" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-285.0, 10.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 1, 1288, 1001}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.8490603363007">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{287.3750000000001, 506.9633183830382}">
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Next_State == 1 --&gt; RepetedREQ (Recibe RREQ y SI esta en ActiveREQ)&#10;Next_State == 2 --&gt; NewREQ (Recibe RREQ y NO esta en AvtiveREQ)&#10;Next_State == 3 --&gt; GoodREP (Recibe RREP y SI esta en ActiveREQ)&#10;Next_State == 4 --&gt; No hay cambio de estado (se descarta un RREP no valido)&#10;&#10;El resto de valores no son posibles">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, -20.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-320.0, 120.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 130.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, 325.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-30.0, 120.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 345.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot;)? 0:2">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 270.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayContains" class="ptolemy.actor.lib.ArrayContains">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[535.0, 355.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Responder=msg.Data.Responder, Requester=msg.Data.Requester, IdReq=msg.Data.IdReq}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 425.0]">
                    </property>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot; || msg.Type==&quot;RREP&quot; )? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 195.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="EventFilter" class="ptolemy.domains.de.lib.EventFilter">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 300.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="falseValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{610.0, 355.0}">
                    </property>
                </entity>
                <entity name="Merge" class="ptolemy.domains.de.lib.Merge">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[765.0, 170.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[250.0, 155.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 165.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-135.0, 510.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a+b">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 280.0]">
                    </property>
                    <port name="a" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="b" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[370.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-250.0, 120.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[35.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-180.0, 235.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[20.0, 155.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[495.0, 425.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="CommIn" relation="relation5"/>
                <link port="NextState" relation="relation3"/>
                <link port="SetVariable.input" relation="relation5"/>
                <link port="SetVariable.output" relation="relation9"/>
                <link port="Const2.output" relation="relation4"/>
                <link port="Const2.trigger" relation="relation14"/>
                <link port="Expression2.output" relation="relation2"/>
                <link port="Expression2.msg" relation="relation9"/>
                <link port="Expression2.enab" relation="relation14"/>
                <link port="ArrayContains.array" relation="relation4"/>
                <link port="ArrayContains.output" relation="relation8"/>
                <link port="ArrayContains.element" relation="relation13"/>
                <link port="Expression3.output" relation="relation13"/>
                <link port="Expression3.enab" relation="relation14"/>
                <link port="Expression3.msg" relation="relation9"/>
                <link port="Expression.output" relation="relation7"/>
                <link port="Expression.msg" relation="relation9"/>
                <link port="EventFilter.input" relation="relation7"/>
                <link port="EventFilter.output" relation="relation14"/>
                <link port="BooleanToAnything.input" relation="relation8"/>
                <link port="BooleanToAnything.output" relation="relation"/>
                <link port="Merge.input" relation="relation12"/>
                <link port="Merge.input" relation="relation6"/>
                <link port="Merge.output" relation="relation3"/>
                <link port="BooleanSwitch.input" relation="relation9"/>
                <link port="BooleanSwitch.control" relation="relation7"/>
                <link port="BooleanSwitch.falseOutput" relation="relation11"/>
                <link port="Const.output" relation="relation12"/>
                <link port="Const.trigger" relation="relation11"/>
                <link port="MonitorValue.input" relation="relation5"/>
                <link port="Expression4.output" relation="relation6"/>
                <link port="Expression4.a" relation="relation2"/>
                <link port="Expression4.b" relation="relation"/>
            </entity>
            <entity name="RepetedREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="allowDisconnectedGraphs" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-385.0, 95.0]">
                    </property>
                </property>
                <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {NoH = 2, SeqN = 2, Responder = 10, Requester = 25, IdReq = 1, Lifetime = 0}, Sender = 27, Type = &quot;RREQ&quot;}">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={-4, -4, 1288, 1004}, maximized=true}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7266570727165">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{276.8124999999999, 660.2064888164025}">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 520.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 480.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 340.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-205.0, 340.0}">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1001}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 445.5}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 400.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[235.0, 360.0]">
                            </vertex>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="elem" relation="relation3"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-195.0, 515.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-410.0, 340.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(exist&gt;=1)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 340.0]">
                    </property>
                    <port name="exist" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 480.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 290.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 220.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 230.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 210.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 235.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[800.0, 220.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-335.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[120.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[605.0, 290.0]">
                    </vertex>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[180.0, 210.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation5"/>
                <link port="ArraySum.input" relation="relation3"/>
                <link port="ArraySum.output" relation="relation4"/>
                <link port="IterateOverArray.RouteTable" relation="relation"/>
                <link port="IterateOverArray.elem" relation="relation3"/>
                <link port="MonitorValue.input" relation="relation"/>
                <link port="Const.output" relation="relation"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.exist" relation="relation4"/>
                <link port="Const2.output" relation="relation5"/>
                <link port="Const2.trigger" relation="relation2"/>
                <link port="Expression2.output" relation="relation7"/>
                <link port="Expression2.Msg" relation="relation12"/>
                <link port="ArrayAppend.input" relation="relation8"/>
                <link port="ArrayAppend.input" relation="relation7"/>
                <link port="ArrayAppend.output" relation="relation11"/>
                <link port="SetVariable.input" relation="relation6"/>
                <link port="Const4.output" relation="relation8"/>
                <link port="Const4.trigger" relation="relation12"/>
                <link port="MonitorValue2.input" relation="relation2"/>
                <link port="Const5.output" relation="relation12"/>
                <link port="BooleanSwitch3.input" relation="relation11"/>
                <link port="BooleanSwitch3.control" relation="relation2"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation6"/>
            </entity>
            <entity name="NewREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7026850032744">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{381.4999999999999, 468.2564072693384}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-325.0, -135.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-345.0, -75.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, -45.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1055.0, 105.0]">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 250.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Responder==NodeId)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 125.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=NodeId, Requester=mens.Data.Requester, Lifetime=100, IdReq=mens.Data.IdReq, NoH=1, SeqN=SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[390.0, 40.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(table.Dest!=0)? {Sender=NodeId, Type=&quot;RREP&quot;, Data={Requester=mens.Data.Requester, Responder=table.Dest,Lifetime=100,IdReq=mens.Data.IdReq,SeqN=table.SeqN,NoH=table.NoH+1}}:{Sender=NodeId, Type=&quot;RREQ&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester,Lifetime=0,IdReq=mens.Data.IdReq,NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 85.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayElement" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 40.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 205.0]">
                    </property>
                </entity>
                <entity name="BooleanMultiplexor" class="ptolemy.actor.lib.BooleanMultiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 85.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray2" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-140.0, 260.0]">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 265.0]">
                            </property>
                        </port>
                        <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="{665.0, 325.0}">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Responder)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 265.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Requester)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 325.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[575.0, 425.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[240.0, 360.0]">
                            </vertex>
                        </relation>
                        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="Responder" relation="relation3"/>
                        <link port="Sender" relation="relation5"/>
                        <link port="Requester" relation="relation4"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="Expression.output" relation="relation5"/>
                        <link port="Expression.RouteTable" relation="relation"/>
                        <link port="Expression.m" relation="relation2"/>
                        <link port="Expression3.output" relation="relation4"/>
                        <link port="Expression3.RouteTable" relation="relation"/>
                        <link port="Expression3.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{IdReq=Msg.Data.IdReq, Requester=Msg.Data.Requester, Responder=Msg.Data.Responder}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, -40.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, -95.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-110.0, -100.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0, -85.0]">
                    </property>
                </entity>
                <entity name="Expression5" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Requester==mens.Sender)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 585.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression6" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 450.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression7" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[170.0, 515.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Multiplexor" class="ptolemy.actor.lib.Multiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{820.0, 515.0}">
                    </property>
                    <property name="_flipPortsVertical" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 450.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything2" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything3" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 585.0]">
                    </property>
                </entity>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 525.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend2" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[925.0, 400.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 465.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1015.0, 475.0]">
                    </property>
                </entity>
                <entity name="Expression8" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(sum&gt;0)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[890.0, 630.0]">
                    </property>
                    <port name="sum" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression9" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=0, Dest=0, Next=0, SeqN=0}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 615.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression13" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[490.0, 695.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression14" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN},{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression10" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 655.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[865.0, -45.0]">
                    </property>
                </entity>
                <entity name="ArraySum2" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 450.0]">
                    </property>
                </entity>
                <entity name="ArraySum3" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch2" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[620.0, -95.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-530.0, 115.0]">
                    </property>
                </entity>
                <entity name="Expression11" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="((table.Dest!=0)&amp;&amp;(table.SeqN&gt;= mens.Data.SeqN))?true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 870.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[985.0, 95.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 960.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 290.0]">
                    </property>
                </entity>
                <entity name="MonitorValue3" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 1005.0]">
                    </property>
                </entity>
                <entity name="ArrayElement2" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 805.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 205.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[195.0, 215.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[610.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 75.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[845.0, 85.0]">
                    </vertex>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[80.0, 250.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[410.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation15" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation16" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 585.0]">
                    </vertex>
                </relation>
                <relation name="relation18" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-45.0, 450.0]">
                    </vertex>
                </relation>
                <relation name="relation19" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-60.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation17" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation20" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation21" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation22" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation23" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation24" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation26" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation28" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation29" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation27" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation30" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[765.0, 525.0]">
                    </vertex>
                </relation>
                <relation name="relation25" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation31" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation33" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation32" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation34" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation35" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation36" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation37" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation39" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation41" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation40" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation42" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{-450.0, 115.0}">
                    </vertex>
                </relation>
                <relation name="relation43" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation45" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{1050.0, 195.0}">
                    </vertex>
                </relation>
                <relation name="relation44" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[65.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation38" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{365.0, 815.0}">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation37"/>
                <link port="Comm" relation="relation43"/>
                <link port="ArraySum.input" relation="relation4"/>
                <link port="ArraySum.output" relation="relation10"/>
                <link port="Expression.output" relation="relation5"/>
                <link port="Expression.mens" relation="relation7"/>
                <link port="Expression2.output" relation="relation11"/>
                <link port="Expression2.mens" relation="relation8"/>
                <link port="Expression3.output" relation="relation12"/>
                <link port="Expression3.mens" relation="relation6"/>
                <link port="Expression3.table" relation="relation2"/>
                <link port="ArrayElement.input" relation="relation"/>
                <link port="ArrayElement.output" relation="relation2"/>
                <link port="ArrayElement.index" relation="relation10"/>
                <link port="Const.output" relation="relation3"/>
                <link port="Const.trigger" relation="relation42"/>
                <link port="Const2.output" relation="relation"/>
                <link port="Const2.trigger" relation="relation42"/>
                <link port="BooleanMultiplexor.trueInput" relation="relation11"/>
                <link port="BooleanMultiplexor.falseInput" relation="relation12"/>
                <link port="BooleanMultiplexor.select" relation="relation5"/>
                <link port="BooleanMultiplexor.output" relation="relation9"/>
                <link port="IterateOverArray2.RouteTable" relation="relation"/>
                <link port="IterateOverArray2.Responder" relation="relation4"/>
                <link port="IterateOverArray2.Sender" relation="relation18"/>
                <link port="IterateOverArray2.Requester" relation="relation19"/>
                <link port="Expression4.output" relation="relation13"/>
                <link port="Expression4.Msg" relation="relation41"/>
                <link port="ArrayAppend.input" relation="relation15"/>
                <link port="ArrayAppend.input" relation="relation13"/>
                <link port="ArrayAppend.output" relation="relation14"/>
                <link port="Const3.output" relation="relation15"/>
                <link port="Const3.trigger" relation="relation42"/>
                <link port="SetVariable.input" relation="relation40"/>
                <link port="Expression5.output" relation="relation21"/>
                <link port="Expression5.mens" relation="relation16"/>
                <link port="Expression6.output" relation="relation17"/>
                <link port="Expression6.index" relation="relation39"/>
                <link port="Expression7.output" relation="relation20"/>
                <link port="Expression7.index" relation="relation44"/>
                <link port="Multiplexor.input" relation="relation31"/>
                <link port="Multiplexor.input" relation="relation33"/>
                <link port="Multiplexor.input" relation="relation32"/>
                <link port="Multiplexor.input" relation="relation34"/>
                <link port="Multiplexor.output" relation="relation28"/>
                <link port="Multiplexor.select" relation="relation30"/>
                <link port="BooleanToAnything.input" relation="relation17"/>
                <link port="BooleanToAnything.output" relation="relation22"/>
                <link port="BooleanToAnything2.input" relation="relation20"/>
                <link port="BooleanToAnything2.output" relation="relation23"/>
                <link port="BooleanToAnything3.input" relation="relation21"/>
                <link port="BooleanToAnything3.output" relation="relation24"/>
                <link port="AddSubtract.plus" relation="relation22"/>
                <link port="AddSubtract.plus" relation="relation23"/>
                <link port="AddSubtract.minus" relation="relation24"/>
                <link port="AddSubtract.output" relation="relation30"/>
                <link port="ArrayAppend2.input" relation="relation26"/>
                <link port="ArrayAppend2.input" relation="relation28"/>
                <link port="ArrayAppend2.output" relation="relation29"/>
                <link port="SetVariable2.input" relation="relation27"/>
                <link port="BooleanSwitch.input" relation="relation29"/>
                <link port="BooleanSwitch.control" relation="relation25"/>
                <link port="BooleanSwitch.trueOutput" relation="relation27"/>
                <link port="Expression8.output" relation="relation25"/>
                <link port="Expression8.sum" relation="relation30"/>
                <link port="Expression9.output" relation="relation31"/>
                <link port="Expression9.Msg" relation="relation36"/>
                <link port="Expression13.output" relation="relation32"/>
                <link port="Expression13.Msg" relation="relation36"/>
                <link port="Expression14.output" relation="relation34"/>
                <link port="Expression14.Msg" relation="relation36"/>
                <link port="Expression10.output" relation="relation33"/>
                <link port="Expression10.Msg" relation="relation36"/>
                <link port="Const4.output" relation="relation37"/>
                <link port="Const4.trigger" relation="relation9"/>
                <link port="ArraySum2.input" relation="relation18"/>
                <link port="ArraySum2.output" relation="relation39"/>
                <link port="ArraySum3.input" relation="relation19"/>
                <link port="ArraySum3.output" relation="relation44"/>
                <link port="BooleanSwitch2.input" relation="relation14"/>
                <link port="BooleanSwitch2.control" relation="relation5"/>
                <link port="BooleanSwitch2.falseOutput" relation="relation40"/>
                <link port="PoissonClock.output" relation="relation42"/>
                <link port="Expression11.output" relation="relation45"/>
                <link port="Expression11.mens" relation="relation35"/>
                <link port="Expression11.table" relation="relation38"/>
                <link port="BooleanSwitch3.input" relation="relation9"/>
                <link port="BooleanSwitch3.control" relation="relation45"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation43"/>
                <link port="MonitorValue.input" relation="relation38"/>
                <link port="MonitorValue2.input" relation="relation45"/>
                <link port="MonitorValue3.input" relation="relation7"/>
                <link port="ArrayElement2.input" relation="relation26"/>
                <link port="ArrayElement2.output" relation="relation38"/>
                <link port="ArrayElement2.index" relation="relation44"/>
                <link relation1="relation" relation2="relation26"/>
                <link relation1="relation3" relation2="relation8"/>
                <link relation1="relation3" relation2="relation16"/>
                <link relation1="relation6" relation2="relation8"/>
                <link relation1="relation6" relation2="relation7"/>
                <link relation1="relation8" relation2="relation41"/>
                <link relation1="relation16" relation2="relation35"/>
                <link relation1="relation35" relation2="relation36"/>
            </entity>
            <entity name="GoodREP" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 50.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 45.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1031.75, 670.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[896.75, 460.0]">
                    </property>
                </port>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[586.75, 285.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[166.75, 350.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[636.75, 140.0]">
                    </property>
                </entity>
                <entity name="ArrayRemoveElement" class="ptolemy.actor.lib.ArrayRemoveElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[811.75, 150.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{IdReq=msg.Data.IdReq, Responder=msg.Data.Responder, Requester=msg.Data.Requester}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[476.75, 200.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[926.75, 150.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[846.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Responder, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[486.75, 350.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[951.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(NodeId==msg.Data.Requester)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[426.75, 580.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[786.75, 450.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester, Lifetime=mens.Data.Lifetime-10, IdReq=mens.Data.IdReq, NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[506.75, 450.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[406.75, 670.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 350.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[246.75, 350.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation11"/>
                <link port="Comm" relation="relation9"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation5"/>
                <link port="Const.output" relation="relation5"/>
                <link port="Const.trigger" relation="relation12"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation5"/>
                <link port="ArrayRemoveElement.array" relation="relation"/>
                <link port="ArrayRemoveElement.output" relation="relation4"/>
                <link port="ArrayRemoveElement.element" relation="relation3"/>
                <link port="Expression.output" relation="relation3"/>
                <link port="Expression.msg" relation="relation5"/>
                <link port="SetVariable.input" relation="relation4"/>
                <link port="ArrayAppend.input" relation="relation2"/>
                <link port="ArrayAppend.input" relation="relation6"/>
                <link port="ArrayAppend.output" relation="relation7"/>
                <link port="Expression2.output" relation="relation6"/>
                <link port="Expression2.Msg" relation="relation5"/>
                <link port="SetVariable2.input" relation="relation7"/>
                <link port="Expression3.output" relation="relation8"/>
                <link port="Expression3.msg" relation="relation5"/>
                <link port="BooleanSwitch.input" relation="relation10"/>
                <link port="BooleanSwitch.control" relation="relation8"/>
                <link port="BooleanSwitch.falseOutput" relation="relation9"/>
                <link port="Expression4.output" relation="relation10"/>
                <link port="Expression4.mens" relation="relation5"/>
                <link port="Const4.output" relation="relation11"/>
                <link port="Const4.trigger" relation="relation5"/>
                <link port="PoissonClock.output" relation="relation12"/>
            </entity>
            <entity name="ini" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-585.0, -15.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, -5.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 400.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 35.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-245.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-260.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable3" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 0, Lifetime = 0, NoH = 0, Requester = 0, Responder =0, SeqN = 0}, Sender = 0, Type = &quot; &quot;}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-210.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-310.0, 400.0]">
                    </property>
                </entity>
                <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
                    <property name="time" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-590.0, 275.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 275.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-410.0, 275.0]">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation4"/>
                <link port="SetVariable.input" relation="relation3"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation6"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation6"/>
                <link port="SetVariable2.input" relation="relation"/>
                <link port="SetVariable3.input" relation="relation2"/>
                <link port="Const4.output" relation="relation3"/>
                <link port="Const4.trigger" relation="relation6"/>
                <link port="Const5.output" relation="relation4"/>
                <link port="Const5.trigger" relation="relation6"/>
                <link port="SingleEvent.output" relation="relation6"/>
                <link port="Const.trigger" relation="relation6"/>
            </entity>
            <relation name="CommInRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="NextStateRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="CommRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <link port="CommIn" relation="CommInRelation"/>
            <link port="NextState" relation="NextStateRelation"/>
            <link port="Comm" relation="CommRelation"/>
            <link port="_Controller.CommIn" relation="CommInRelation"/>
            <link port="_Controller.NextState" relation="NextStateRelation"/>
            <link port="_Controller.Comm" relation="CommRelation"/>
            <link port="Free.CommIn" relation="CommInRelation"/>
            <link port="Free.NextState" relation="NextStateRelation"/>
            <link port="Free.Comm" relation="CommRelation"/>
            <link port="RepetedREQ.CommIn" relation="CommInRelation"/>
            <link port="RepetedREQ.NextState" relation="NextStateRelation"/>
            <link port="RepetedREQ.Comm" relation="CommRelation"/>
            <link port="NewREQ.CommIn" relation="CommInRelation"/>
            <link port="NewREQ.NextState" relation="NextStateRelation"/>
            <link port="NewREQ.Comm" relation="CommRelation"/>
            <link port="GoodREP.CommIn" relation="CommInRelation"/>
            <link port="GoodREP.NextState" relation="NextStateRelation"/>
            <link port="GoodREP.Comm" relation="CommRelation"/>
            <link port="ini.CommIn" relation="CommInRelation"/>
            <link port="ini.NextState" relation="NextStateRelation"/>
            <link port="ini.Comm" relation="CommRelation"/>
        </entity>
        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1495.0, -570.0]">
            </property>
        </entity>
        <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1320.0, -650.0]">
            </property>
        </entity>
        <entity name="Display" class="ptolemy.actor.lib.gui.Display">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={515, 340, 128, 339}, maximized=false}">
            </property>
            <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[128, 295]">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1360.0, -840.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="SeqN">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1295, -705}">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="i+1">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1235.0, -705.0]">
            </property>
            <port name="i" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="SeqN">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1155.0, -705.0]">
            </property>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1465.0, -745.0]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1605.0, -700.0]">
            </vertex>
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <link port="CommOut" relation="relation2"/>
        <link port="ComIn" relation="relation3"/>
        <link port="ModalModel.CommIn" relation="relation3"/>
        <link port="ModalModel.NextState" relation="relation"/>
        <link port="ModalModel.Comm" relation="relation2"/>
        <link port="MonitorValue.input" relation="relation3"/>
        <link port="MonitorValue2.input" relation="relation2"/>
        <link port="Display.input" relation="relation"/>
        <link port="Const.output" relation="relation4"/>
        <link port="Const.trigger" relation="relation2"/>
        <link port="Expression.output" relation="relation5"/>
        <link port="Expression.i" relation="relation4"/>
        <link port="SetVariable.input" relation="relation5"/>
    </entity>
    <entity name="WirelessComposite" class="ptolemy.domains.wireless.kernel.WirelessComposite">
        <property name="DEDirector" class="ptolemy.domains.de.kernel.DEDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1710.0, -1070.0]">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[635.0, 380.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 0, 1278, 993}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 883]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0883901003088">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-1274.6640625, -692.0893770578552}">
        </property>
        <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 10, Lifetime = 0, NoH = 7, Requester = 12, Responder = 6, SeqN = 1}, Sender = 3, Type = &quot;RREQ&quot;}">
        </property>
        <property name="NodeId" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <property name="SeqN" class="ptolemy.data.expr.Parameter" value="65">
        </property>
        <property name="inrange" class="ptolemy.data.expr.Parameter" value="200.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1425.0, -900.0]">
            </property>
        </property>
        <property name="Table" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}, {Dest = 12, Next = 27, NoH = 5, SeqN = 1}, {Dest = 27, Next = 27, NoH = 1, SeqN = 1}}">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1725.0, -970.0]">
            </property>
        </property>
        <property name="ActiveREQ" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}, {IdReq = 10, Requester = 12, Responder = 6}}">
        </property>
        <port name="CommOut" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="output"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1140.0, -745.0]">
            </property>
        </port>
        <port name="ComIn" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="input"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1730.0, -700.0]">
            </property>
        </port>
        <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="conservativeAnalysis" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1525.0, -785.0}">
            </property>
            <port name="CommIn" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="NextState" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <port name="Comm" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 16, 1278, 991}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 879]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7814556033232">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{527.4925377411147, 614.330838714486}">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1105.0, 715.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1110.0, 785.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="NewREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="NewREQ">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-70.0, 760.0}">
                    </property>
                </entity>
                <entity name="Free" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Free">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{385.0, 540.0}">
                    </property>
                </entity>
                <entity name="GoodREP" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="GoodREP">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[255.0, 100.0]">
                    </property>
                </entity>
                <entity name="RepetedREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="RepetedREQ">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 535.0]">
                    </property>
                </entity>
                <entity name="ini" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ini">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 1140.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==3 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.331264840408476">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.606970218174628">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.41757594685401783">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==2 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3187945223103927">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.8303876318932162">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==1 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.8264783144694349">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==0 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.131114565077624">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState == 0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.4634021104919674">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <link port="NewREQ.incomingPort" relation="relation3"/>
                <link port="NewREQ.outgoingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation2"/>
                <link port="Free.incomingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation6"/>
                <link port="Free.incomingPort" relation="relation7"/>
                <link port="Free.outgoingPort" relation="relation"/>
                <link port="Free.outgoingPort" relation="relation3"/>
                <link port="Free.outgoingPort" relation="relation5"/>
                <link port="GoodREP.incomingPort" relation="relation"/>
                <link port="GoodREP.outgoingPort" relation="relation2"/>
                <link port="RepetedREQ.incomingPort" relation="relation5"/>
                <link port="RepetedREQ.outgoingPort" relation="relation6"/>
                <link port="ini.outgoingPort" relation="relation7"/>
            </entity>
            <entity name="Free" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-285.0, 10.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 1, 1288, 1001}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.8490603363007">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{287.3750000000001, 506.9633183830382}">
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Next_State == 1 --&gt; RepetedREQ (Recibe RREQ y SI esta en ActiveREQ)&#10;Next_State == 2 --&gt; NewREQ (Recibe RREQ y NO esta en AvtiveREQ)&#10;Next_State == 3 --&gt; GoodREP (Recibe RREP y SI esta en ActiveREQ)&#10;Next_State == 4 --&gt; No hay cambio de estado (se descarta un RREP no valido)&#10;&#10;El resto de valores no son posibles">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, -20.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-320.0, 120.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 130.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, 325.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-30.0, 120.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 345.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot;)? 0:2">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 270.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayContains" class="ptolemy.actor.lib.ArrayContains">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[535.0, 355.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Responder=msg.Data.Responder, Requester=msg.Data.Requester, IdReq=msg.Data.IdReq}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 425.0]">
                    </property>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot; || msg.Type==&quot;RREP&quot; )? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 195.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="EventFilter" class="ptolemy.domains.de.lib.EventFilter">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 300.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="falseValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{610.0, 355.0}">
                    </property>
                </entity>
                <entity name="Merge" class="ptolemy.domains.de.lib.Merge">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[765.0, 170.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[250.0, 155.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 165.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-135.0, 510.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a+b">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 280.0]">
                    </property>
                    <port name="a" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="b" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[370.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-250.0, 120.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[35.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-180.0, 235.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[20.0, 155.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[495.0, 425.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="CommIn" relation="relation5"/>
                <link port="NextState" relation="relation3"/>
                <link port="SetVariable.input" relation="relation5"/>
                <link port="SetVariable.output" relation="relation9"/>
                <link port="Const2.output" relation="relation4"/>
                <link port="Const2.trigger" relation="relation14"/>
                <link port="Expression2.output" relation="relation2"/>
                <link port="Expression2.msg" relation="relation9"/>
                <link port="Expression2.enab" relation="relation14"/>
                <link port="ArrayContains.array" relation="relation4"/>
                <link port="ArrayContains.output" relation="relation8"/>
                <link port="ArrayContains.element" relation="relation13"/>
                <link port="Expression3.output" relation="relation13"/>
                <link port="Expression3.enab" relation="relation14"/>
                <link port="Expression3.msg" relation="relation9"/>
                <link port="Expression.output" relation="relation7"/>
                <link port="Expression.msg" relation="relation9"/>
                <link port="EventFilter.input" relation="relation7"/>
                <link port="EventFilter.output" relation="relation14"/>
                <link port="BooleanToAnything.input" relation="relation8"/>
                <link port="BooleanToAnything.output" relation="relation"/>
                <link port="Merge.input" relation="relation12"/>
                <link port="Merge.input" relation="relation6"/>
                <link port="Merge.output" relation="relation3"/>
                <link port="BooleanSwitch.input" relation="relation9"/>
                <link port="BooleanSwitch.control" relation="relation7"/>
                <link port="BooleanSwitch.falseOutput" relation="relation11"/>
                <link port="Const.output" relation="relation12"/>
                <link port="Const.trigger" relation="relation11"/>
                <link port="MonitorValue.input" relation="relation5"/>
                <link port="Expression4.output" relation="relation6"/>
                <link port="Expression4.a" relation="relation2"/>
                <link port="Expression4.b" relation="relation"/>
            </entity>
            <entity name="RepetedREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="allowDisconnectedGraphs" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-385.0, 95.0]">
                    </property>
                </property>
                <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {NoH = 2, SeqN = 2, Responder = 10, Requester = 25, IdReq = 1, Lifetime = 0}, Sender = 27, Type = &quot;RREQ&quot;}">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={-4, -4, 1288, 1004}, maximized=true}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7266570727165">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{276.8124999999999, 660.2064888164025}">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 520.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 480.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 340.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-205.0, 340.0}">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1001}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 445.5}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 400.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[235.0, 360.0]">
                            </vertex>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="elem" relation="relation3"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-195.0, 515.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-410.0, 340.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(exist&gt;=1)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 340.0]">
                    </property>
                    <port name="exist" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 480.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 290.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 220.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 230.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 210.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 235.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[800.0, 220.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-335.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[120.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[605.0, 290.0]">
                    </vertex>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[180.0, 210.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation5"/>
                <link port="ArraySum.input" relation="relation3"/>
                <link port="ArraySum.output" relation="relation4"/>
                <link port="IterateOverArray.RouteTable" relation="relation"/>
                <link port="IterateOverArray.elem" relation="relation3"/>
                <link port="MonitorValue.input" relation="relation"/>
                <link port="Const.output" relation="relation"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.exist" relation="relation4"/>
                <link port="Const2.output" relation="relation5"/>
                <link port="Const2.trigger" relation="relation2"/>
                <link port="Expression2.output" relation="relation7"/>
                <link port="Expression2.Msg" relation="relation12"/>
                <link port="ArrayAppend.input" relation="relation8"/>
                <link port="ArrayAppend.input" relation="relation7"/>
                <link port="ArrayAppend.output" relation="relation11"/>
                <link port="SetVariable.input" relation="relation6"/>
                <link port="Const4.output" relation="relation8"/>
                <link port="Const4.trigger" relation="relation12"/>
                <link port="MonitorValue2.input" relation="relation2"/>
                <link port="Const5.output" relation="relation12"/>
                <link port="BooleanSwitch3.input" relation="relation11"/>
                <link port="BooleanSwitch3.control" relation="relation2"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation6"/>
            </entity>
            <entity name="NewREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7026850032744">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{381.4999999999999, 468.2564072693384}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-325.0, -135.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-345.0, -75.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, -45.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1055.0, 105.0]">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 250.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Responder==NodeId)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 125.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=NodeId, Requester=mens.Data.Requester, Lifetime=100, IdReq=mens.Data.IdReq, NoH=1, SeqN=SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[390.0, 40.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(table.Dest!=0)? {Sender=NodeId, Type=&quot;RREP&quot;, Data={Requester=mens.Data.Requester, Responder=table.Dest,Lifetime=100,IdReq=mens.Data.IdReq,SeqN=table.SeqN,NoH=table.NoH+1}}:{Sender=NodeId, Type=&quot;RREQ&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester,Lifetime=0,IdReq=mens.Data.IdReq,NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 85.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayElement" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 40.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 205.0]">
                    </property>
                </entity>
                <entity name="BooleanMultiplexor" class="ptolemy.actor.lib.BooleanMultiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 85.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray2" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-140.0, 260.0]">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 265.0]">
                            </property>
                        </port>
                        <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="{665.0, 325.0}">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Responder)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 265.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Requester)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 325.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[575.0, 425.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[240.0, 360.0]">
                            </vertex>
                        </relation>
                        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="Responder" relation="relation3"/>
                        <link port="Sender" relation="relation5"/>
                        <link port="Requester" relation="relation4"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="Expression.output" relation="relation5"/>
                        <link port="Expression.RouteTable" relation="relation"/>
                        <link port="Expression.m" relation="relation2"/>
                        <link port="Expression3.output" relation="relation4"/>
                        <link port="Expression3.RouteTable" relation="relation"/>
                        <link port="Expression3.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{IdReq=Msg.Data.IdReq, Requester=Msg.Data.Requester, Responder=Msg.Data.Responder}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, -40.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, -95.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-110.0, -100.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0, -85.0]">
                    </property>
                </entity>
                <entity name="Expression5" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Requester==mens.Sender)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 585.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression6" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 450.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression7" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[170.0, 515.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Multiplexor" class="ptolemy.actor.lib.Multiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{820.0, 515.0}">
                    </property>
                    <property name="_flipPortsVertical" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 450.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything2" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything3" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 585.0]">
                    </property>
                </entity>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 525.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend2" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[925.0, 400.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 465.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1015.0, 475.0]">
                    </property>
                </entity>
                <entity name="Expression8" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(sum&gt;0)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[890.0, 630.0]">
                    </property>
                    <port name="sum" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression9" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=0, Dest=0, Next=0, SeqN=0}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 615.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression13" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[490.0, 695.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression14" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN},{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression10" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 655.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[865.0, -45.0]">
                    </property>
                </entity>
                <entity name="ArraySum2" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 450.0]">
                    </property>
                </entity>
                <entity name="ArraySum3" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch2" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[620.0, -95.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-530.0, 115.0]">
                    </property>
                </entity>
                <entity name="Expression11" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="((table.Dest!=0)&amp;&amp;(table.SeqN&gt;= mens.Data.SeqN))?true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 870.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[985.0, 95.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 960.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 290.0]">
                    </property>
                </entity>
                <entity name="MonitorValue3" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 1005.0]">
                    </property>
                </entity>
                <entity name="ArrayElement2" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 805.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 205.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[195.0, 215.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[610.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 75.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[845.0, 85.0]">
                    </vertex>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[80.0, 250.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[410.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation15" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation16" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 585.0]">
                    </vertex>
                </relation>
                <relation name="relation18" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-45.0, 450.0]">
                    </vertex>
                </relation>
                <relation name="relation19" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-60.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation17" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation20" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation21" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation22" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation23" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation24" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation26" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation28" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation29" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation27" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation30" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[765.0, 525.0]">
                    </vertex>
                </relation>
                <relation name="relation25" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation31" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation33" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation32" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation34" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation35" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation36" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation37" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation39" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation41" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation40" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation42" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{-450.0, 115.0}">
                    </vertex>
                </relation>
                <relation name="relation43" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation45" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{1050.0, 195.0}">
                    </vertex>
                </relation>
                <relation name="relation44" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[65.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation38" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{365.0, 815.0}">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation37"/>
                <link port="Comm" relation="relation43"/>
                <link port="ArraySum.input" relation="relation4"/>
                <link port="ArraySum.output" relation="relation10"/>
                <link port="Expression.output" relation="relation5"/>
                <link port="Expression.mens" relation="relation7"/>
                <link port="Expression2.output" relation="relation11"/>
                <link port="Expression2.mens" relation="relation8"/>
                <link port="Expression3.output" relation="relation12"/>
                <link port="Expression3.mens" relation="relation6"/>
                <link port="Expression3.table" relation="relation2"/>
                <link port="ArrayElement.input" relation="relation"/>
                <link port="ArrayElement.output" relation="relation2"/>
                <link port="ArrayElement.index" relation="relation10"/>
                <link port="Const.output" relation="relation3"/>
                <link port="Const.trigger" relation="relation42"/>
                <link port="Const2.output" relation="relation"/>
                <link port="Const2.trigger" relation="relation42"/>
                <link port="BooleanMultiplexor.trueInput" relation="relation11"/>
                <link port="BooleanMultiplexor.falseInput" relation="relation12"/>
                <link port="BooleanMultiplexor.select" relation="relation5"/>
                <link port="BooleanMultiplexor.output" relation="relation9"/>
                <link port="IterateOverArray2.RouteTable" relation="relation"/>
                <link port="IterateOverArray2.Responder" relation="relation4"/>
                <link port="IterateOverArray2.Sender" relation="relation18"/>
                <link port="IterateOverArray2.Requester" relation="relation19"/>
                <link port="Expression4.output" relation="relation13"/>
                <link port="Expression4.Msg" relation="relation41"/>
                <link port="ArrayAppend.input" relation="relation15"/>
                <link port="ArrayAppend.input" relation="relation13"/>
                <link port="ArrayAppend.output" relation="relation14"/>
                <link port="Const3.output" relation="relation15"/>
                <link port="Const3.trigger" relation="relation42"/>
                <link port="SetVariable.input" relation="relation40"/>
                <link port="Expression5.output" relation="relation21"/>
                <link port="Expression5.mens" relation="relation16"/>
                <link port="Expression6.output" relation="relation17"/>
                <link port="Expression6.index" relation="relation39"/>
                <link port="Expression7.output" relation="relation20"/>
                <link port="Expression7.index" relation="relation44"/>
                <link port="Multiplexor.input" relation="relation31"/>
                <link port="Multiplexor.input" relation="relation33"/>
                <link port="Multiplexor.input" relation="relation32"/>
                <link port="Multiplexor.input" relation="relation34"/>
                <link port="Multiplexor.output" relation="relation28"/>
                <link port="Multiplexor.select" relation="relation30"/>
                <link port="BooleanToAnything.input" relation="relation17"/>
                <link port="BooleanToAnything.output" relation="relation22"/>
                <link port="BooleanToAnything2.input" relation="relation20"/>
                <link port="BooleanToAnything2.output" relation="relation23"/>
                <link port="BooleanToAnything3.input" relation="relation21"/>
                <link port="BooleanToAnything3.output" relation="relation24"/>
                <link port="AddSubtract.plus" relation="relation22"/>
                <link port="AddSubtract.plus" relation="relation23"/>
                <link port="AddSubtract.minus" relation="relation24"/>
                <link port="AddSubtract.output" relation="relation30"/>
                <link port="ArrayAppend2.input" relation="relation26"/>
                <link port="ArrayAppend2.input" relation="relation28"/>
                <link port="ArrayAppend2.output" relation="relation29"/>
                <link port="SetVariable2.input" relation="relation27"/>
                <link port="BooleanSwitch.input" relation="relation29"/>
                <link port="BooleanSwitch.control" relation="relation25"/>
                <link port="BooleanSwitch.trueOutput" relation="relation27"/>
                <link port="Expression8.output" relation="relation25"/>
                <link port="Expression8.sum" relation="relation30"/>
                <link port="Expression9.output" relation="relation31"/>
                <link port="Expression9.Msg" relation="relation36"/>
                <link port="Expression13.output" relation="relation32"/>
                <link port="Expression13.Msg" relation="relation36"/>
                <link port="Expression14.output" relation="relation34"/>
                <link port="Expression14.Msg" relation="relation36"/>
                <link port="Expression10.output" relation="relation33"/>
                <link port="Expression10.Msg" relation="relation36"/>
                <link port="Const4.output" relation="relation37"/>
                <link port="Const4.trigger" relation="relation9"/>
                <link port="ArraySum2.input" relation="relation18"/>
                <link port="ArraySum2.output" relation="relation39"/>
                <link port="ArraySum3.input" relation="relation19"/>
                <link port="ArraySum3.output" relation="relation44"/>
                <link port="BooleanSwitch2.input" relation="relation14"/>
                <link port="BooleanSwitch2.control" relation="relation5"/>
                <link port="BooleanSwitch2.falseOutput" relation="relation40"/>
                <link port="PoissonClock.output" relation="relation42"/>
                <link port="Expression11.output" relation="relation45"/>
                <link port="Expression11.mens" relation="relation35"/>
                <link port="Expression11.table" relation="relation38"/>
                <link port="BooleanSwitch3.input" relation="relation9"/>
                <link port="BooleanSwitch3.control" relation="relation45"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation43"/>
                <link port="MonitorValue.input" relation="relation38"/>
                <link port="MonitorValue2.input" relation="relation45"/>
                <link port="MonitorValue3.input" relation="relation7"/>
                <link port="ArrayElement2.input" relation="relation26"/>
                <link port="ArrayElement2.output" relation="relation38"/>
                <link port="ArrayElement2.index" relation="relation44"/>
                <link relation1="relation" relation2="relation26"/>
                <link relation1="relation3" relation2="relation8"/>
                <link relation1="relation3" relation2="relation16"/>
                <link relation1="relation6" relation2="relation8"/>
                <link relation1="relation6" relation2="relation7"/>
                <link relation1="relation8" relation2="relation41"/>
                <link relation1="relation16" relation2="relation35"/>
                <link relation1="relation35" relation2="relation36"/>
            </entity>
            <entity name="GoodREP" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 50.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 45.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1031.75, 670.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[896.75, 460.0]">
                    </property>
                </port>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[586.75, 285.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[166.75, 350.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[636.75, 140.0]">
                    </property>
                </entity>
                <entity name="ArrayRemoveElement" class="ptolemy.actor.lib.ArrayRemoveElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[811.75, 150.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{IdReq=msg.Data.IdReq, Responder=msg.Data.Responder, Requester=msg.Data.Requester}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[476.75, 200.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[926.75, 150.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[846.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Responder, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[486.75, 350.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[951.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(NodeId==msg.Data.Requester)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[426.75, 580.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[786.75, 450.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester, Lifetime=mens.Data.Lifetime-10, IdReq=mens.Data.IdReq, NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[506.75, 450.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[406.75, 670.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 350.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[246.75, 350.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation11"/>
                <link port="Comm" relation="relation9"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation5"/>
                <link port="Const.output" relation="relation5"/>
                <link port="Const.trigger" relation="relation12"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation5"/>
                <link port="ArrayRemoveElement.array" relation="relation"/>
                <link port="ArrayRemoveElement.output" relation="relation4"/>
                <link port="ArrayRemoveElement.element" relation="relation3"/>
                <link port="Expression.output" relation="relation3"/>
                <link port="Expression.msg" relation="relation5"/>
                <link port="SetVariable.input" relation="relation4"/>
                <link port="ArrayAppend.input" relation="relation2"/>
                <link port="ArrayAppend.input" relation="relation6"/>
                <link port="ArrayAppend.output" relation="relation7"/>
                <link port="Expression2.output" relation="relation6"/>
                <link port="Expression2.Msg" relation="relation5"/>
                <link port="SetVariable2.input" relation="relation7"/>
                <link port="Expression3.output" relation="relation8"/>
                <link port="Expression3.msg" relation="relation5"/>
                <link port="BooleanSwitch.input" relation="relation10"/>
                <link port="BooleanSwitch.control" relation="relation8"/>
                <link port="BooleanSwitch.falseOutput" relation="relation9"/>
                <link port="Expression4.output" relation="relation10"/>
                <link port="Expression4.mens" relation="relation5"/>
                <link port="Const4.output" relation="relation11"/>
                <link port="Const4.trigger" relation="relation5"/>
                <link port="PoissonClock.output" relation="relation12"/>
            </entity>
            <entity name="ini" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-585.0, -15.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, -5.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 400.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 35.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-245.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-260.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable3" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 0, Lifetime = 0, NoH = 0, Requester = 0, Responder =0, SeqN = 0}, Sender = 0, Type = &quot; &quot;}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-210.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-310.0, 400.0]">
                    </property>
                </entity>
                <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
                    <property name="time" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-590.0, 275.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 275.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-410.0, 275.0]">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation4"/>
                <link port="SetVariable.input" relation="relation3"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation6"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation6"/>
                <link port="SetVariable2.input" relation="relation"/>
                <link port="SetVariable3.input" relation="relation2"/>
                <link port="Const4.output" relation="relation3"/>
                <link port="Const4.trigger" relation="relation6"/>
                <link port="Const5.output" relation="relation4"/>
                <link port="Const5.trigger" relation="relation6"/>
                <link port="SingleEvent.output" relation="relation6"/>
                <link port="Const.trigger" relation="relation6"/>
            </entity>
            <relation name="CommInRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="NextStateRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="CommRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <link port="CommIn" relation="CommInRelation"/>
            <link port="NextState" relation="NextStateRelation"/>
            <link port="Comm" relation="CommRelation"/>
            <link port="_Controller.CommIn" relation="CommInRelation"/>
            <link port="_Controller.NextState" relation="NextStateRelation"/>
            <link port="_Controller.Comm" relation="CommRelation"/>
            <link port="Free.CommIn" relation="CommInRelation"/>
            <link port="Free.NextState" relation="NextStateRelation"/>
            <link port="Free.Comm" relation="CommRelation"/>
            <link port="RepetedREQ.CommIn" relation="CommInRelation"/>
            <link port="RepetedREQ.NextState" relation="NextStateRelation"/>
            <link port="RepetedREQ.Comm" relation="CommRelation"/>
            <link port="NewREQ.CommIn" relation="CommInRelation"/>
            <link port="NewREQ.NextState" relation="NextStateRelation"/>
            <link port="NewREQ.Comm" relation="CommRelation"/>
            <link port="GoodREP.CommIn" relation="CommInRelation"/>
            <link port="GoodREP.NextState" relation="NextStateRelation"/>
            <link port="GoodREP.Comm" relation="CommRelation"/>
            <link port="ini.CommIn" relation="CommInRelation"/>
            <link port="ini.NextState" relation="NextStateRelation"/>
            <link port="ini.Comm" relation="CommRelation"/>
        </entity>
        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1495.0, -570.0]">
            </property>
        </entity>
        <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1320.0, -650.0]">
            </property>
        </entity>
        <entity name="Display" class="ptolemy.actor.lib.gui.Display">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={161, 343, 128, 320}, maximized=false}">
            </property>
            <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[128, 276]">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1360.0, -840.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="SeqN">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1295, -705}">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="i+1">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1235.0, -705.0]">
            </property>
            <port name="i" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="SeqN">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1155.0, -705.0]">
            </property>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1465.0, -745.0]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1605.0, -700.0]">
            </vertex>
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <link port="CommOut" relation="relation2"/>
        <link port="ComIn" relation="relation3"/>
        <link port="ModalModel.CommIn" relation="relation3"/>
        <link port="ModalModel.NextState" relation="relation"/>
        <link port="ModalModel.Comm" relation="relation2"/>
        <link port="MonitorValue.input" relation="relation3"/>
        <link port="MonitorValue2.input" relation="relation2"/>
        <link port="Display.input" relation="relation"/>
        <link port="Const.output" relation="relation4"/>
        <link port="Const.trigger" relation="relation2"/>
        <link port="Expression.output" relation="relation5"/>
        <link port="Expression.i" relation="relation4"/>
        <link port="SetVariable.input" relation="relation5"/>
    </entity>
    <entity name="WirelessComposite3" class="ptolemy.domains.wireless.kernel.WirelessComposite">
        <property name="DEDirector" class="ptolemy.domains.de.kernel.DEDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1710.0, -1070.0]">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[805.0, 555.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 0, 1278, 993}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 883]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0883901003088">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-1274.6640625, -692.0893770578552}">
        </property>
        <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 10, Lifetime = 90, NoH = 2, Requester = 12, Responder = 6, SeqN = 59}, Sender = 5, Type = &quot;RREP&quot;}">
        </property>
        <property name="NodeId" class="ptolemy.data.expr.Parameter" value="4">
        </property>
        <property name="SeqN" class="ptolemy.data.expr.Parameter" value="67">
        </property>
        <property name="inrange" class="ptolemy.data.expr.Parameter" value="200.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1425.0, -900.0]">
            </property>
        </property>
        <property name="Table" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}, {Dest = 12, Next = 3, NoH = 7, SeqN = 1}, {Dest = 3, Next = 3, NoH = 1, SeqN = 1}, {Dest = 27, Next = 27, NoH = 1, SeqN = 1}, {Dest = 6, Next = 6, NoH = 1, SeqN = 59}}">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1725.0, -970.0]">
            </property>
        </property>
        <property name="ActiveREQ" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
        </property>
        <port name="CommOut" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="output"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1140.0, -745.0]">
            </property>
        </port>
        <port name="ComIn" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="input"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1730.0, -700.0]">
            </property>
        </port>
        <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="conservativeAnalysis" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1525.0, -785.0}">
            </property>
            <port name="CommIn" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="NextState" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <port name="Comm" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 16, 1278, 991}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 879]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7814556033232">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{527.4925377411147, 614.330838714486}">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1105.0, 715.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1110.0, 785.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="NewREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="NewREQ">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, 760.0]">
                    </property>
                </entity>
                <entity name="Free" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Free">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{385.0, 540.0}">
                    </property>
                </entity>
                <entity name="GoodREP" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="GoodREP">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[255.0, 100.0]">
                    </property>
                </entity>
                <entity name="RepetedREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="RepetedREQ">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 535.0]">
                    </property>
                </entity>
                <entity name="ini" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ini">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 1140.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==3 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.331264840408476">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.606970218174628">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.41757594685401783">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==2 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3187945223103927">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.8303876318932162">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==1 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.8264783144694349">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==0 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.131114565077624">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState == 0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.4634021104919674">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <link port="NewREQ.incomingPort" relation="relation3"/>
                <link port="NewREQ.outgoingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation2"/>
                <link port="Free.incomingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation6"/>
                <link port="Free.incomingPort" relation="relation7"/>
                <link port="Free.outgoingPort" relation="relation"/>
                <link port="Free.outgoingPort" relation="relation3"/>
                <link port="Free.outgoingPort" relation="relation5"/>
                <link port="GoodREP.incomingPort" relation="relation"/>
                <link port="GoodREP.outgoingPort" relation="relation2"/>
                <link port="RepetedREQ.incomingPort" relation="relation5"/>
                <link port="RepetedREQ.outgoingPort" relation="relation6"/>
                <link port="ini.outgoingPort" relation="relation7"/>
            </entity>
            <entity name="Free" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-285.0, 10.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 1, 1288, 1001}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.8490603363007">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{287.3750000000001, 506.9633183830382}">
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Next_State == 1 --&gt; RepetedREQ (Recibe RREQ y SI esta en ActiveREQ)&#10;Next_State == 2 --&gt; NewREQ (Recibe RREQ y NO esta en AvtiveREQ)&#10;Next_State == 3 --&gt; GoodREP (Recibe RREP y SI esta en ActiveREQ)&#10;Next_State == 4 --&gt; No hay cambio de estado (se descarta un RREP no valido)&#10;&#10;El resto de valores no son posibles">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, -20.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-320.0, 120.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 130.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, 325.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-30.0, 120.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 345.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot;)? 0:2">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 270.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayContains" class="ptolemy.actor.lib.ArrayContains">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[535.0, 355.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Responder=msg.Data.Responder, Requester=msg.Data.Requester, IdReq=msg.Data.IdReq}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 425.0]">
                    </property>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot; || msg.Type==&quot;RREP&quot; )? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 195.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="EventFilter" class="ptolemy.domains.de.lib.EventFilter">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 300.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="falseValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{610.0, 355.0}">
                    </property>
                </entity>
                <entity name="Merge" class="ptolemy.domains.de.lib.Merge">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[765.0, 170.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[250.0, 155.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 165.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-135.0, 510.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a+b">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 280.0]">
                    </property>
                    <port name="a" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="b" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[370.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-250.0, 120.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[35.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-180.0, 235.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[20.0, 155.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[495.0, 425.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="CommIn" relation="relation5"/>
                <link port="NextState" relation="relation3"/>
                <link port="SetVariable.input" relation="relation5"/>
                <link port="SetVariable.output" relation="relation9"/>
                <link port="Const2.output" relation="relation4"/>
                <link port="Const2.trigger" relation="relation14"/>
                <link port="Expression2.output" relation="relation2"/>
                <link port="Expression2.msg" relation="relation9"/>
                <link port="Expression2.enab" relation="relation14"/>
                <link port="ArrayContains.array" relation="relation4"/>
                <link port="ArrayContains.output" relation="relation8"/>
                <link port="ArrayContains.element" relation="relation13"/>
                <link port="Expression3.output" relation="relation13"/>
                <link port="Expression3.enab" relation="relation14"/>
                <link port="Expression3.msg" relation="relation9"/>
                <link port="Expression.output" relation="relation7"/>
                <link port="Expression.msg" relation="relation9"/>
                <link port="EventFilter.input" relation="relation7"/>
                <link port="EventFilter.output" relation="relation14"/>
                <link port="BooleanToAnything.input" relation="relation8"/>
                <link port="BooleanToAnything.output" relation="relation"/>
                <link port="Merge.input" relation="relation12"/>
                <link port="Merge.input" relation="relation6"/>
                <link port="Merge.output" relation="relation3"/>
                <link port="BooleanSwitch.input" relation="relation9"/>
                <link port="BooleanSwitch.control" relation="relation7"/>
                <link port="BooleanSwitch.falseOutput" relation="relation11"/>
                <link port="Const.output" relation="relation12"/>
                <link port="Const.trigger" relation="relation11"/>
                <link port="MonitorValue.input" relation="relation5"/>
                <link port="Expression4.output" relation="relation6"/>
                <link port="Expression4.a" relation="relation2"/>
                <link port="Expression4.b" relation="relation"/>
            </entity>
            <entity name="RepetedREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="allowDisconnectedGraphs" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-385.0, 95.0]">
                    </property>
                </property>
                <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {NoH = 2, SeqN = 2, Responder = 10, Requester = 25, IdReq = 1, Lifetime = 0}, Sender = 27, Type = &quot;RREQ&quot;}">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={-4, -4, 1288, 1004}, maximized=true}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7266570727165">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{276.8124999999999, 660.2064888164025}">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 520.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 480.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 340.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-205.0, 340.0}">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1001}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 445.5}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 400.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[235.0, 360.0]">
                            </vertex>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="elem" relation="relation3"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-195.0, 515.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-410.0, 340.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(exist&gt;=1)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 340.0]">
                    </property>
                    <port name="exist" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 480.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 290.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 220.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 230.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 210.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 235.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[800.0, 220.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-335.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[120.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[605.0, 290.0]">
                    </vertex>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[180.0, 210.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation5"/>
                <link port="ArraySum.input" relation="relation3"/>
                <link port="ArraySum.output" relation="relation4"/>
                <link port="IterateOverArray.RouteTable" relation="relation"/>
                <link port="IterateOverArray.elem" relation="relation3"/>
                <link port="MonitorValue.input" relation="relation"/>
                <link port="Const.output" relation="relation"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.exist" relation="relation4"/>
                <link port="Const2.output" relation="relation5"/>
                <link port="Const2.trigger" relation="relation2"/>
                <link port="Expression2.output" relation="relation7"/>
                <link port="Expression2.Msg" relation="relation12"/>
                <link port="ArrayAppend.input" relation="relation8"/>
                <link port="ArrayAppend.input" relation="relation7"/>
                <link port="ArrayAppend.output" relation="relation11"/>
                <link port="SetVariable.input" relation="relation6"/>
                <link port="Const4.output" relation="relation8"/>
                <link port="Const4.trigger" relation="relation12"/>
                <link port="MonitorValue2.input" relation="relation2"/>
                <link port="Const5.output" relation="relation12"/>
                <link port="BooleanSwitch3.input" relation="relation11"/>
                <link port="BooleanSwitch3.control" relation="relation2"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation6"/>
            </entity>
            <entity name="NewREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7026850032744">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{381.4999999999999, 468.2564072693384}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-325.0, -135.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-345.0, -75.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, -45.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1055.0, 105.0]">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 250.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Responder==NodeId)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 125.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=NodeId, Requester=mens.Data.Requester, Lifetime=100, IdReq=mens.Data.IdReq, NoH=1, SeqN=SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[390.0, 40.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(table.Dest!=0)? {Sender=NodeId, Type=&quot;RREP&quot;, Data={Requester=mens.Data.Requester, Responder=table.Dest,Lifetime=100,IdReq=mens.Data.IdReq,SeqN=table.SeqN,NoH=table.NoH+1}}:{Sender=NodeId, Type=&quot;RREQ&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester,Lifetime=0,IdReq=mens.Data.IdReq,NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 85.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayElement" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 40.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 205.0]">
                    </property>
                </entity>
                <entity name="BooleanMultiplexor" class="ptolemy.actor.lib.BooleanMultiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 85.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray2" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-140.0, 260.0]">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 265.0]">
                            </property>
                        </port>
                        <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="{665.0, 325.0}">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Responder)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 265.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Requester)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 325.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[575.0, 425.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[240.0, 360.0]">
                            </vertex>
                        </relation>
                        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="Responder" relation="relation3"/>
                        <link port="Sender" relation="relation5"/>
                        <link port="Requester" relation="relation4"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="Expression.output" relation="relation5"/>
                        <link port="Expression.RouteTable" relation="relation"/>
                        <link port="Expression.m" relation="relation2"/>
                        <link port="Expression3.output" relation="relation4"/>
                        <link port="Expression3.RouteTable" relation="relation"/>
                        <link port="Expression3.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{IdReq=Msg.Data.IdReq, Requester=Msg.Data.Requester, Responder=Msg.Data.Responder}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, -40.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, -95.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-110.0, -100.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0, -85.0]">
                    </property>
                </entity>
                <entity name="Expression5" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Requester==mens.Sender)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 585.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression6" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 450.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression7" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[170.0, 515.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Multiplexor" class="ptolemy.actor.lib.Multiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{820.0, 515.0}">
                    </property>
                    <property name="_flipPortsVertical" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 450.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything2" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything3" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 585.0]">
                    </property>
                </entity>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 525.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend2" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[925.0, 400.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 465.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1015.0, 475.0]">
                    </property>
                </entity>
                <entity name="Expression8" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(sum&gt;0)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[890.0, 630.0]">
                    </property>
                    <port name="sum" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression9" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=0, Dest=0, Next=0, SeqN=0}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 615.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression13" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[490.0, 695.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression14" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN},{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression10" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 655.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[865.0, -45.0]">
                    </property>
                </entity>
                <entity name="ArraySum2" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 450.0]">
                    </property>
                </entity>
                <entity name="ArraySum3" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch2" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[620.0, -95.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-530.0, 115.0]">
                    </property>
                </entity>
                <entity name="Expression11" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="((table.Dest!=0)&amp;&amp;(table.SeqN&gt;= mens.Data.SeqN))?true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 870.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[985.0, 95.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 960.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 290.0]">
                    </property>
                </entity>
                <entity name="MonitorValue3" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 1005.0]">
                    </property>
                </entity>
                <entity name="ArrayElement2" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 805.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 205.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[195.0, 215.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[610.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 75.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[845.0, 85.0]">
                    </vertex>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[80.0, 250.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[410.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation15" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation16" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 585.0]">
                    </vertex>
                </relation>
                <relation name="relation18" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-45.0, 450.0]">
                    </vertex>
                </relation>
                <relation name="relation19" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-60.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation17" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation20" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation21" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation22" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation23" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation24" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation26" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation28" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation29" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation27" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation30" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[765.0, 525.0]">
                    </vertex>
                </relation>
                <relation name="relation25" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation31" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation33" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation32" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation34" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation35" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation36" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation37" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation39" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation41" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation40" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation42" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{-450.0, 115.0}">
                    </vertex>
                </relation>
                <relation name="relation43" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation45" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{1050.0, 195.0}">
                    </vertex>
                </relation>
                <relation name="relation44" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[65.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation38" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{365.0, 815.0}">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation37"/>
                <link port="Comm" relation="relation43"/>
                <link port="ArraySum.input" relation="relation4"/>
                <link port="ArraySum.output" relation="relation10"/>
                <link port="Expression.output" relation="relation5"/>
                <link port="Expression.mens" relation="relation7"/>
                <link port="Expression2.output" relation="relation11"/>
                <link port="Expression2.mens" relation="relation8"/>
                <link port="Expression3.output" relation="relation12"/>
                <link port="Expression3.mens" relation="relation6"/>
                <link port="Expression3.table" relation="relation2"/>
                <link port="ArrayElement.input" relation="relation"/>
                <link port="ArrayElement.output" relation="relation2"/>
                <link port="ArrayElement.index" relation="relation10"/>
                <link port="Const.output" relation="relation3"/>
                <link port="Const.trigger" relation="relation42"/>
                <link port="Const2.output" relation="relation"/>
                <link port="Const2.trigger" relation="relation42"/>
                <link port="BooleanMultiplexor.trueInput" relation="relation11"/>
                <link port="BooleanMultiplexor.falseInput" relation="relation12"/>
                <link port="BooleanMultiplexor.select" relation="relation5"/>
                <link port="BooleanMultiplexor.output" relation="relation9"/>
                <link port="IterateOverArray2.RouteTable" relation="relation"/>
                <link port="IterateOverArray2.Responder" relation="relation4"/>
                <link port="IterateOverArray2.Sender" relation="relation18"/>
                <link port="IterateOverArray2.Requester" relation="relation19"/>
                <link port="Expression4.output" relation="relation13"/>
                <link port="Expression4.Msg" relation="relation41"/>
                <link port="ArrayAppend.input" relation="relation15"/>
                <link port="ArrayAppend.input" relation="relation13"/>
                <link port="ArrayAppend.output" relation="relation14"/>
                <link port="Const3.output" relation="relation15"/>
                <link port="Const3.trigger" relation="relation42"/>
                <link port="SetVariable.input" relation="relation40"/>
                <link port="Expression5.output" relation="relation21"/>
                <link port="Expression5.mens" relation="relation16"/>
                <link port="Expression6.output" relation="relation17"/>
                <link port="Expression6.index" relation="relation39"/>
                <link port="Expression7.output" relation="relation20"/>
                <link port="Expression7.index" relation="relation44"/>
                <link port="Multiplexor.input" relation="relation31"/>
                <link port="Multiplexor.input" relation="relation33"/>
                <link port="Multiplexor.input" relation="relation32"/>
                <link port="Multiplexor.input" relation="relation34"/>
                <link port="Multiplexor.output" relation="relation28"/>
                <link port="Multiplexor.select" relation="relation30"/>
                <link port="BooleanToAnything.input" relation="relation17"/>
                <link port="BooleanToAnything.output" relation="relation22"/>
                <link port="BooleanToAnything2.input" relation="relation20"/>
                <link port="BooleanToAnything2.output" relation="relation23"/>
                <link port="BooleanToAnything3.input" relation="relation21"/>
                <link port="BooleanToAnything3.output" relation="relation24"/>
                <link port="AddSubtract.plus" relation="relation22"/>
                <link port="AddSubtract.plus" relation="relation23"/>
                <link port="AddSubtract.minus" relation="relation24"/>
                <link port="AddSubtract.output" relation="relation30"/>
                <link port="ArrayAppend2.input" relation="relation26"/>
                <link port="ArrayAppend2.input" relation="relation28"/>
                <link port="ArrayAppend2.output" relation="relation29"/>
                <link port="SetVariable2.input" relation="relation27"/>
                <link port="BooleanSwitch.input" relation="relation29"/>
                <link port="BooleanSwitch.control" relation="relation25"/>
                <link port="BooleanSwitch.trueOutput" relation="relation27"/>
                <link port="Expression8.output" relation="relation25"/>
                <link port="Expression8.sum" relation="relation30"/>
                <link port="Expression9.output" relation="relation31"/>
                <link port="Expression9.Msg" relation="relation36"/>
                <link port="Expression13.output" relation="relation32"/>
                <link port="Expression13.Msg" relation="relation36"/>
                <link port="Expression14.output" relation="relation34"/>
                <link port="Expression14.Msg" relation="relation36"/>
                <link port="Expression10.output" relation="relation33"/>
                <link port="Expression10.Msg" relation="relation36"/>
                <link port="Const4.output" relation="relation37"/>
                <link port="Const4.trigger" relation="relation9"/>
                <link port="ArraySum2.input" relation="relation18"/>
                <link port="ArraySum2.output" relation="relation39"/>
                <link port="ArraySum3.input" relation="relation19"/>
                <link port="ArraySum3.output" relation="relation44"/>
                <link port="BooleanSwitch2.input" relation="relation14"/>
                <link port="BooleanSwitch2.control" relation="relation5"/>
                <link port="BooleanSwitch2.falseOutput" relation="relation40"/>
                <link port="PoissonClock.output" relation="relation42"/>
                <link port="Expression11.output" relation="relation45"/>
                <link port="Expression11.mens" relation="relation35"/>
                <link port="Expression11.table" relation="relation38"/>
                <link port="BooleanSwitch3.input" relation="relation9"/>
                <link port="BooleanSwitch3.control" relation="relation45"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation43"/>
                <link port="MonitorValue.input" relation="relation38"/>
                <link port="MonitorValue2.input" relation="relation45"/>
                <link port="MonitorValue3.input" relation="relation7"/>
                <link port="ArrayElement2.input" relation="relation26"/>
                <link port="ArrayElement2.output" relation="relation38"/>
                <link port="ArrayElement2.index" relation="relation44"/>
                <link relation1="relation" relation2="relation26"/>
                <link relation1="relation3" relation2="relation8"/>
                <link relation1="relation3" relation2="relation16"/>
                <link relation1="relation6" relation2="relation8"/>
                <link relation1="relation6" relation2="relation7"/>
                <link relation1="relation8" relation2="relation41"/>
                <link relation1="relation16" relation2="relation35"/>
                <link relation1="relation35" relation2="relation36"/>
            </entity>
            <entity name="GoodREP" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 50.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 45.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1031.75, 670.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[896.75, 460.0]">
                    </property>
                </port>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[586.75, 285.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[166.75, 350.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[636.75, 140.0]">
                    </property>
                </entity>
                <entity name="ArrayRemoveElement" class="ptolemy.actor.lib.ArrayRemoveElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[811.75, 150.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{IdReq=msg.Data.IdReq, Responder=msg.Data.Responder, Requester=msg.Data.Requester}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[476.75, 200.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[926.75, 150.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[846.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Responder, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[486.75, 350.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[951.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(NodeId==msg.Data.Requester)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[426.75, 580.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[786.75, 450.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester, Lifetime=mens.Data.Lifetime-10, IdReq=mens.Data.IdReq, NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[506.75, 450.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[406.75, 670.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 350.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[246.75, 350.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation11"/>
                <link port="Comm" relation="relation9"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation5"/>
                <link port="Const.output" relation="relation5"/>
                <link port="Const.trigger" relation="relation12"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation5"/>
                <link port="ArrayRemoveElement.array" relation="relation"/>
                <link port="ArrayRemoveElement.output" relation="relation4"/>
                <link port="ArrayRemoveElement.element" relation="relation3"/>
                <link port="Expression.output" relation="relation3"/>
                <link port="Expression.msg" relation="relation5"/>
                <link port="SetVariable.input" relation="relation4"/>
                <link port="ArrayAppend.input" relation="relation2"/>
                <link port="ArrayAppend.input" relation="relation6"/>
                <link port="ArrayAppend.output" relation="relation7"/>
                <link port="Expression2.output" relation="relation6"/>
                <link port="Expression2.Msg" relation="relation5"/>
                <link port="SetVariable2.input" relation="relation7"/>
                <link port="Expression3.output" relation="relation8"/>
                <link port="Expression3.msg" relation="relation5"/>
                <link port="BooleanSwitch.input" relation="relation10"/>
                <link port="BooleanSwitch.control" relation="relation8"/>
                <link port="BooleanSwitch.falseOutput" relation="relation9"/>
                <link port="Expression4.output" relation="relation10"/>
                <link port="Expression4.mens" relation="relation5"/>
                <link port="Const4.output" relation="relation11"/>
                <link port="Const4.trigger" relation="relation5"/>
                <link port="PoissonClock.output" relation="relation12"/>
            </entity>
            <entity name="ini" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-585.0, -15.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, -5.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 400.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 35.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-245.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-260.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable3" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 0, Lifetime = 0, NoH = 0, Requester = 0, Responder =0, SeqN = 0}, Sender = 0, Type = &quot; &quot;}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-210.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-310.0, 400.0]">
                    </property>
                </entity>
                <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
                    <property name="time" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-590.0, 275.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 275.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-410.0, 275.0]">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation4"/>
                <link port="SetVariable.input" relation="relation3"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation6"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation6"/>
                <link port="SetVariable2.input" relation="relation"/>
                <link port="SetVariable3.input" relation="relation2"/>
                <link port="Const4.output" relation="relation3"/>
                <link port="Const4.trigger" relation="relation6"/>
                <link port="Const5.output" relation="relation4"/>
                <link port="Const5.trigger" relation="relation6"/>
                <link port="SingleEvent.output" relation="relation6"/>
                <link port="Const.trigger" relation="relation6"/>
            </entity>
            <relation name="CommInRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="NextStateRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="CommRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <link port="CommIn" relation="CommInRelation"/>
            <link port="NextState" relation="NextStateRelation"/>
            <link port="Comm" relation="CommRelation"/>
            <link port="_Controller.CommIn" relation="CommInRelation"/>
            <link port="_Controller.NextState" relation="NextStateRelation"/>
            <link port="_Controller.Comm" relation="CommRelation"/>
            <link port="Free.CommIn" relation="CommInRelation"/>
            <link port="Free.NextState" relation="NextStateRelation"/>
            <link port="Free.Comm" relation="CommRelation"/>
            <link port="RepetedREQ.CommIn" relation="CommInRelation"/>
            <link port="RepetedREQ.NextState" relation="NextStateRelation"/>
            <link port="RepetedREQ.Comm" relation="CommRelation"/>
            <link port="NewREQ.CommIn" relation="CommInRelation"/>
            <link port="NewREQ.NextState" relation="NextStateRelation"/>
            <link port="NewREQ.Comm" relation="CommRelation"/>
            <link port="GoodREP.CommIn" relation="CommInRelation"/>
            <link port="GoodREP.NextState" relation="NextStateRelation"/>
            <link port="GoodREP.Comm" relation="CommRelation"/>
            <link port="ini.CommIn" relation="CommInRelation"/>
            <link port="ini.NextState" relation="NextStateRelation"/>
            <link port="ini.Comm" relation="CommRelation"/>
        </entity>
        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1495.0, -570.0]">
            </property>
        </entity>
        <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1320.0, -650.0]">
            </property>
        </entity>
        <entity name="Display" class="ptolemy.actor.lib.gui.Display">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={634, 340, 128, 332}, maximized=false}">
            </property>
            <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[128, 288]">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1360.0, -840.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="SeqN">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1295, -705}">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="i+1">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1235.0, -705.0]">
            </property>
            <port name="i" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="SeqN">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1155.0, -705.0]">
            </property>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1465.0, -745.0]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1605.0, -700.0]">
            </vertex>
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <link port="CommOut" relation="relation2"/>
        <link port="ComIn" relation="relation3"/>
        <link port="ModalModel.CommIn" relation="relation3"/>
        <link port="ModalModel.NextState" relation="relation"/>
        <link port="ModalModel.Comm" relation="relation2"/>
        <link port="MonitorValue.input" relation="relation3"/>
        <link port="MonitorValue2.input" relation="relation2"/>
        <link port="Display.input" relation="relation"/>
        <link port="Const.output" relation="relation4"/>
        <link port="Const.trigger" relation="relation2"/>
        <link port="Expression.output" relation="relation5"/>
        <link port="Expression.i" relation="relation4"/>
        <link port="SetVariable.input" relation="relation5"/>
    </entity>
    <entity name="WirelessComposite4" class="ptolemy.domains.wireless.kernel.WirelessComposite">
        <property name="DEDirector" class="ptolemy.domains.de.kernel.DEDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1710.0, -1070.0]">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[900.0, 480.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 0, 1278, 993}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 883]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0883901003088">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-1274.6640625, -692.0893770578552}">
        </property>
        <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 10, Lifetime = 90, NoH = 2, Requester = 12, Responder = 6, SeqN = 59}, Sender = 4, Type = &quot;RREP&quot;}">
        </property>
        <property name="NodeId" class="ptolemy.data.expr.Parameter" value="5">
        </property>
        <property name="SeqN" class="ptolemy.data.expr.Parameter" value="67">
        </property>
        <property name="inrange" class="ptolemy.data.expr.Parameter" value="200.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1425.0, -900.0]">
            </property>
        </property>
        <property name="Table" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}, {Dest = 12, Next = 3, NoH = 7, SeqN = 1}, {Dest = 3, Next = 3, NoH = 1, SeqN = 1}, {Dest = 27, Next = 27, NoH = 1, SeqN = 1}, {Dest = 6, Next = 6, NoH = 1, SeqN = 59}}">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1725.0, -970.0]">
            </property>
        </property>
        <property name="ActiveREQ" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
        </property>
        <port name="CommOut" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="output"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1140.0, -745.0]">
            </property>
        </port>
        <port name="ComIn" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="input"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1730.0, -700.0]">
            </property>
        </port>
        <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="conservativeAnalysis" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1525.0, -785.0}">
            </property>
            <port name="CommIn" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="NextState" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <port name="Comm" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 16, 1278, 991}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 879]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7814556033232">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{527.4925377411147, 614.330838714486}">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1105.0, 715.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1110.0, 785.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="NewREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="NewREQ">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, 760.0]">
                    </property>
                </entity>
                <entity name="Free" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Free">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{385.0, 540.0}">
                    </property>
                </entity>
                <entity name="GoodREP" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="GoodREP">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[255.0, 100.0]">
                    </property>
                </entity>
                <entity name="RepetedREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="RepetedREQ">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 535.0]">
                    </property>
                </entity>
                <entity name="ini" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ini">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 1140.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==3 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.331264840408476">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.606970218174628">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.41757594685401783">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==2 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3187945223103927">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.8303876318932162">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==1 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.8264783144694349">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==0 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.131114565077624">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState == 0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.4634021104919674">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <link port="NewREQ.incomingPort" relation="relation3"/>
                <link port="NewREQ.outgoingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation2"/>
                <link port="Free.incomingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation6"/>
                <link port="Free.incomingPort" relation="relation7"/>
                <link port="Free.outgoingPort" relation="relation"/>
                <link port="Free.outgoingPort" relation="relation3"/>
                <link port="Free.outgoingPort" relation="relation5"/>
                <link port="GoodREP.incomingPort" relation="relation"/>
                <link port="GoodREP.outgoingPort" relation="relation2"/>
                <link port="RepetedREQ.incomingPort" relation="relation5"/>
                <link port="RepetedREQ.outgoingPort" relation="relation6"/>
                <link port="ini.outgoingPort" relation="relation7"/>
            </entity>
            <entity name="Free" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-285.0, 10.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 1, 1288, 1001}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.8490603363007">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{287.3750000000001, 506.9633183830382}">
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Next_State == 1 --&gt; RepetedREQ (Recibe RREQ y SI esta en ActiveREQ)&#10;Next_State == 2 --&gt; NewREQ (Recibe RREQ y NO esta en AvtiveREQ)&#10;Next_State == 3 --&gt; GoodREP (Recibe RREP y SI esta en ActiveREQ)&#10;Next_State == 4 --&gt; No hay cambio de estado (se descarta un RREP no valido)&#10;&#10;El resto de valores no son posibles">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, -20.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-320.0, 120.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 130.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, 325.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-30.0, 120.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 345.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot;)? 0:2">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 270.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayContains" class="ptolemy.actor.lib.ArrayContains">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[535.0, 355.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Responder=msg.Data.Responder, Requester=msg.Data.Requester, IdReq=msg.Data.IdReq}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 425.0]">
                    </property>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot; || msg.Type==&quot;RREP&quot; )? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 195.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="EventFilter" class="ptolemy.domains.de.lib.EventFilter">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 300.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="falseValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{610.0, 355.0}">
                    </property>
                </entity>
                <entity name="Merge" class="ptolemy.domains.de.lib.Merge">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[765.0, 170.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[250.0, 155.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 165.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-135.0, 510.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a+b">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 280.0]">
                    </property>
                    <port name="a" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="b" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[370.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-250.0, 120.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[35.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-180.0, 235.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[20.0, 155.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[495.0, 425.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="CommIn" relation="relation5"/>
                <link port="NextState" relation="relation3"/>
                <link port="SetVariable.input" relation="relation5"/>
                <link port="SetVariable.output" relation="relation9"/>
                <link port="Const2.output" relation="relation4"/>
                <link port="Const2.trigger" relation="relation14"/>
                <link port="Expression2.output" relation="relation2"/>
                <link port="Expression2.msg" relation="relation9"/>
                <link port="Expression2.enab" relation="relation14"/>
                <link port="ArrayContains.array" relation="relation4"/>
                <link port="ArrayContains.output" relation="relation8"/>
                <link port="ArrayContains.element" relation="relation13"/>
                <link port="Expression3.output" relation="relation13"/>
                <link port="Expression3.enab" relation="relation14"/>
                <link port="Expression3.msg" relation="relation9"/>
                <link port="Expression.output" relation="relation7"/>
                <link port="Expression.msg" relation="relation9"/>
                <link port="EventFilter.input" relation="relation7"/>
                <link port="EventFilter.output" relation="relation14"/>
                <link port="BooleanToAnything.input" relation="relation8"/>
                <link port="BooleanToAnything.output" relation="relation"/>
                <link port="Merge.input" relation="relation12"/>
                <link port="Merge.input" relation="relation6"/>
                <link port="Merge.output" relation="relation3"/>
                <link port="BooleanSwitch.input" relation="relation9"/>
                <link port="BooleanSwitch.control" relation="relation7"/>
                <link port="BooleanSwitch.falseOutput" relation="relation11"/>
                <link port="Const.output" relation="relation12"/>
                <link port="Const.trigger" relation="relation11"/>
                <link port="MonitorValue.input" relation="relation5"/>
                <link port="Expression4.output" relation="relation6"/>
                <link port="Expression4.a" relation="relation2"/>
                <link port="Expression4.b" relation="relation"/>
            </entity>
            <entity name="RepetedREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="allowDisconnectedGraphs" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-385.0, 95.0]">
                    </property>
                </property>
                <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {NoH = 2, SeqN = 2, Responder = 10, Requester = 25, IdReq = 1, Lifetime = 0}, Sender = 27, Type = &quot;RREQ&quot;}">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={-4, -4, 1288, 1004}, maximized=true}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7266570727165">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{276.8124999999999, 660.2064888164025}">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 520.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 480.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 340.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-205.0, 340.0}">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1001}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 445.5}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 400.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[235.0, 360.0]">
                            </vertex>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="elem" relation="relation3"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-195.0, 515.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-410.0, 340.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(exist&gt;=1)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 340.0]">
                    </property>
                    <port name="exist" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 480.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 290.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 220.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 230.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 210.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 235.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[800.0, 220.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-335.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[120.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[605.0, 290.0]">
                    </vertex>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[180.0, 210.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation5"/>
                <link port="ArraySum.input" relation="relation3"/>
                <link port="ArraySum.output" relation="relation4"/>
                <link port="IterateOverArray.RouteTable" relation="relation"/>
                <link port="IterateOverArray.elem" relation="relation3"/>
                <link port="MonitorValue.input" relation="relation"/>
                <link port="Const.output" relation="relation"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.exist" relation="relation4"/>
                <link port="Const2.output" relation="relation5"/>
                <link port="Const2.trigger" relation="relation2"/>
                <link port="Expression2.output" relation="relation7"/>
                <link port="Expression2.Msg" relation="relation12"/>
                <link port="ArrayAppend.input" relation="relation8"/>
                <link port="ArrayAppend.input" relation="relation7"/>
                <link port="ArrayAppend.output" relation="relation11"/>
                <link port="SetVariable.input" relation="relation6"/>
                <link port="Const4.output" relation="relation8"/>
                <link port="Const4.trigger" relation="relation12"/>
                <link port="MonitorValue2.input" relation="relation2"/>
                <link port="Const5.output" relation="relation12"/>
                <link port="BooleanSwitch3.input" relation="relation11"/>
                <link port="BooleanSwitch3.control" relation="relation2"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation6"/>
            </entity>
            <entity name="NewREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7026850032744">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{381.4999999999999, 468.2564072693384}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-325.0, -135.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-345.0, -75.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, -45.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1055.0, 105.0]">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 250.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Responder==NodeId)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 125.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=NodeId, Requester=mens.Data.Requester, Lifetime=100, IdReq=mens.Data.IdReq, NoH=1, SeqN=SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[390.0, 40.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(table.Dest!=0)? {Sender=NodeId, Type=&quot;RREP&quot;, Data={Requester=mens.Data.Requester, Responder=table.Dest,Lifetime=100,IdReq=mens.Data.IdReq,SeqN=table.SeqN,NoH=table.NoH+1}}:{Sender=NodeId, Type=&quot;RREQ&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester,Lifetime=0,IdReq=mens.Data.IdReq,NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 85.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayElement" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 40.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 205.0]">
                    </property>
                </entity>
                <entity name="BooleanMultiplexor" class="ptolemy.actor.lib.BooleanMultiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 85.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray2" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-140.0, 260.0]">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 265.0]">
                            </property>
                        </port>
                        <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="{665.0, 325.0}">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Responder)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 265.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Requester)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 325.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[575.0, 425.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[240.0, 360.0]">
                            </vertex>
                        </relation>
                        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="Responder" relation="relation3"/>
                        <link port="Sender" relation="relation5"/>
                        <link port="Requester" relation="relation4"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="Expression.output" relation="relation5"/>
                        <link port="Expression.RouteTable" relation="relation"/>
                        <link port="Expression.m" relation="relation2"/>
                        <link port="Expression3.output" relation="relation4"/>
                        <link port="Expression3.RouteTable" relation="relation"/>
                        <link port="Expression3.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{IdReq=Msg.Data.IdReq, Requester=Msg.Data.Requester, Responder=Msg.Data.Responder}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, -40.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, -95.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-110.0, -100.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0, -85.0]">
                    </property>
                </entity>
                <entity name="Expression5" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Requester==mens.Sender)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 585.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression6" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 450.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression7" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[170.0, 515.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Multiplexor" class="ptolemy.actor.lib.Multiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{820.0, 515.0}">
                    </property>
                    <property name="_flipPortsVertical" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 450.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything2" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything3" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 585.0]">
                    </property>
                </entity>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 525.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend2" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[925.0, 400.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 465.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1015.0, 475.0]">
                    </property>
                </entity>
                <entity name="Expression8" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(sum&gt;0)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[890.0, 630.0]">
                    </property>
                    <port name="sum" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression9" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=0, Dest=0, Next=0, SeqN=0}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 615.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression13" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[490.0, 695.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression14" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN},{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression10" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 655.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[865.0, -45.0]">
                    </property>
                </entity>
                <entity name="ArraySum2" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 450.0]">
                    </property>
                </entity>
                <entity name="ArraySum3" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch2" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[620.0, -95.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-530.0, 115.0]">
                    </property>
                </entity>
                <entity name="Expression11" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="((table.Dest!=0)&amp;&amp;(table.SeqN&gt;= mens.Data.SeqN))?true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 870.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[985.0, 95.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 960.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 290.0]">
                    </property>
                </entity>
                <entity name="MonitorValue3" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 1005.0]">
                    </property>
                </entity>
                <entity name="ArrayElement2" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 805.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 205.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[195.0, 215.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[610.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 75.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[845.0, 85.0]">
                    </vertex>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[80.0, 250.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[410.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation15" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation16" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 585.0]">
                    </vertex>
                </relation>
                <relation name="relation18" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-45.0, 450.0]">
                    </vertex>
                </relation>
                <relation name="relation19" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-60.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation17" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation20" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation21" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation22" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation23" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation24" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation26" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation28" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation29" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation27" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation30" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[765.0, 525.0]">
                    </vertex>
                </relation>
                <relation name="relation25" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation31" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation33" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation32" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation34" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation35" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation36" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation37" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation39" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation41" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation40" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation42" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{-450.0, 115.0}">
                    </vertex>
                </relation>
                <relation name="relation43" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation45" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{1050.0, 195.0}">
                    </vertex>
                </relation>
                <relation name="relation44" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[65.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation38" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{365.0, 815.0}">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation37"/>
                <link port="Comm" relation="relation43"/>
                <link port="ArraySum.input" relation="relation4"/>
                <link port="ArraySum.output" relation="relation10"/>
                <link port="Expression.output" relation="relation5"/>
                <link port="Expression.mens" relation="relation7"/>
                <link port="Expression2.output" relation="relation11"/>
                <link port="Expression2.mens" relation="relation8"/>
                <link port="Expression3.output" relation="relation12"/>
                <link port="Expression3.mens" relation="relation6"/>
                <link port="Expression3.table" relation="relation2"/>
                <link port="ArrayElement.input" relation="relation"/>
                <link port="ArrayElement.output" relation="relation2"/>
                <link port="ArrayElement.index" relation="relation10"/>
                <link port="Const.output" relation="relation3"/>
                <link port="Const.trigger" relation="relation42"/>
                <link port="Const2.output" relation="relation"/>
                <link port="Const2.trigger" relation="relation42"/>
                <link port="BooleanMultiplexor.trueInput" relation="relation11"/>
                <link port="BooleanMultiplexor.falseInput" relation="relation12"/>
                <link port="BooleanMultiplexor.select" relation="relation5"/>
                <link port="BooleanMultiplexor.output" relation="relation9"/>
                <link port="IterateOverArray2.RouteTable" relation="relation"/>
                <link port="IterateOverArray2.Responder" relation="relation4"/>
                <link port="IterateOverArray2.Sender" relation="relation18"/>
                <link port="IterateOverArray2.Requester" relation="relation19"/>
                <link port="Expression4.output" relation="relation13"/>
                <link port="Expression4.Msg" relation="relation41"/>
                <link port="ArrayAppend.input" relation="relation15"/>
                <link port="ArrayAppend.input" relation="relation13"/>
                <link port="ArrayAppend.output" relation="relation14"/>
                <link port="Const3.output" relation="relation15"/>
                <link port="Const3.trigger" relation="relation42"/>
                <link port="SetVariable.input" relation="relation40"/>
                <link port="Expression5.output" relation="relation21"/>
                <link port="Expression5.mens" relation="relation16"/>
                <link port="Expression6.output" relation="relation17"/>
                <link port="Expression6.index" relation="relation39"/>
                <link port="Expression7.output" relation="relation20"/>
                <link port="Expression7.index" relation="relation44"/>
                <link port="Multiplexor.input" relation="relation31"/>
                <link port="Multiplexor.input" relation="relation33"/>
                <link port="Multiplexor.input" relation="relation32"/>
                <link port="Multiplexor.input" relation="relation34"/>
                <link port="Multiplexor.output" relation="relation28"/>
                <link port="Multiplexor.select" relation="relation30"/>
                <link port="BooleanToAnything.input" relation="relation17"/>
                <link port="BooleanToAnything.output" relation="relation22"/>
                <link port="BooleanToAnything2.input" relation="relation20"/>
                <link port="BooleanToAnything2.output" relation="relation23"/>
                <link port="BooleanToAnything3.input" relation="relation21"/>
                <link port="BooleanToAnything3.output" relation="relation24"/>
                <link port="AddSubtract.plus" relation="relation22"/>
                <link port="AddSubtract.plus" relation="relation23"/>
                <link port="AddSubtract.minus" relation="relation24"/>
                <link port="AddSubtract.output" relation="relation30"/>
                <link port="ArrayAppend2.input" relation="relation26"/>
                <link port="ArrayAppend2.input" relation="relation28"/>
                <link port="ArrayAppend2.output" relation="relation29"/>
                <link port="SetVariable2.input" relation="relation27"/>
                <link port="BooleanSwitch.input" relation="relation29"/>
                <link port="BooleanSwitch.control" relation="relation25"/>
                <link port="BooleanSwitch.trueOutput" relation="relation27"/>
                <link port="Expression8.output" relation="relation25"/>
                <link port="Expression8.sum" relation="relation30"/>
                <link port="Expression9.output" relation="relation31"/>
                <link port="Expression9.Msg" relation="relation36"/>
                <link port="Expression13.output" relation="relation32"/>
                <link port="Expression13.Msg" relation="relation36"/>
                <link port="Expression14.output" relation="relation34"/>
                <link port="Expression14.Msg" relation="relation36"/>
                <link port="Expression10.output" relation="relation33"/>
                <link port="Expression10.Msg" relation="relation36"/>
                <link port="Const4.output" relation="relation37"/>
                <link port="Const4.trigger" relation="relation9"/>
                <link port="ArraySum2.input" relation="relation18"/>
                <link port="ArraySum2.output" relation="relation39"/>
                <link port="ArraySum3.input" relation="relation19"/>
                <link port="ArraySum3.output" relation="relation44"/>
                <link port="BooleanSwitch2.input" relation="relation14"/>
                <link port="BooleanSwitch2.control" relation="relation5"/>
                <link port="BooleanSwitch2.falseOutput" relation="relation40"/>
                <link port="PoissonClock.output" relation="relation42"/>
                <link port="Expression11.output" relation="relation45"/>
                <link port="Expression11.mens" relation="relation35"/>
                <link port="Expression11.table" relation="relation38"/>
                <link port="BooleanSwitch3.input" relation="relation9"/>
                <link port="BooleanSwitch3.control" relation="relation45"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation43"/>
                <link port="MonitorValue.input" relation="relation38"/>
                <link port="MonitorValue2.input" relation="relation45"/>
                <link port="MonitorValue3.input" relation="relation7"/>
                <link port="ArrayElement2.input" relation="relation26"/>
                <link port="ArrayElement2.output" relation="relation38"/>
                <link port="ArrayElement2.index" relation="relation44"/>
                <link relation1="relation" relation2="relation26"/>
                <link relation1="relation3" relation2="relation8"/>
                <link relation1="relation3" relation2="relation16"/>
                <link relation1="relation6" relation2="relation8"/>
                <link relation1="relation6" relation2="relation7"/>
                <link relation1="relation8" relation2="relation41"/>
                <link relation1="relation16" relation2="relation35"/>
                <link relation1="relation35" relation2="relation36"/>
            </entity>
            <entity name="GoodREP" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 50.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 45.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1031.75, 670.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[896.75, 460.0]">
                    </property>
                </port>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[586.75, 285.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[166.75, 350.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[636.75, 140.0]">
                    </property>
                </entity>
                <entity name="ArrayRemoveElement" class="ptolemy.actor.lib.ArrayRemoveElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[811.75, 150.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{IdReq=msg.Data.IdReq, Responder=msg.Data.Responder, Requester=msg.Data.Requester}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[476.75, 200.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[926.75, 150.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[846.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Responder, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[486.75, 350.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[951.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(NodeId==msg.Data.Requester)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[426.75, 580.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[786.75, 450.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester, Lifetime=mens.Data.Lifetime-10, IdReq=mens.Data.IdReq, NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[506.75, 450.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[406.75, 670.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 350.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[246.75, 350.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation11"/>
                <link port="Comm" relation="relation9"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation5"/>
                <link port="Const.output" relation="relation5"/>
                <link port="Const.trigger" relation="relation12"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation5"/>
                <link port="ArrayRemoveElement.array" relation="relation"/>
                <link port="ArrayRemoveElement.output" relation="relation4"/>
                <link port="ArrayRemoveElement.element" relation="relation3"/>
                <link port="Expression.output" relation="relation3"/>
                <link port="Expression.msg" relation="relation5"/>
                <link port="SetVariable.input" relation="relation4"/>
                <link port="ArrayAppend.input" relation="relation2"/>
                <link port="ArrayAppend.input" relation="relation6"/>
                <link port="ArrayAppend.output" relation="relation7"/>
                <link port="Expression2.output" relation="relation6"/>
                <link port="Expression2.Msg" relation="relation5"/>
                <link port="SetVariable2.input" relation="relation7"/>
                <link port="Expression3.output" relation="relation8"/>
                <link port="Expression3.msg" relation="relation5"/>
                <link port="BooleanSwitch.input" relation="relation10"/>
                <link port="BooleanSwitch.control" relation="relation8"/>
                <link port="BooleanSwitch.falseOutput" relation="relation9"/>
                <link port="Expression4.output" relation="relation10"/>
                <link port="Expression4.mens" relation="relation5"/>
                <link port="Const4.output" relation="relation11"/>
                <link port="Const4.trigger" relation="relation5"/>
                <link port="PoissonClock.output" relation="relation12"/>
            </entity>
            <entity name="ini" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-585.0, -15.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, -5.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 400.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 35.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-245.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-260.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable3" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 0, Lifetime = 0, NoH = 0, Requester = 0, Responder =0, SeqN = 0}, Sender = 0, Type = &quot; &quot;}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-210.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-310.0, 400.0]">
                    </property>
                </entity>
                <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
                    <property name="time" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-590.0, 275.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 275.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-410.0, 275.0]">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation4"/>
                <link port="SetVariable.input" relation="relation3"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation6"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation6"/>
                <link port="SetVariable2.input" relation="relation"/>
                <link port="SetVariable3.input" relation="relation2"/>
                <link port="Const4.output" relation="relation3"/>
                <link port="Const4.trigger" relation="relation6"/>
                <link port="Const5.output" relation="relation4"/>
                <link port="Const5.trigger" relation="relation6"/>
                <link port="SingleEvent.output" relation="relation6"/>
                <link port="Const.trigger" relation="relation6"/>
            </entity>
            <relation name="CommInRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="NextStateRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="CommRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <link port="CommIn" relation="CommInRelation"/>
            <link port="NextState" relation="NextStateRelation"/>
            <link port="Comm" relation="CommRelation"/>
            <link port="_Controller.CommIn" relation="CommInRelation"/>
            <link port="_Controller.NextState" relation="NextStateRelation"/>
            <link port="_Controller.Comm" relation="CommRelation"/>
            <link port="Free.CommIn" relation="CommInRelation"/>
            <link port="Free.NextState" relation="NextStateRelation"/>
            <link port="Free.Comm" relation="CommRelation"/>
            <link port="RepetedREQ.CommIn" relation="CommInRelation"/>
            <link port="RepetedREQ.NextState" relation="NextStateRelation"/>
            <link port="RepetedREQ.Comm" relation="CommRelation"/>
            <link port="NewREQ.CommIn" relation="CommInRelation"/>
            <link port="NewREQ.NextState" relation="NextStateRelation"/>
            <link port="NewREQ.Comm" relation="CommRelation"/>
            <link port="GoodREP.CommIn" relation="CommInRelation"/>
            <link port="GoodREP.NextState" relation="NextStateRelation"/>
            <link port="GoodREP.Comm" relation="CommRelation"/>
            <link port="ini.CommIn" relation="CommInRelation"/>
            <link port="ini.NextState" relation="NextStateRelation"/>
            <link port="ini.Comm" relation="CommRelation"/>
        </entity>
        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1495.0, -570.0]">
            </property>
        </entity>
        <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1320.0, -650.0]">
            </property>
        </entity>
        <entity name="Display" class="ptolemy.actor.lib.gui.Display">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={42, 343, 128, 337}, maximized=false}">
            </property>
            <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[128, 293]">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1360.0, -840.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="SeqN">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1295, -705}">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="i+1">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1235.0, -705.0]">
            </property>
            <port name="i" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="SeqN">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1155.0, -705.0]">
            </property>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1465.0, -745.0]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1605.0, -700.0]">
            </vertex>
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <link port="CommOut" relation="relation2"/>
        <link port="ComIn" relation="relation3"/>
        <link port="ModalModel.CommIn" relation="relation3"/>
        <link port="ModalModel.NextState" relation="relation"/>
        <link port="ModalModel.Comm" relation="relation2"/>
        <link port="MonitorValue.input" relation="relation3"/>
        <link port="MonitorValue2.input" relation="relation2"/>
        <link port="Display.input" relation="relation"/>
        <link port="Const.output" relation="relation4"/>
        <link port="Const.trigger" relation="relation2"/>
        <link port="Expression.output" relation="relation5"/>
        <link port="Expression.i" relation="relation4"/>
        <link port="SetVariable.input" relation="relation5"/>
    </entity>
    <entity name="WirelessComposite6" class="ptolemy.domains.wireless.kernel.WirelessComposite">
        <property name="DEDirector" class="ptolemy.domains.de.kernel.DEDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1710.0, -1070.0]">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[960.0, 615.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 0, 1278, 993}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 883]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0883901003088">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-1274.6640625, -692.0893770578552}">
        </property>
        <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 10, Lifetime = 90, NoH = 2, Requester = 12, Responder = 6, SeqN = 59}, Sender = 4, Type = &quot;RREP&quot;}">
        </property>
        <property name="NodeId" class="ptolemy.data.expr.Parameter" value="6">
        </property>
        <property name="SeqN" class="ptolemy.data.expr.Parameter" value="60">
        </property>
        <property name="inrange" class="ptolemy.data.expr.Parameter" value="200.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1425.0, -900.0]">
            </property>
        </property>
        <property name="Table" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}, {Dest = 12, Next = 5, NoH = 8, SeqN = 1}, {Dest = 5, Next = 5, NoH = 1, SeqN = 1}, {Dest = 4, Next = 4, NoH = 1, SeqN = 1}}">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1725.0, -970.0]">
            </property>
        </property>
        <property name="ActiveREQ" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
        </property>
        <port name="CommOut" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="output"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1140.0, -745.0]">
            </property>
        </port>
        <port name="ComIn" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="input"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1730.0, -700.0]">
            </property>
        </port>
        <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="conservativeAnalysis" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1525.0, -785.0}">
            </property>
            <port name="CommIn" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="NextState" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <port name="Comm" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 16, 1278, 991}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 879]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7814556033232">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{527.4925377411147, 614.330838714486}">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1105.0, 715.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1110.0, 785.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="NewREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="NewREQ">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, 760.0]">
                    </property>
                </entity>
                <entity name="Free" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Free">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{385.0, 540.0}">
                    </property>
                </entity>
                <entity name="GoodREP" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="GoodREP">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[255.0, 100.0]">
                    </property>
                </entity>
                <entity name="RepetedREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="RepetedREQ">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 535.0]">
                    </property>
                </entity>
                <entity name="ini" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ini">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 1140.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==3 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.331264840408476">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.606970218174628">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.41757594685401783">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==2 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3187945223103927">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.8303876318932162">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==1 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.8264783144694349">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==0 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.131114565077624">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState == 0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.4634021104919674">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <link port="NewREQ.incomingPort" relation="relation3"/>
                <link port="NewREQ.outgoingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation2"/>
                <link port="Free.incomingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation6"/>
                <link port="Free.incomingPort" relation="relation7"/>
                <link port="Free.outgoingPort" relation="relation"/>
                <link port="Free.outgoingPort" relation="relation3"/>
                <link port="Free.outgoingPort" relation="relation5"/>
                <link port="GoodREP.incomingPort" relation="relation"/>
                <link port="GoodREP.outgoingPort" relation="relation2"/>
                <link port="RepetedREQ.incomingPort" relation="relation5"/>
                <link port="RepetedREQ.outgoingPort" relation="relation6"/>
                <link port="ini.outgoingPort" relation="relation7"/>
            </entity>
            <entity name="Free" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-285.0, 10.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 1, 1288, 1001}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.8490603363007">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{287.3750000000001, 506.9633183830382}">
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Next_State == 1 --&gt; RepetedREQ (Recibe RREQ y SI esta en ActiveREQ)&#10;Next_State == 2 --&gt; NewREQ (Recibe RREQ y NO esta en AvtiveREQ)&#10;Next_State == 3 --&gt; GoodREP (Recibe RREP y SI esta en ActiveREQ)&#10;Next_State == 4 --&gt; No hay cambio de estado (se descarta un RREP no valido)&#10;&#10;El resto de valores no son posibles">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, -20.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-320.0, 120.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 130.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, 325.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-30.0, 120.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 345.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot;)? 0:2">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 270.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayContains" class="ptolemy.actor.lib.ArrayContains">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[535.0, 355.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Responder=msg.Data.Responder, Requester=msg.Data.Requester, IdReq=msg.Data.IdReq}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 425.0]">
                    </property>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot; || msg.Type==&quot;RREP&quot; )? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 195.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="EventFilter" class="ptolemy.domains.de.lib.EventFilter">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 300.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="falseValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{610.0, 355.0}">
                    </property>
                </entity>
                <entity name="Merge" class="ptolemy.domains.de.lib.Merge">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[765.0, 170.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[250.0, 155.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 165.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-135.0, 510.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a+b">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 280.0]">
                    </property>
                    <port name="a" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="b" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[370.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-250.0, 120.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[35.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-180.0, 235.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[20.0, 155.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[495.0, 425.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="CommIn" relation="relation5"/>
                <link port="NextState" relation="relation3"/>
                <link port="SetVariable.input" relation="relation5"/>
                <link port="SetVariable.output" relation="relation9"/>
                <link port="Const2.output" relation="relation4"/>
                <link port="Const2.trigger" relation="relation14"/>
                <link port="Expression2.output" relation="relation2"/>
                <link port="Expression2.msg" relation="relation9"/>
                <link port="Expression2.enab" relation="relation14"/>
                <link port="ArrayContains.array" relation="relation4"/>
                <link port="ArrayContains.output" relation="relation8"/>
                <link port="ArrayContains.element" relation="relation13"/>
                <link port="Expression3.output" relation="relation13"/>
                <link port="Expression3.enab" relation="relation14"/>
                <link port="Expression3.msg" relation="relation9"/>
                <link port="Expression.output" relation="relation7"/>
                <link port="Expression.msg" relation="relation9"/>
                <link port="EventFilter.input" relation="relation7"/>
                <link port="EventFilter.output" relation="relation14"/>
                <link port="BooleanToAnything.input" relation="relation8"/>
                <link port="BooleanToAnything.output" relation="relation"/>
                <link port="Merge.input" relation="relation12"/>
                <link port="Merge.input" relation="relation6"/>
                <link port="Merge.output" relation="relation3"/>
                <link port="BooleanSwitch.input" relation="relation9"/>
                <link port="BooleanSwitch.control" relation="relation7"/>
                <link port="BooleanSwitch.falseOutput" relation="relation11"/>
                <link port="Const.output" relation="relation12"/>
                <link port="Const.trigger" relation="relation11"/>
                <link port="MonitorValue.input" relation="relation5"/>
                <link port="Expression4.output" relation="relation6"/>
                <link port="Expression4.a" relation="relation2"/>
                <link port="Expression4.b" relation="relation"/>
            </entity>
            <entity name="RepetedREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="allowDisconnectedGraphs" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-385.0, 95.0]">
                    </property>
                </property>
                <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {NoH = 2, SeqN = 2, Responder = 10, Requester = 25, IdReq = 1, Lifetime = 0}, Sender = 27, Type = &quot;RREQ&quot;}">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={-4, -4, 1288, 1004}, maximized=true}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7266570727165">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{276.8124999999999, 660.2064888164025}">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 520.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 480.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 340.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-205.0, 340.0}">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1001}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 445.5}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 400.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[235.0, 360.0]">
                            </vertex>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="elem" relation="relation3"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-195.0, 515.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-410.0, 340.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(exist&gt;=1)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 340.0]">
                    </property>
                    <port name="exist" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 480.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 290.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 220.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 230.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 210.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 235.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[800.0, 220.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-335.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[120.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[605.0, 290.0]">
                    </vertex>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[180.0, 210.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation5"/>
                <link port="ArraySum.input" relation="relation3"/>
                <link port="ArraySum.output" relation="relation4"/>
                <link port="IterateOverArray.RouteTable" relation="relation"/>
                <link port="IterateOverArray.elem" relation="relation3"/>
                <link port="MonitorValue.input" relation="relation"/>
                <link port="Const.output" relation="relation"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.exist" relation="relation4"/>
                <link port="Const2.output" relation="relation5"/>
                <link port="Const2.trigger" relation="relation2"/>
                <link port="Expression2.output" relation="relation7"/>
                <link port="Expression2.Msg" relation="relation12"/>
                <link port="ArrayAppend.input" relation="relation8"/>
                <link port="ArrayAppend.input" relation="relation7"/>
                <link port="ArrayAppend.output" relation="relation11"/>
                <link port="SetVariable.input" relation="relation6"/>
                <link port="Const4.output" relation="relation8"/>
                <link port="Const4.trigger" relation="relation12"/>
                <link port="MonitorValue2.input" relation="relation2"/>
                <link port="Const5.output" relation="relation12"/>
                <link port="BooleanSwitch3.input" relation="relation11"/>
                <link port="BooleanSwitch3.control" relation="relation2"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation6"/>
            </entity>
            <entity name="NewREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7026850032744">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{381.4999999999999, 468.2564072693384}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-325.0, -135.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-345.0, -75.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, -45.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1055.0, 105.0]">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 250.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Responder==NodeId)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 125.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=NodeId, Requester=mens.Data.Requester, Lifetime=100, IdReq=mens.Data.IdReq, NoH=1, SeqN=SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[390.0, 40.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(table.Dest!=0)? {Sender=NodeId, Type=&quot;RREP&quot;, Data={Requester=mens.Data.Requester, Responder=table.Dest,Lifetime=100,IdReq=mens.Data.IdReq,SeqN=table.SeqN,NoH=table.NoH+1}}:{Sender=NodeId, Type=&quot;RREQ&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester,Lifetime=0,IdReq=mens.Data.IdReq,NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 85.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayElement" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 40.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 205.0]">
                    </property>
                </entity>
                <entity name="BooleanMultiplexor" class="ptolemy.actor.lib.BooleanMultiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 85.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray2" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-140.0, 260.0]">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 265.0]">
                            </property>
                        </port>
                        <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="{665.0, 325.0}">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Responder)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 265.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Requester)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 325.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[575.0, 425.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[240.0, 360.0]">
                            </vertex>
                        </relation>
                        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="Responder" relation="relation3"/>
                        <link port="Sender" relation="relation5"/>
                        <link port="Requester" relation="relation4"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="Expression.output" relation="relation5"/>
                        <link port="Expression.RouteTable" relation="relation"/>
                        <link port="Expression.m" relation="relation2"/>
                        <link port="Expression3.output" relation="relation4"/>
                        <link port="Expression3.RouteTable" relation="relation"/>
                        <link port="Expression3.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{IdReq=Msg.Data.IdReq, Requester=Msg.Data.Requester, Responder=Msg.Data.Responder}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, -40.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, -95.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-110.0, -100.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0, -85.0]">
                    </property>
                </entity>
                <entity name="Expression5" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Requester==mens.Sender)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 585.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression6" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 450.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression7" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[170.0, 515.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Multiplexor" class="ptolemy.actor.lib.Multiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{820.0, 515.0}">
                    </property>
                    <property name="_flipPortsVertical" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 450.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything2" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything3" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 585.0]">
                    </property>
                </entity>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 525.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend2" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[925.0, 400.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 465.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1015.0, 475.0]">
                    </property>
                </entity>
                <entity name="Expression8" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(sum&gt;0)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[890.0, 630.0]">
                    </property>
                    <port name="sum" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression9" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=0, Dest=0, Next=0, SeqN=0}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 615.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression13" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[490.0, 695.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression14" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN},{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression10" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 655.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[865.0, -45.0]">
                    </property>
                </entity>
                <entity name="ArraySum2" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 450.0]">
                    </property>
                </entity>
                <entity name="ArraySum3" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch2" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[620.0, -95.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-530.0, 115.0]">
                    </property>
                </entity>
                <entity name="Expression11" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="((table.Dest!=0)&amp;&amp;(table.SeqN&gt;= mens.Data.SeqN))?true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 870.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[985.0, 95.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 960.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 290.0]">
                    </property>
                </entity>
                <entity name="MonitorValue3" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 1005.0]">
                    </property>
                </entity>
                <entity name="ArrayElement2" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 805.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 205.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[195.0, 215.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[610.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 75.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[845.0, 85.0]">
                    </vertex>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[80.0, 250.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[410.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation15" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation16" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 585.0]">
                    </vertex>
                </relation>
                <relation name="relation18" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-45.0, 450.0]">
                    </vertex>
                </relation>
                <relation name="relation19" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-60.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation17" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation20" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation21" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation22" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation23" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation24" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation26" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation28" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation29" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation27" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation30" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[765.0, 525.0]">
                    </vertex>
                </relation>
                <relation name="relation25" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation31" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation33" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation32" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation34" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation35" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation36" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation37" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation39" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation41" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation40" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation42" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{-450.0, 115.0}">
                    </vertex>
                </relation>
                <relation name="relation43" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation45" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{1050.0, 195.0}">
                    </vertex>
                </relation>
                <relation name="relation44" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[65.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation38" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{365.0, 815.0}">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation37"/>
                <link port="Comm" relation="relation43"/>
                <link port="ArraySum.input" relation="relation4"/>
                <link port="ArraySum.output" relation="relation10"/>
                <link port="Expression.output" relation="relation5"/>
                <link port="Expression.mens" relation="relation7"/>
                <link port="Expression2.output" relation="relation11"/>
                <link port="Expression2.mens" relation="relation8"/>
                <link port="Expression3.output" relation="relation12"/>
                <link port="Expression3.mens" relation="relation6"/>
                <link port="Expression3.table" relation="relation2"/>
                <link port="ArrayElement.input" relation="relation"/>
                <link port="ArrayElement.output" relation="relation2"/>
                <link port="ArrayElement.index" relation="relation10"/>
                <link port="Const.output" relation="relation3"/>
                <link port="Const.trigger" relation="relation42"/>
                <link port="Const2.output" relation="relation"/>
                <link port="Const2.trigger" relation="relation42"/>
                <link port="BooleanMultiplexor.trueInput" relation="relation11"/>
                <link port="BooleanMultiplexor.falseInput" relation="relation12"/>
                <link port="BooleanMultiplexor.select" relation="relation5"/>
                <link port="BooleanMultiplexor.output" relation="relation9"/>
                <link port="IterateOverArray2.RouteTable" relation="relation"/>
                <link port="IterateOverArray2.Responder" relation="relation4"/>
                <link port="IterateOverArray2.Sender" relation="relation18"/>
                <link port="IterateOverArray2.Requester" relation="relation19"/>
                <link port="Expression4.output" relation="relation13"/>
                <link port="Expression4.Msg" relation="relation41"/>
                <link port="ArrayAppend.input" relation="relation15"/>
                <link port="ArrayAppend.input" relation="relation13"/>
                <link port="ArrayAppend.output" relation="relation14"/>
                <link port="Const3.output" relation="relation15"/>
                <link port="Const3.trigger" relation="relation42"/>
                <link port="SetVariable.input" relation="relation40"/>
                <link port="Expression5.output" relation="relation21"/>
                <link port="Expression5.mens" relation="relation16"/>
                <link port="Expression6.output" relation="relation17"/>
                <link port="Expression6.index" relation="relation39"/>
                <link port="Expression7.output" relation="relation20"/>
                <link port="Expression7.index" relation="relation44"/>
                <link port="Multiplexor.input" relation="relation31"/>
                <link port="Multiplexor.input" relation="relation33"/>
                <link port="Multiplexor.input" relation="relation32"/>
                <link port="Multiplexor.input" relation="relation34"/>
                <link port="Multiplexor.output" relation="relation28"/>
                <link port="Multiplexor.select" relation="relation30"/>
                <link port="BooleanToAnything.input" relation="relation17"/>
                <link port="BooleanToAnything.output" relation="relation22"/>
                <link port="BooleanToAnything2.input" relation="relation20"/>
                <link port="BooleanToAnything2.output" relation="relation23"/>
                <link port="BooleanToAnything3.input" relation="relation21"/>
                <link port="BooleanToAnything3.output" relation="relation24"/>
                <link port="AddSubtract.plus" relation="relation22"/>
                <link port="AddSubtract.plus" relation="relation23"/>
                <link port="AddSubtract.minus" relation="relation24"/>
                <link port="AddSubtract.output" relation="relation30"/>
                <link port="ArrayAppend2.input" relation="relation26"/>
                <link port="ArrayAppend2.input" relation="relation28"/>
                <link port="ArrayAppend2.output" relation="relation29"/>
                <link port="SetVariable2.input" relation="relation27"/>
                <link port="BooleanSwitch.input" relation="relation29"/>
                <link port="BooleanSwitch.control" relation="relation25"/>
                <link port="BooleanSwitch.trueOutput" relation="relation27"/>
                <link port="Expression8.output" relation="relation25"/>
                <link port="Expression8.sum" relation="relation30"/>
                <link port="Expression9.output" relation="relation31"/>
                <link port="Expression9.Msg" relation="relation36"/>
                <link port="Expression13.output" relation="relation32"/>
                <link port="Expression13.Msg" relation="relation36"/>
                <link port="Expression14.output" relation="relation34"/>
                <link port="Expression14.Msg" relation="relation36"/>
                <link port="Expression10.output" relation="relation33"/>
                <link port="Expression10.Msg" relation="relation36"/>
                <link port="Const4.output" relation="relation37"/>
                <link port="Const4.trigger" relation="relation9"/>
                <link port="ArraySum2.input" relation="relation18"/>
                <link port="ArraySum2.output" relation="relation39"/>
                <link port="ArraySum3.input" relation="relation19"/>
                <link port="ArraySum3.output" relation="relation44"/>
                <link port="BooleanSwitch2.input" relation="relation14"/>
                <link port="BooleanSwitch2.control" relation="relation5"/>
                <link port="BooleanSwitch2.falseOutput" relation="relation40"/>
                <link port="PoissonClock.output" relation="relation42"/>
                <link port="Expression11.output" relation="relation45"/>
                <link port="Expression11.mens" relation="relation35"/>
                <link port="Expression11.table" relation="relation38"/>
                <link port="BooleanSwitch3.input" relation="relation9"/>
                <link port="BooleanSwitch3.control" relation="relation45"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation43"/>
                <link port="MonitorValue.input" relation="relation38"/>
                <link port="MonitorValue2.input" relation="relation45"/>
                <link port="MonitorValue3.input" relation="relation7"/>
                <link port="ArrayElement2.input" relation="relation26"/>
                <link port="ArrayElement2.output" relation="relation38"/>
                <link port="ArrayElement2.index" relation="relation44"/>
                <link relation1="relation" relation2="relation26"/>
                <link relation1="relation3" relation2="relation8"/>
                <link relation1="relation3" relation2="relation16"/>
                <link relation1="relation6" relation2="relation8"/>
                <link relation1="relation6" relation2="relation7"/>
                <link relation1="relation8" relation2="relation41"/>
                <link relation1="relation16" relation2="relation35"/>
                <link relation1="relation35" relation2="relation36"/>
            </entity>
            <entity name="GoodREP" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 50.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 45.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1031.75, 670.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[896.75, 460.0]">
                    </property>
                </port>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[586.75, 285.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[166.75, 350.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[636.75, 140.0]">
                    </property>
                </entity>
                <entity name="ArrayRemoveElement" class="ptolemy.actor.lib.ArrayRemoveElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[811.75, 150.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{IdReq=msg.Data.IdReq, Responder=msg.Data.Responder, Requester=msg.Data.Requester}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[476.75, 200.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[926.75, 150.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[846.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Responder, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[486.75, 350.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[951.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(NodeId==msg.Data.Requester)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[426.75, 580.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[786.75, 450.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester, Lifetime=mens.Data.Lifetime-10, IdReq=mens.Data.IdReq, NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[506.75, 450.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[406.75, 670.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 350.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[246.75, 350.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation11"/>
                <link port="Comm" relation="relation9"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation5"/>
                <link port="Const.output" relation="relation5"/>
                <link port="Const.trigger" relation="relation12"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation5"/>
                <link port="ArrayRemoveElement.array" relation="relation"/>
                <link port="ArrayRemoveElement.output" relation="relation4"/>
                <link port="ArrayRemoveElement.element" relation="relation3"/>
                <link port="Expression.output" relation="relation3"/>
                <link port="Expression.msg" relation="relation5"/>
                <link port="SetVariable.input" relation="relation4"/>
                <link port="ArrayAppend.input" relation="relation2"/>
                <link port="ArrayAppend.input" relation="relation6"/>
                <link port="ArrayAppend.output" relation="relation7"/>
                <link port="Expression2.output" relation="relation6"/>
                <link port="Expression2.Msg" relation="relation5"/>
                <link port="SetVariable2.input" relation="relation7"/>
                <link port="Expression3.output" relation="relation8"/>
                <link port="Expression3.msg" relation="relation5"/>
                <link port="BooleanSwitch.input" relation="relation10"/>
                <link port="BooleanSwitch.control" relation="relation8"/>
                <link port="BooleanSwitch.falseOutput" relation="relation9"/>
                <link port="Expression4.output" relation="relation10"/>
                <link port="Expression4.mens" relation="relation5"/>
                <link port="Const4.output" relation="relation11"/>
                <link port="Const4.trigger" relation="relation5"/>
                <link port="PoissonClock.output" relation="relation12"/>
            </entity>
            <entity name="ini" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-585.0, -15.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, -5.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 400.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 35.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-245.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-260.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable3" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 0, Lifetime = 0, NoH = 0, Requester = 0, Responder =0, SeqN = 0}, Sender = 0, Type = &quot; &quot;}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-210.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-310.0, 400.0]">
                    </property>
                </entity>
                <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
                    <property name="time" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-590.0, 275.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 275.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-410.0, 275.0]">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation4"/>
                <link port="SetVariable.input" relation="relation3"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation6"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation6"/>
                <link port="SetVariable2.input" relation="relation"/>
                <link port="SetVariable3.input" relation="relation2"/>
                <link port="Const4.output" relation="relation3"/>
                <link port="Const4.trigger" relation="relation6"/>
                <link port="Const5.output" relation="relation4"/>
                <link port="Const5.trigger" relation="relation6"/>
                <link port="SingleEvent.output" relation="relation6"/>
                <link port="Const.trigger" relation="relation6"/>
            </entity>
            <relation name="CommInRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="NextStateRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="CommRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <link port="CommIn" relation="CommInRelation"/>
            <link port="NextState" relation="NextStateRelation"/>
            <link port="Comm" relation="CommRelation"/>
            <link port="_Controller.CommIn" relation="CommInRelation"/>
            <link port="_Controller.NextState" relation="NextStateRelation"/>
            <link port="_Controller.Comm" relation="CommRelation"/>
            <link port="Free.CommIn" relation="CommInRelation"/>
            <link port="Free.NextState" relation="NextStateRelation"/>
            <link port="Free.Comm" relation="CommRelation"/>
            <link port="RepetedREQ.CommIn" relation="CommInRelation"/>
            <link port="RepetedREQ.NextState" relation="NextStateRelation"/>
            <link port="RepetedREQ.Comm" relation="CommRelation"/>
            <link port="NewREQ.CommIn" relation="CommInRelation"/>
            <link port="NewREQ.NextState" relation="NextStateRelation"/>
            <link port="NewREQ.Comm" relation="CommRelation"/>
            <link port="GoodREP.CommIn" relation="CommInRelation"/>
            <link port="GoodREP.NextState" relation="NextStateRelation"/>
            <link port="GoodREP.Comm" relation="CommRelation"/>
            <link port="ini.CommIn" relation="CommInRelation"/>
            <link port="ini.NextState" relation="NextStateRelation"/>
            <link port="ini.Comm" relation="CommRelation"/>
        </entity>
        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1495.0, -570.0]">
            </property>
        </entity>
        <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1320.0, -650.0]">
            </property>
        </entity>
        <entity name="Display" class="ptolemy.actor.lib.gui.Display">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={279, 343, 128, 323}, maximized=false}">
            </property>
            <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[128, 279]">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1360.0, -840.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="SeqN">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1295, -705}">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="i+1">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1235.0, -705.0]">
            </property>
            <port name="i" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="SeqN">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1155.0, -705.0]">
            </property>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1465.0, -745.0]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1605.0, -700.0]">
            </vertex>
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <link port="CommOut" relation="relation2"/>
        <link port="ComIn" relation="relation3"/>
        <link port="ModalModel.CommIn" relation="relation3"/>
        <link port="ModalModel.NextState" relation="relation"/>
        <link port="ModalModel.Comm" relation="relation2"/>
        <link port="MonitorValue.input" relation="relation3"/>
        <link port="MonitorValue2.input" relation="relation2"/>
        <link port="Display.input" relation="relation"/>
        <link port="Const.output" relation="relation4"/>
        <link port="Const.trigger" relation="relation2"/>
        <link port="Expression.output" relation="relation5"/>
        <link port="Expression.i" relation="relation4"/>
        <link port="SetVariable.input" relation="relation5"/>
    </entity>
    <entity name="WirelessToWired2" class="ptolemy.domains.wireless.lib.WirelessToWired">
        <property name="inputChannelName" class="ptolemy.data.expr.StringParameter" value="canal">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[760.0, 390.0]">
        </property>
    </entity>
    <entity name="WirelessToWired3" class="ptolemy.domains.wireless.lib.WirelessToWired">
        <property name="inputChannelName" class="ptolemy.data.expr.StringParameter" value="canal">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[865.0, 535.0]">
        </property>
    </entity>
    <entity name="LinkVisualizer" class="ptolemy.domains.wireless.lib.LinkVisualizer">
        <property name="channelName" class="ptolemy.data.expr.StringParameter" value="canal">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 40.0]">
        </property>
    </entity>
    <entity name="WirelessComposite5" class="ptolemy.domains.wireless.kernel.WirelessComposite">
        <property name="DEDirector" class="ptolemy.domains.de.kernel.DEDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1710.0, -1070.0]">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0, 265.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 0, 1278, 993}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 883]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0883901003088">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-1274.6640625, -692.0893770578552}">
        </property>
        <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 10, Lifetime = 0, NoH = 7, Requester = 12, Responder = 6, SeqN = 1}, Sender = 3, Type = &quot;RREQ&quot;}">
        </property>
        <property name="NodeId" class="ptolemy.data.expr.Parameter" value="5">
        </property>
        <property name="SeqN" class="ptolemy.data.expr.Parameter" value="65">
        </property>
        <property name="inrange" class="ptolemy.data.expr.Parameter" value="200.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1425.0, -900.0]">
            </property>
        </property>
        <property name="Table" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}, {Dest = 12, Next = 27, NoH = 5, SeqN = 1}, {Dest = 27, Next = 27, NoH = 1, SeqN = 1}}">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1725.0, -970.0]">
            </property>
        </property>
        <property name="ActiveREQ" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}, {IdReq = 10, Requester = 12, Responder = 6}}">
        </property>
        <port name="CommOut" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="output"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1140.0, -745.0]">
            </property>
        </port>
        <port name="ComIn" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="input"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="canal">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=inrange}">
            </property>
            <property name="insideChannel" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1730.0, -700.0]">
            </property>
        </port>
        <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="conservativeAnalysis" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1525.0, -785.0}">
            </property>
            <port name="CommIn" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="NextState" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <port name="Comm" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 16, 1278, 991}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1063, 879]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7814556033232">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{527.4925377411147, 614.330838714486}">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1105.0, 715.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1110.0, 785.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="NewREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="NewREQ">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-70.0, 760.0}">
                    </property>
                </entity>
                <entity name="Free" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Free">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{385.0, 540.0}">
                    </property>
                </entity>
                <entity name="GoodREP" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="GoodREP">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[255.0, 100.0]">
                    </property>
                </entity>
                <entity name="RepetedREQ" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="RepetedREQ">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 535.0]">
                    </property>
                </entity>
                <entity name="ini" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ini">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 1140.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==3 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.331264840408476">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.606970218174628">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.41757594685401783">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==2 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3187945223103927">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState==0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.8303876318932162">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==1 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.8264783144694349">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState==0 &amp;&amp; NextState_isPresent">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.131114565077624">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="NextState_isPresent &amp;&amp; NextState == 0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.4634021104919674">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <link port="NewREQ.incomingPort" relation="relation3"/>
                <link port="NewREQ.outgoingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation2"/>
                <link port="Free.incomingPort" relation="relation4"/>
                <link port="Free.incomingPort" relation="relation6"/>
                <link port="Free.incomingPort" relation="relation7"/>
                <link port="Free.outgoingPort" relation="relation"/>
                <link port="Free.outgoingPort" relation="relation3"/>
                <link port="Free.outgoingPort" relation="relation5"/>
                <link port="GoodREP.incomingPort" relation="relation"/>
                <link port="GoodREP.outgoingPort" relation="relation2"/>
                <link port="RepetedREQ.incomingPort" relation="relation5"/>
                <link port="RepetedREQ.outgoingPort" relation="relation6"/>
                <link port="ini.outgoingPort" relation="relation7"/>
            </entity>
            <entity name="Free" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-285.0, 10.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 1, 1288, 1001}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.8490603363007">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{287.3750000000001, 506.9633183830382}">
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Next_State == 1 --&gt; RepetedREQ (Recibe RREQ y SI esta en ActiveREQ)&#10;Next_State == 2 --&gt; NewREQ (Recibe RREQ y NO esta en AvtiveREQ)&#10;Next_State == 3 --&gt; GoodREP (Recibe RREP y SI esta en ActiveREQ)&#10;Next_State == 4 --&gt; No hay cambio de estado (se descarta un RREP no valido)&#10;&#10;El resto de valores no son posibles">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, -20.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-320.0, 120.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 130.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, 325.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-30.0, 120.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 345.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot;)? 0:2">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 270.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayContains" class="ptolemy.actor.lib.ArrayContains">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[535.0, 355.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Responder=msg.Data.Responder, Requester=msg.Data.Requester, IdReq=msg.Data.IdReq}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 425.0]">
                    </property>
                    <port name="enab" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(msg.Type==&quot;RREQ&quot; || msg.Type==&quot;RREP&quot; )? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 195.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="EventFilter" class="ptolemy.domains.de.lib.EventFilter">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-180.0, 300.0]">
                    </property>
                    <property name="_rotatePorts" class="ptolemy.data.expr.Parameter" value="90">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="falseValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{610.0, 355.0}">
                    </property>
                </entity>
                <entity name="Merge" class="ptolemy.domains.de.lib.Merge">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[765.0, 170.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[250.0, 155.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 165.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-135.0, 510.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a+b">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 280.0]">
                    </property>
                    <port name="a" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="b" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[370.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-250.0, 120.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[35.0, 345.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-180.0, 235.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[20.0, 155.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[495.0, 425.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="CommIn" relation="relation5"/>
                <link port="NextState" relation="relation3"/>
                <link port="SetVariable.input" relation="relation5"/>
                <link port="SetVariable.output" relation="relation9"/>
                <link port="Const2.output" relation="relation4"/>
                <link port="Const2.trigger" relation="relation14"/>
                <link port="Expression2.output" relation="relation2"/>
                <link port="Expression2.msg" relation="relation9"/>
                <link port="Expression2.enab" relation="relation14"/>
                <link port="ArrayContains.array" relation="relation4"/>
                <link port="ArrayContains.output" relation="relation8"/>
                <link port="ArrayContains.element" relation="relation13"/>
                <link port="Expression3.output" relation="relation13"/>
                <link port="Expression3.enab" relation="relation14"/>
                <link port="Expression3.msg" relation="relation9"/>
                <link port="Expression.output" relation="relation7"/>
                <link port="Expression.msg" relation="relation9"/>
                <link port="EventFilter.input" relation="relation7"/>
                <link port="EventFilter.output" relation="relation14"/>
                <link port="BooleanToAnything.input" relation="relation8"/>
                <link port="BooleanToAnything.output" relation="relation"/>
                <link port="Merge.input" relation="relation12"/>
                <link port="Merge.input" relation="relation6"/>
                <link port="Merge.output" relation="relation3"/>
                <link port="BooleanSwitch.input" relation="relation9"/>
                <link port="BooleanSwitch.control" relation="relation7"/>
                <link port="BooleanSwitch.falseOutput" relation="relation11"/>
                <link port="Const.output" relation="relation12"/>
                <link port="Const.trigger" relation="relation11"/>
                <link port="MonitorValue.input" relation="relation5"/>
                <link port="Expression4.output" relation="relation6"/>
                <link port="Expression4.a" relation="relation2"/>
                <link port="Expression4.b" relation="relation"/>
            </entity>
            <entity name="RepetedREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="allowDisconnectedGraphs" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-385.0, 95.0]">
                    </property>
                </property>
                <property name="MsgId" class="ptolemy.data.expr.Parameter" value="{Data = {NoH = 2, SeqN = 2, Responder = 10, Requester = 25, IdReq = 1, Lifetime = 0}, Sender = 27, Type = &quot;RREQ&quot;}">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={-4, -4, 1288, 1004}, maximized=true}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7266570727165">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{276.8124999999999, 660.2064888164025}">
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 520.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 480.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-85.0, 340.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-205.0, 340.0}">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1001}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 891]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 445.5}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="elem" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 400.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[235.0, 360.0]">
                            </vertex>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="elem" relation="relation3"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-195.0, 515.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-410.0, 340.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(exist&gt;=1)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 340.0]">
                    </property>
                    <port name="exist" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 480.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 290.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 220.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[910.0, 230.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 210.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 235.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[800.0, 220.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-335.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[120.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[605.0, 290.0]">
                    </vertex>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[180.0, 210.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation5"/>
                <link port="ArraySum.input" relation="relation3"/>
                <link port="ArraySum.output" relation="relation4"/>
                <link port="IterateOverArray.RouteTable" relation="relation"/>
                <link port="IterateOverArray.elem" relation="relation3"/>
                <link port="MonitorValue.input" relation="relation"/>
                <link port="Const.output" relation="relation"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.exist" relation="relation4"/>
                <link port="Const2.output" relation="relation5"/>
                <link port="Const2.trigger" relation="relation2"/>
                <link port="Expression2.output" relation="relation7"/>
                <link port="Expression2.Msg" relation="relation12"/>
                <link port="ArrayAppend.input" relation="relation8"/>
                <link port="ArrayAppend.input" relation="relation7"/>
                <link port="ArrayAppend.output" relation="relation11"/>
                <link port="SetVariable.input" relation="relation6"/>
                <link port="Const4.output" relation="relation8"/>
                <link port="Const4.trigger" relation="relation12"/>
                <link port="MonitorValue2.input" relation="relation2"/>
                <link port="Const5.output" relation="relation12"/>
                <link port="BooleanSwitch3.input" relation="relation11"/>
                <link port="BooleanSwitch3.control" relation="relation2"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation6"/>
            </entity>
            <entity name="NewREQ" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7026850032744">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{381.4999999999999, 468.2564072693384}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-325.0, -135.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-345.0, -75.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[930.0, -45.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1055.0, 105.0]">
                    </property>
                </port>
                <entity name="ArraySum" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 250.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Responder==NodeId)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 125.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=NodeId, Requester=mens.Data.Requester, Lifetime=100, IdReq=mens.Data.IdReq, NoH=1, SeqN=SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[390.0, 40.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(table.Dest!=0)? {Sender=NodeId, Type=&quot;RREP&quot;, Data={Requester=mens.Data.Requester, Responder=table.Dest,Lifetime=100,IdReq=mens.Data.IdReq,SeqN=table.SeqN,NoH=table.NoH+1}}:{Sender=NodeId, Type=&quot;RREQ&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester,Lifetime=0,IdReq=mens.Data.IdReq,NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 85.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayElement" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 40.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 205.0]">
                    </property>
                </entity>
                <entity name="BooleanMultiplexor" class="ptolemy.actor.lib.BooleanMultiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 85.0]">
                    </property>
                </entity>
                <entity name="IterateOverArray2" class="ptolemy.actor.lib.hoc.IterateOverArray">
                    <doc>Iterate a contained actor over input arrays</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                    </property>
                    <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
                    </property>
                    <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-140.0, 260.0]">
                    </property>
                    <property name="Label" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="input"/>
                    </port>
                    <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                        <property name="output"/>
                    </port>
                    <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="OJO: LEE el valor de MsgId, antes de cada iteracion incluso antes de lanza el evento de la Tabla.!!!&#10;&#10;&#10;Busco al destinatario (para generar el RREP o reenviar el RREQ)&#10;Busco al emisor, si es el 1er mensaje q recibo de un nodo vecino (a 1 salto de distancia)&#10; lo a?ado a la tabla&#10;&#10;Busco al fuente (nodo que quiere una ruta con el nodo destino) si no exite en la Tabla lo a?ado.&#10; si ya esta (p ej, si me llega el mensaje dsd varios nodos) no vuelvo a a?adirlo&#10;&#10;(el objetivo es optimizar la ruta en funcion del SeqN, por el momento me conformo con que se creen bien)">
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 495.0]">
                            </property>
                        </property>
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                        </property>
                        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                        </property>
                        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                        </property>
                        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
                            </property>
                        </property>
                        <port name="RouteTable" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="input"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 200.0]">
                            </property>
                        </port>
                        <port name="Responder" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 210.0]">
                            </property>
                        </port>
                        <port name="Sender" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[665.0, 265.0]">
                            </property>
                        </port>
                        <port name="Requester" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                            <property name="output"/>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="{665.0, 325.0}">
                            </property>
                        </port>
                        <entity name="Const" class="ptolemy.actor.lib.Const">
                            <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                            </property>
                            <doc>Create a constant sequence.</doc>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 360.0]">
                            </property>
                        </entity>
                        <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Responder)?(iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Sender)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 265.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(RouteTable.Dest==m.Data.Requester)? (iterationCount-1):0">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                                </property>
                                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 325.0]">
                            </property>
                            <port name="RouteTable" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                            <port name="m" class="ptolemy.actor.TypedIOPort">
                                <property name="input"/>
                            </port>
                        </entity>
                        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                            <doc>Monitor and display values</doc>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                                </property>
                                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                                </property>
                            </property>
                            <property name="_location" class="ptolemy.kernel.util.Location" value="[575.0, 425.0]">
                            </property>
                        </entity>
                        <relation name="relation" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[115.0, 200.0]">
                            </vertex>
                        </relation>
                        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                            <vertex name="vertex1" value="[240.0, 360.0]">
                            </vertex>
                        </relation>
                        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                            </property>
                        </relation>
                        <link port="RouteTable" relation="relation"/>
                        <link port="Responder" relation="relation3"/>
                        <link port="Sender" relation="relation5"/>
                        <link port="Requester" relation="relation4"/>
                        <link port="Const.output" relation="relation2"/>
                        <link port="Const.trigger" relation="relation"/>
                        <link port="Expression2.output" relation="relation3"/>
                        <link port="Expression2.RouteTable" relation="relation"/>
                        <link port="Expression2.m" relation="relation2"/>
                        <link port="Expression.output" relation="relation5"/>
                        <link port="Expression.RouteTable" relation="relation"/>
                        <link port="Expression.m" relation="relation2"/>
                        <link port="Expression3.output" relation="relation4"/>
                        <link port="Expression3.RouteTable" relation="relation"/>
                        <link port="Expression3.m" relation="relation2"/>
                        <link port="MonitorValue.input" relation="relation2"/>
                    </entity>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{IdReq=Msg.Data.IdReq, Requester=Msg.Data.Requester, Responder=Msg.Data.Responder}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, -40.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, -95.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-110.0, -100.0]">
                    </property>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0, -85.0]">
                    </property>
                </entity>
                <entity name="Expression5" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(mens.Data.Requester==mens.Sender)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 585.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="boolean">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression6" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 450.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression7" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(index==0)? true:false ">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[170.0, 515.0]">
                    </property>
                    <port name="index" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Multiplexor" class="ptolemy.actor.lib.Multiplexor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{820.0, 515.0}">
                    </property>
                    <property name="_flipPortsVertical" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </entity>
                <entity name="BooleanToAnything" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 450.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything2" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="2">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanToAnything3" class="ptolemy.actor.lib.conversions.BooleanToAnything">
                    <property name="trueValue" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 585.0]">
                    </property>
                </entity>
                <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 525.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend2" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[925.0, 400.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 465.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1015.0, 475.0]">
                    </property>
                </entity>
                <entity name="Expression8" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(sum&gt;0)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[890.0, 630.0]">
                    </property>
                    <port name="sum" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression9" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=0, Dest=0, Next=0, SeqN=0}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 615.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression13" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[490.0, 695.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression14" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Requester, Next=Msg.Sender, SeqN=Msg.Data.SeqN},{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 745.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Expression10" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=1, Dest=Msg.Sender, Next=Msg.Sender, SeqN=1}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 655.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[865.0, -45.0]">
                    </property>
                </entity>
                <entity name="ArraySum2" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 450.0]">
                    </property>
                </entity>
                <entity name="ArraySum3" class="ptolemy.actor.lib.ArraySum">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 515.0]">
                    </property>
                </entity>
                <entity name="BooleanSwitch2" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[620.0, -95.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-530.0, 115.0]">
                    </property>
                </entity>
                <entity name="Expression11" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="((table.Dest!=0)&amp;&amp;(table.SeqN&gt;= mens.Data.SeqN))?true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 870.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="table" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch3" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[985.0, 95.0]">
                    </property>
                </entity>
                <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 960.0]">
                    </property>
                </entity>
                <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1095.0, 290.0]">
                    </property>
                </entity>
                <entity name="MonitorValue3" class="ptolemy.actor.lib.gui.MonitorValue">
                    <doc>Monitor and display values</doc>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 1005.0]">
                    </property>
                </entity>
                <entity name="ArrayElement2" class="ptolemy.actor.lib.ArrayElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 805.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 205.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[195.0, 215.0]">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[610.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 75.0]">
                    </vertex>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 125.0]">
                    </vertex>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, 40.0]">
                    </vertex>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[845.0, 85.0]">
                    </vertex>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[80.0, 250.0]">
                    </vertex>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation13" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[410.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation15" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation16" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 585.0]">
                    </vertex>
                </relation>
                <relation name="relation18" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-45.0, 450.0]">
                    </vertex>
                </relation>
                <relation name="relation19" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-60.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation17" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation20" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation21" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation22" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation23" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation24" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation26" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-230.0, 340.0]">
                    </vertex>
                </relation>
                <relation name="relation28" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation29" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation27" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation30" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[765.0, 525.0]">
                    </vertex>
                </relation>
                <relation name="relation25" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation31" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation33" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation32" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation34" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation35" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation36" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[275.0, 615.0]">
                    </vertex>
                </relation>
                <relation name="relation37" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation39" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation41" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-225.0, -40.0]">
                    </vertex>
                </relation>
                <relation name="relation14" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation40" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation42" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{-450.0, 115.0}">
                    </vertex>
                </relation>
                <relation name="relation43" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation45" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{1050.0, 195.0}">
                    </vertex>
                </relation>
                <relation name="relation44" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[65.0, 515.0]">
                    </vertex>
                </relation>
                <relation name="relation38" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{365.0, 815.0}">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation37"/>
                <link port="Comm" relation="relation43"/>
                <link port="ArraySum.input" relation="relation4"/>
                <link port="ArraySum.output" relation="relation10"/>
                <link port="Expression.output" relation="relation5"/>
                <link port="Expression.mens" relation="relation7"/>
                <link port="Expression2.output" relation="relation11"/>
                <link port="Expression2.mens" relation="relation8"/>
                <link port="Expression3.output" relation="relation12"/>
                <link port="Expression3.mens" relation="relation6"/>
                <link port="Expression3.table" relation="relation2"/>
                <link port="ArrayElement.input" relation="relation"/>
                <link port="ArrayElement.output" relation="relation2"/>
                <link port="ArrayElement.index" relation="relation10"/>
                <link port="Const.output" relation="relation3"/>
                <link port="Const.trigger" relation="relation42"/>
                <link port="Const2.output" relation="relation"/>
                <link port="Const2.trigger" relation="relation42"/>
                <link port="BooleanMultiplexor.trueInput" relation="relation11"/>
                <link port="BooleanMultiplexor.falseInput" relation="relation12"/>
                <link port="BooleanMultiplexor.select" relation="relation5"/>
                <link port="BooleanMultiplexor.output" relation="relation9"/>
                <link port="IterateOverArray2.RouteTable" relation="relation"/>
                <link port="IterateOverArray2.Responder" relation="relation4"/>
                <link port="IterateOverArray2.Sender" relation="relation18"/>
                <link port="IterateOverArray2.Requester" relation="relation19"/>
                <link port="Expression4.output" relation="relation13"/>
                <link port="Expression4.Msg" relation="relation41"/>
                <link port="ArrayAppend.input" relation="relation15"/>
                <link port="ArrayAppend.input" relation="relation13"/>
                <link port="ArrayAppend.output" relation="relation14"/>
                <link port="Const3.output" relation="relation15"/>
                <link port="Const3.trigger" relation="relation42"/>
                <link port="SetVariable.input" relation="relation40"/>
                <link port="Expression5.output" relation="relation21"/>
                <link port="Expression5.mens" relation="relation16"/>
                <link port="Expression6.output" relation="relation17"/>
                <link port="Expression6.index" relation="relation39"/>
                <link port="Expression7.output" relation="relation20"/>
                <link port="Expression7.index" relation="relation44"/>
                <link port="Multiplexor.input" relation="relation31"/>
                <link port="Multiplexor.input" relation="relation33"/>
                <link port="Multiplexor.input" relation="relation32"/>
                <link port="Multiplexor.input" relation="relation34"/>
                <link port="Multiplexor.output" relation="relation28"/>
                <link port="Multiplexor.select" relation="relation30"/>
                <link port="BooleanToAnything.input" relation="relation17"/>
                <link port="BooleanToAnything.output" relation="relation22"/>
                <link port="BooleanToAnything2.input" relation="relation20"/>
                <link port="BooleanToAnything2.output" relation="relation23"/>
                <link port="BooleanToAnything3.input" relation="relation21"/>
                <link port="BooleanToAnything3.output" relation="relation24"/>
                <link port="AddSubtract.plus" relation="relation22"/>
                <link port="AddSubtract.plus" relation="relation23"/>
                <link port="AddSubtract.minus" relation="relation24"/>
                <link port="AddSubtract.output" relation="relation30"/>
                <link port="ArrayAppend2.input" relation="relation26"/>
                <link port="ArrayAppend2.input" relation="relation28"/>
                <link port="ArrayAppend2.output" relation="relation29"/>
                <link port="SetVariable2.input" relation="relation27"/>
                <link port="BooleanSwitch.input" relation="relation29"/>
                <link port="BooleanSwitch.control" relation="relation25"/>
                <link port="BooleanSwitch.trueOutput" relation="relation27"/>
                <link port="Expression8.output" relation="relation25"/>
                <link port="Expression8.sum" relation="relation30"/>
                <link port="Expression9.output" relation="relation31"/>
                <link port="Expression9.Msg" relation="relation36"/>
                <link port="Expression13.output" relation="relation32"/>
                <link port="Expression13.Msg" relation="relation36"/>
                <link port="Expression14.output" relation="relation34"/>
                <link port="Expression14.Msg" relation="relation36"/>
                <link port="Expression10.output" relation="relation33"/>
                <link port="Expression10.Msg" relation="relation36"/>
                <link port="Const4.output" relation="relation37"/>
                <link port="Const4.trigger" relation="relation9"/>
                <link port="ArraySum2.input" relation="relation18"/>
                <link port="ArraySum2.output" relation="relation39"/>
                <link port="ArraySum3.input" relation="relation19"/>
                <link port="ArraySum3.output" relation="relation44"/>
                <link port="BooleanSwitch2.input" relation="relation14"/>
                <link port="BooleanSwitch2.control" relation="relation5"/>
                <link port="BooleanSwitch2.falseOutput" relation="relation40"/>
                <link port="PoissonClock.output" relation="relation42"/>
                <link port="Expression11.output" relation="relation45"/>
                <link port="Expression11.mens" relation="relation35"/>
                <link port="Expression11.table" relation="relation38"/>
                <link port="BooleanSwitch3.input" relation="relation9"/>
                <link port="BooleanSwitch3.control" relation="relation45"/>
                <link port="BooleanSwitch3.falseOutput" relation="relation43"/>
                <link port="MonitorValue.input" relation="relation38"/>
                <link port="MonitorValue2.input" relation="relation45"/>
                <link port="MonitorValue3.input" relation="relation7"/>
                <link port="ArrayElement2.input" relation="relation26"/>
                <link port="ArrayElement2.output" relation="relation38"/>
                <link port="ArrayElement2.index" relation="relation44"/>
                <link relation1="relation" relation2="relation26"/>
                <link relation1="relation3" relation2="relation8"/>
                <link relation1="relation3" relation2="relation16"/>
                <link relation1="relation6" relation2="relation8"/>
                <link relation1="relation6" relation2="relation7"/>
                <link relation1="relation8" relation2="relation41"/>
                <link relation1="relation16" relation2="relation35"/>
                <link relation1="relation35" relation2="relation36"/>
            </entity>
            <entity name="GoodREP" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1288, 1004}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1073, 894]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{536.5, 447.0}">
                </property>
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 50.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 45.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1031.75, 670.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[896.75, 460.0]">
                    </property>
                </port>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="Table">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[586.75, 285.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="MsgId">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[166.75, 350.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="ActiveREQ">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[636.75, 140.0]">
                    </property>
                </entity>
                <entity name="ArrayRemoveElement" class="ptolemy.actor.lib.ArrayRemoveElement">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[811.75, 150.0]">
                    </property>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{IdReq=msg.Data.IdReq, Responder=msg.Data.Responder, Requester=msg.Data.Requester}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[476.75, 200.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[926.75, 150.0]">
                    </property>
                </entity>
                <entity name="ArrayAppend" class="ptolemy.actor.lib.ArrayAppend">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[846.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{{NoH=Msg.Data.NoH, Dest=Msg.Data.Responder, Next=Msg.Sender, SeqN=Msg.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[486.75, 350.0]">
                    </property>
                    <port name="Msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[951.75, 290.0]">
                    </property>
                </entity>
                <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(NodeId==msg.Data.Requester)? true:false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[426.75, 580.0]">
                    </property>
                    <port name="msg" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[786.75, 450.0]">
                    </property>
                </entity>
                <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{Sender=NodeId, Type=&quot;RREP&quot;, Data={Responder=mens.Data.Responder, Requester=mens.Data.Requester, Lifetime=mens.Data.Lifetime-10, IdReq=mens.Data.IdReq, NoH=mens.Data.NoH+1, SeqN=mens.Data.SeqN}}">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[506.75, 450.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                        </property>
                    </port>
                    <port name="mens" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[406.75, 670.0]">
                    </property>
                </entity>
                <entity name="PoissonClock" class="ptolemy.actor.lib.PoissonClock">
                    <property name="meanTime" class="ptolemy.data.expr.Parameter" value="3.0">
                    </property>
                    <property name="values" class="ptolemy.data.expr.Parameter" value="{1}">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 350.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[246.75, 350.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation12" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <link port="NextState" relation="relation11"/>
                <link port="Comm" relation="relation9"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation5"/>
                <link port="Const.output" relation="relation5"/>
                <link port="Const.trigger" relation="relation12"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation5"/>
                <link port="ArrayRemoveElement.array" relation="relation"/>
                <link port="ArrayRemoveElement.output" relation="relation4"/>
                <link port="ArrayRemoveElement.element" relation="relation3"/>
                <link port="Expression.output" relation="relation3"/>
                <link port="Expression.msg" relation="relation5"/>
                <link port="SetVariable.input" relation="relation4"/>
                <link port="ArrayAppend.input" relation="relation2"/>
                <link port="ArrayAppend.input" relation="relation6"/>
                <link port="ArrayAppend.output" relation="relation7"/>
                <link port="Expression2.output" relation="relation6"/>
                <link port="Expression2.Msg" relation="relation5"/>
                <link port="SetVariable2.input" relation="relation7"/>
                <link port="Expression3.output" relation="relation8"/>
                <link port="Expression3.msg" relation="relation5"/>
                <link port="BooleanSwitch.input" relation="relation10"/>
                <link port="BooleanSwitch.control" relation="relation8"/>
                <link port="BooleanSwitch.falseOutput" relation="relation9"/>
                <link port="Expression4.output" relation="relation10"/>
                <link port="Expression4.mens" relation="relation5"/>
                <link port="Const4.output" relation="relation11"/>
                <link port="Const4.trigger" relation="relation5"/>
                <link port="PoissonClock.output" relation="relation12"/>
            </entity>
            <entity name="ini" class="ptolemy.domains.modal.modal.Refinement">
                <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-585.0, -15.0]">
                    </property>
                </property>
                <port name="CommIn" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, -5.0]">
                    </property>
                </port>
                <port name="NextState" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 400.0]">
                    </property>
                </port>
                <port name="Comm" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 35.0]">
                    </property>
                </port>
                <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="MsgId">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-245.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const3" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{Dest = 0, Next = 0, NoH = 0, SeqN = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-260.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Table">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 160.0]">
                    </property>
                </entity>
                <entity name="SetVariable3" class="ptolemy.actor.lib.SetVariable">
                    <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="ActiveREQ">
                    </property>
                    <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 215.0]">
                    </property>
                </entity>
                <entity name="Const4" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{Data = {IdReq = 0, Lifetime = 0, NoH = 0, Requester = 0, Responder =0, SeqN = 0}, Sender = 0, Type = &quot; &quot;}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-210.0, 105.0]">
                    </property>
                </entity>
                <entity name="Const5" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-310.0, 400.0]">
                    </property>
                </entity>
                <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
                    <property name="time" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-590.0, 275.0]">
                    </property>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="{{IdReq = 0, Requester = 0, Responder = 0}}">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-230.0, 275.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="[-410.0, 275.0]">
                    </vertex>
                </relation>
                <link port="NextState" relation="relation4"/>
                <link port="SetVariable.input" relation="relation3"/>
                <link port="Const2.output" relation="relation2"/>
                <link port="Const2.trigger" relation="relation6"/>
                <link port="Const3.output" relation="relation"/>
                <link port="Const3.trigger" relation="relation6"/>
                <link port="SetVariable2.input" relation="relation"/>
                <link port="SetVariable3.input" relation="relation2"/>
                <link port="Const4.output" relation="relation3"/>
                <link port="Const4.trigger" relation="relation6"/>
                <link port="Const5.output" relation="relation4"/>
                <link port="Const5.trigger" relation="relation6"/>
                <link port="SingleEvent.output" relation="relation6"/>
                <link port="Const.trigger" relation="relation6"/>
            </entity>
            <relation name="CommInRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="NextStateRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <relation name="CommRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                </property>
            </relation>
            <link port="CommIn" relation="CommInRelation"/>
            <link port="NextState" relation="NextStateRelation"/>
            <link port="Comm" relation="CommRelation"/>
            <link port="_Controller.CommIn" relation="CommInRelation"/>
            <link port="_Controller.NextState" relation="NextStateRelation"/>
            <link port="_Controller.Comm" relation="CommRelation"/>
            <link port="Free.CommIn" relation="CommInRelation"/>
            <link port="Free.NextState" relation="NextStateRelation"/>
            <link port="Free.Comm" relation="CommRelation"/>
            <link port="RepetedREQ.CommIn" relation="CommInRelation"/>
            <link port="RepetedREQ.NextState" relation="NextStateRelation"/>
            <link port="RepetedREQ.Comm" relation="CommRelation"/>
            <link port="NewREQ.CommIn" relation="CommInRelation"/>
            <link port="NewREQ.NextState" relation="NextStateRelation"/>
            <link port="NewREQ.Comm" relation="CommRelation"/>
            <link port="GoodREP.CommIn" relation="CommInRelation"/>
            <link port="GoodREP.NextState" relation="NextStateRelation"/>
            <link port="GoodREP.Comm" relation="CommRelation"/>
            <link port="ini.CommIn" relation="CommInRelation"/>
            <link port="ini.NextState" relation="NextStateRelation"/>
            <link port="ini.Comm" relation="CommRelation"/>
        </entity>
        <entity name="MonitorValue" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1495.0, -570.0]">
            </property>
        </entity>
        <entity name="MonitorValue2" class="ptolemy.actor.lib.gui.MonitorValue">
            <doc>Monitor and display values</doc>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.UpdatedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="displayWidth">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1320.0, -650.0]">
            </property>
        </entity>
        <entity name="Display" class="ptolemy.actor.lib.gui.Display">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={161, 343, 128, 320}, maximized=false}">
            </property>
            <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[128, 276]">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1360.0, -840.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="SeqN">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-1295, -705}">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="i+1">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1235.0, -705.0]">
            </property>
            <port name="i" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="SeqN">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-1155.0, -705.0]">
            </property>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1465.0, -745.0]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
            <vertex name="vertex1" value="[-1605.0, -700.0]">
            </vertex>
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="1">
            </property>
        </relation>
        <link port="CommOut" relation="relation2"/>
        <link port="ComIn" relation="relation3"/>
        <link port="ModalModel.CommIn" relation="relation3"/>
        <link port="ModalModel.NextState" relation="relation"/>
        <link port="ModalModel.Comm" relation="relation2"/>
        <link port="MonitorValue.input" relation="relation3"/>
        <link port="MonitorValue2.input" relation="relation2"/>
        <link port="Display.input" relation="relation"/>
        <link port="Const.output" relation="relation4"/>
        <link port="Const.trigger" relation="relation2"/>
        <link port="Expression.output" relation="relation5"/>
        <link port="Expression.i" relation="relation4"/>
        <link port="SetVariable.input" relation="relation5"/>
    </entity>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <vertex name="vertex1" value="[-25.0, 290.0]">
        </vertex>
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
    </relation>
    <link port="SingleEvent.output" relation="relation3"/>
    <link port="Const.output" relation="relation"/>
    <link port="Const.trigger" relation="relation3"/>
    <link port="Const2.output" relation="relation2"/>
    <link port="Const2.trigger" relation="relation3"/>
    <link port="WiredToWireless.payload" relation="relation"/>
    <link port="WiredToWireless.properties" relation="relation2"/>
    <link port="WirelessToWired.payload" relation="relation4"/>
    <link port="Display.input" relation="relation4"/>
    <link port="Display.input" relation="relation7"/>
    <link port="Display.input" relation="relation5"/>
    <link port="WirelessToWired2.payload" relation="relation7"/>
    <link port="WirelessToWired3.payload" relation="relation5"/>
</entity>
