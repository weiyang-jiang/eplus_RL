<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="RailroadControl" class="ptolemy.actor.TypedCompositeActor">
    <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="11">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0,0.2,0.2,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="The undesired behavior is to have the gate open when the train is crossing the gate.&#10;We want to check whether this undesired behavior can occur. To do this, we state&#10;the problem as a model-checking problem. We generate automatically a model of the&#10;system using the Formal Model Converter. We can also specify formally the property&#10;that this model must satisfy, as a temporal logic property, for instance. Then we&#10;use a model-checker to check that the model satisfies the property.&#10;&#10;Using the Formal Model Converter with the model-checker NuSMV:&#10;- double click on the Formal Model Converter box&#10;- specify the Target File where the NuSMV model is to be stored&#10;- select Kripke Structures as Model Type&#10;- select CTL as Formula Type&#10;- select Text Only as Output Type&#10;- copy the following CTL formula in the Temporal Formula field:&#10;           !EF (Train.state=within &amp; Gate.state=open)&#10;- click Convert: you should get a file with the Kripke model &#10;- run NuSMV on the file you just generated, e.g.:&#10;            /myPath/NuSMV myTargetFile.kripke&#10;- you should get as output that the formula is true on this model&#10;&#10;Using the Formal Model Converter with the model-checker Real-Time Maude:&#10;- follow steps similar to the above, except that you should:&#10;- select Real Time Maude Translation&#10;- copy the following formula in the Temporal Formula field:&#10;           [] ~ ('Train @ 'within /\ 'Gate @ 'open)&#10;- run rtmaude as follows:&#10;           /myPath/maude real-time-maude.maude&#10;           Maude&gt; load myTargetFile.rtmaude&#10;">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-20.0, 310.0]">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Closing" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 135.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="226.0">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="86.0">
        </property>
        <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="(Tapproaching == 1 &amp;&amp; Gopen == 0) ? {1.0, 0.0, 0.0, 1.0} : {1.0, 1.0, 1.0, 1.0}">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Image6" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[595.0, 355.0]">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Leaving" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 345.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="231.0">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="86.0">
        </property>
        <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="(Tleave == 1 &amp; Gopen == 0 ) ? {1.0, 0.0, 0.0, 1.0} : {1.0, 1.0, 1.0, 1.0}">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Image7" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 355.0]">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Image5" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[595.0, 355.0]">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="8.0.beta">
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={30, 30, 1032, 953}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 820]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{374.8181818181818, 397.1273674242424}">
    </property>
    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
    </property>
    <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="12">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This is a simplified railroad system which simulates the &#10;interplay between a train and a crossing gate. When the &#10;train is approaching, it emits a signal to the gate and &#10;forces the gate to close. When it leaves the railroad &#10;crossing, it emits a signal to the gate to notify its &#10;leaving. In the right hand side is a simplified simulation, &#10;where the senerio is decided by signals emited">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[110.0, 185.0]">
        </property>
    </property>
    <property name="Gate Open" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 30.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="226.0">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="86.0">
        </property>
        <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="(Gopen == 1) ? {1.0, 0.0, 0.0, 1.0} : {1.0, 1.0, 1.0, 1.0}">
        </property>
    </property>
    <property name="Image" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_gate_up.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 40.0]">
        </property>
    </property>
    <property name="Image2" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 40.0]">
        </property>
    </property>
    <property name="Image3" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[585.0, 40.0]">
        </property>
    </property>
    <property name="Image4" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_gate_down.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 355.0]">
        </property>
    </property>
    <property name="Image8" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[580.0, 145.0]">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Image9" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_gate_down.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 145.0]">
        </property>
    </property>
    <property name="Image10" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_train.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[590.0, 145.0]">
        </property>
    </property>
    <property name="Image11" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 145.0]">
        </property>
    </property>
    <property name="Image12" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_train.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{465.0, 355.0}">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Image13" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[590.0, 40.0]">
        </property>
    </property>
    <property name="Image14" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[595.0, 250.0]">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Within" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 240.0]">
        </property>
        <property name="width" class="ptolemy.data.expr.Parameter" value="231.0">
        </property>
        <property name="height" class="ptolemy.data.expr.Parameter" value="86.0">
        </property>
        <property name="fillColor" class="ptolemy.actor.gui.ColorAttribute" value="(Tin == 1 &amp; Gopen == 0) ? {1.0, 0.0, 0.0, 1.0} : {1.0, 1.0, 1.0, 1.0}">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Image15" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 250.0]">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Image16" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[595.0, 250.0]">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Image17" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_train_crossing.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 250.0]">
        </property>
    </property>
    <property name="Image18" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
        <property name="source" class="ptolemy.data.expr.FileParameter" value="image/s_plain.GIF">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[465.0, 250.0]">
        </property>
        <property name="_renderFirst" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
    </property>
    <property name="Gopen" class="ptolemy.data.expr.Parameter" value="1">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[645.0, 455.0]">
        </property>
    </property>
    <property name="Tin" class="ptolemy.data.expr.Parameter" value="1">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 455.0]">
        </property>
    </property>
    <property name="Tleave" class="ptolemy.data.expr.Parameter" value="1">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[575.0, 455.0]">
        </property>
    </property>
    <property name="Tapproaching" class="ptolemy.data.expr.Parameter" value="1">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[415.0, 455.0]">
        </property>
    </property>
    <property name="SR Director" class="ptolemy.domains.sr.kernel.SRDirector">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[45.0, 40.0]">
        </property>
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.4,0.4,0.4,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Authors: Chihhong Patrick Cheng, Edward A. Lee, Christopher Brooks">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[425.0, 490.0]">
        </property>
    </property>
    <property name="Formal Model Converter" class="ptolemy.verification.kernel.MathematicalModelConverter">
        <property name="target" class="ptolemy.data.expr.FileParameter" value="rr.rtmaude">
            <display name="Target File"/>
        </property>
        <property name="modelType" class="ptolemy.data.expr.ChoiceParameter" value="Real-time Maude Translation(under SR or DE)">
            <display name="Model Type"/>
        </property>
        <property name="Output Type" class="ptolemy.data.expr.ChoiceParameter" value="Text Only">
            <display name="Output Type"/>
        </property>
        <property name="formula" class="ptolemy.data.expr.StringParameter" value="[] ~ ('Train @ 'within /\ 'Gate @ 'open)">
            <display name="Temporal Formula"/>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{45.0, 205.0}">
        </property>
    </property>
    <entity name="Train" class="ptolemy.domains.modal.kernel.FSMActor">
        <property name="_library" class="ptolemy.moml.LibraryAttribute">
            <configure>
    <entity name="StateLibrary" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="State" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property></entity></entity>
  </configure>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 120.0]">
        </property>
        <property name="distance" class="ptolemy.data.expr.Parameter" value="10">
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[45.0, 30.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={292, 258, 815, 533}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{300.0, 200.0}">
        </property>
        <port name="Tin" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 85.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="Tleave" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 130.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="Tapproaching" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 170.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="Sec" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 265.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <entity name="Tinit" class="ptolemy.domains.modal.kernel.State">
            <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[261.9159235777115, 72.47087415586111]">
            </property>
        </entity>
        <entity name="far" class="ptolemy.domains.modal.kernel.State">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[416.91592357771157, 127.47087415586111]">
            </property>
        </entity>
        <entity name="approaching" class="ptolemy.domains.modal.kernel.State">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[495.0, 235.0]">
            </property>
        </entity>
        <entity name="within" class="ptolemy.domains.modal.kernel.State">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[381.9159235777115, 287.4708741558611]">
            </property>
        </entity>
        <entity name="leaving" class="ptolemy.domains.modal.kernel.State">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[271.9159235777115, 212.4708741558611]">
            </property>
        </entity>
        <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Sec_isPresent &amp;&amp; distance &gt; 10">
            </property>
            <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="Tin = 0; Tleave = 0; Tapproaching = 0">
            </property>
            <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="distance = -10">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.39988609959717314">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.4789975728775509">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
            </property>
            <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="Tin = 0; Tleave = 0; Tapproaching = 0">
            </property>
            <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="distance = -10">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.6573693516317907">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.21369161901024464">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Sec_isPresent &amp;&amp; distance &gt;= -3">
            </property>
            <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="Tapproaching = 1 ">
            </property>
            <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="distance = distance + 1">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.4862364487379796">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.989554411645982">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Sec_isPresent &amp;&amp; distance == 0">
            </property>
            <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="Tin = 1">
            </property>
            <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="distance = distance + 1">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.5118407943899019">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.9731319693568843">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Sec_isPresent &amp;&amp; distance &gt;= 3">
            </property>
            <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="Tleave = 1 ">
            </property>
            <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="distance = distance + 1">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.32661321627216267">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.5632786246226784">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Sec_isPresent &amp;&amp; distance&lt;-3">
            </property>
            <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="distance = distance + 2">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.474017772583677">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.516459259748201">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation7" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Sec_isPresent &amp;&amp; distance &lt; 3">
            </property>
            <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="distance = distance + 1">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.356194490192345">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.07287197552992447">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation8" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Sec_isPresent &amp;&amp; distance &lt; 0">
            </property>
            <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="distance = distance + 1">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.601077214362448">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.6912680764281907">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation9" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Sec_isPresent &amp;&amp; distance &lt;= 10">
            </property>
            <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="distance = distance + 1">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.477507768113079">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.5155263931332832">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <link port="Tinit.outgoingPort" relation="relation2"/>
        <link port="far.incomingPort" relation="relation"/>
        <link port="far.incomingPort" relation="relation2"/>
        <link port="far.incomingPort" relation="relation6"/>
        <link port="far.outgoingPort" relation="relation3"/>
        <link port="far.outgoingPort" relation="relation6"/>
        <link port="approaching.incomingPort" relation="relation3"/>
        <link port="approaching.incomingPort" relation="relation8"/>
        <link port="approaching.outgoingPort" relation="relation4"/>
        <link port="approaching.outgoingPort" relation="relation8"/>
        <link port="within.incomingPort" relation="relation4"/>
        <link port="within.incomingPort" relation="relation7"/>
        <link port="within.outgoingPort" relation="relation5"/>
        <link port="within.outgoingPort" relation="relation7"/>
        <link port="leaving.incomingPort" relation="relation5"/>
        <link port="leaving.incomingPort" relation="relation9"/>
        <link port="leaving.outgoingPort" relation="relation"/>
        <link port="leaving.outgoingPort" relation="relation9"/>
    </entity>
    <entity name="Gate" class="ptolemy.domains.modal.kernel.FSMActor">
        <property name="_library" class="ptolemy.moml.LibraryAttribute">
            <configure>
    <entity name="StateLibrary" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="State" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property></entity></entity>
  </configure>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[390.0, 65.0]">
        </property>
        <port name="Tin" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 125.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="Tleave" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 185.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="Tapproaching" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 75.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <port name="Gopen" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, 235.0]">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
            </property>
        </port>
        <entity name="Ginit" class="ptolemy.domains.modal.kernel.State">
            <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{155.0, 115.0}">
            </property>
        </entity>
        <entity name="open" class="ptolemy.domains.modal.kernel.State">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[295.0, 145.0]">
            </property>
        </entity>
        <entity name="closed" class="ptolemy.domains.modal.kernel.State">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[295.0, 265.0]">
            </property>
        </entity>
        <entity name="closing" class="ptolemy.domains.modal.kernel.State">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[400.0, 205.0]">
            </property>
        </entity>
        <entity name="opening" class="ptolemy.domains.modal.kernel.State">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[185.0, 200.0]">
            </property>
        </entity>
        <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
            </property>
            <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="Gopen = 1">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.4470744346691727">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.20947741696068853">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Tapproaching_isPresent">
            </property>
            <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="Gopen = 0">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.22153432114003657">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.39061552807922784">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Tin_isPresent">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.23550821115512505">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.7231978262165186">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="Tleave_isPresent">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.37262908060730693">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.6810861950246707">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
            <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
            </property>
            <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
            </property>
            <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="Gopen = 1">
            </property>
            <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.2671200644903232">
            </property>
            <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.4262690871594186">
            </property>
            <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </relation>
        <link port="Ginit.outgoingPort" relation="relation"/>
        <link port="open.incomingPort" relation="relation"/>
        <link port="open.incomingPort" relation="relation5"/>
        <link port="open.outgoingPort" relation="relation2"/>
        <link port="closed.incomingPort" relation="relation3"/>
        <link port="closed.outgoingPort" relation="relation4"/>
        <link port="closing.incomingPort" relation="relation2"/>
        <link port="closing.outgoingPort" relation="relation3"/>
        <link port="opening.incomingPort" relation="relation4"/>
        <link port="opening.outgoingPort" relation="relation5"/>
    </entity>
    <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
        <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Tapproaching">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[295.0, 160.0]">
        </property>
    </entity>
    <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
        <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Tleave">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 110.0]">
        </property>
    </entity>
    <entity name="SetVariable3" class="ptolemy.actor.lib.SetVariable">
        <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Tin">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[205.0, 60.0]">
        </property>
    </entity>
    <entity name="SetVariable4" class="ptolemy.actor.lib.SetVariable">
        <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="Gopen">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[385.0, 130.0]">
        </property>
    </entity>
    <entity name="Ramp" class="ptolemy.actor.lib.Ramp">
        <property name="firingCountLimit" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <doc>Create a sequence of tokens with increasing value</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 120.0]">
        </property>
    </entity>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <vertex name="vertex1" value="[160.0, 35.0]">
        </vertex>
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <vertex name="vertex1" value="[225.0, 130.0]">
        </vertex>
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <vertex name="vertex1" value="[200.0, 85.0]">
        </vertex>
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="1">
        </property>
    </relation>
    <link port="Train.Tin" relation="relation"/>
    <link port="Train.Tleave" relation="relation3"/>
    <link port="Train.Tapproaching" relation="relation2"/>
    <link port="Train.Sec" relation="relation5"/>
    <link port="Gate.Tin" relation="relation"/>
    <link port="Gate.Tleave" relation="relation3"/>
    <link port="Gate.Tapproaching" relation="relation2"/>
    <link port="Gate.Gopen" relation="relation4"/>
    <link port="SetVariable.input" relation="relation2"/>
    <link port="SetVariable2.input" relation="relation3"/>
    <link port="SetVariable3.input" relation="relation"/>
    <link port="SetVariable4.input" relation="relation4"/>
    <link port="Ramp.output" relation="relation5"/>
</entity>
