<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="HeaterOpenTank" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="10.0.devel">
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={34, 22, 984, 710}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[750, 600]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.1342497030283396">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{310.2068299529944, 153.08095539911218}">
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Model of a tank, a pump and a heater that &#10;forms an algebraic loop on the mass flow rate.&#10;&#10;This implementation is less efficient than HeaterOpenTankRefactored.xml&#10;because each time the integrator changes the value of T, the mass &#10;flow rate is recomputed by solving an algebraic loop.&#10;However, the mass flow rate does not depend on the T.&#10;This situation is caused because the tank is modeled in a composite&#10;actor, and hence has as an input the temperature, mass flow rate and pressure.&#10;Therefore, the event of the integrator cause the algebraic loop solver to recompute&#10;the solution.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, -45.0]">
        </property>
    </property>
    <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.4,0.4,0.4,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Author: Michael Wetter">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 315.0]">
        </property>
    </property>
    <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
        <property name="startTime" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="180">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[45.0, -70.0]">
        </property>
    </property>
    <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-5">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[155.0, -75.0]">
        </property>
    </property>
    <entity name="CompositeActor" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[250.0, 235.0]">
        </property>
        <property name="AlgebraicLoopDirector" class="ptolemy.domains.algebraic.kernel.AlgebraicLoopDirector">
            <property name="method" class="ptolemy.data.expr.StringParameter" value="NewtonRaphson">
            </property>
            <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="1000">
            </property>
            <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="errorTolerance">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 25.0]">
            </property>
        </property>
        <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="errorTolerance">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[150.0, 15.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={166, 53, 934, 634}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 524]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.268359583963121">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{265.00488281250006, 196.916895946558}">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Ports to connect integrator.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 340.0]">
            </property>
        </property>
        <port name="TSet" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 100.0]">
            </property>
        </port>
        <port name="m_flow" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[215.0, 300.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="TTank" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[220.0, 65.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="dT_dt_tank" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[150.0, 325.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="T_tank" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 325.0]">
            </property>
        </port>
        <entity name="Tank" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 165.0]">
            </property>
            <property name="Mass" class="ptolemy.data.expr.Parameter" value="1">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{-5.0, 280.0}">
                </property>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={39, 22, 851, 634}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[617, 300]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.6927768606138438">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{425.0919993936863, 483.0506495507316}">
            </property>
            <property name="_layoutConfiguration" class="ptolemy.vergil.basic.layout.ActorLayoutConfiguration">
            </property>
            <property name="pAtm" class="ptolemy.data.expr.Parameter" value="101325">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{170.0, 280.0}">
                </property>
            </property>
            <property name="k" class="ptolemy.data.expr.Parameter" value="1.0e4">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{80.0, 280.0}">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Ports to connect integrator, &#10;and to send T out of the component.&#10;&#10;The port T_tank is not needed, but&#10;was added so that each of the three&#10;components have p, m_dot and T&#10;as input and output signals.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[255.0, 545.0]">
                </property>
            </property>
            <port name="T_tank" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[215.0, 615.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="T_in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 330.0}">
                </property>
            </port>
            <port name="m_in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 430.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="m_out" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{780.0, 400.0}">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="p_out" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 330.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="p_in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 390.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="dT_dt_tank" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, 510.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="T" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 505.0]">
                </property>
            </port>
            <entity name="dp" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{485.0, 400.0}">
                </property>
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="defaultValue" class="ptolemy.data.expr.Parameter" value="101300.0">
                    </property>
                </port>
            </entity>
            <entity name="Const2" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="pAtm">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{240.0, 330.0}">
                </property>
            </entity>
            <entity name="Expression" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(Tin - T)*m/Mass">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                    <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{235.0, 465.0}">
                </property>
                <port name="Tin" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="m" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="T" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="sgn(deltap)*sqrt(abs(deltap/k))">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                    <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{650.0, 400.0}">
                </property>
                <port name="deltap" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <relation name="relation15" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="{410.0, 330.0}">
                </vertex>
                <property name="_layoutHint" class="ptolemy.vergil.actor.LayoutHint" value="{ { head={id=&quot;dp.minus&quot;,x=485.0,y=400.0}, tail={id=&quot;relation15.vertex1&quot;,x=410.0,y=330.0}, points={410.0,410.0} },{ head={id=&quot;Const2.output&quot;,x=240.0,y=330.0}, tail={id=&quot;relation15.vertex1&quot;,x=410.0,y=330.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.actor.LayoutHint" value="{ { head={id=&quot;m_out._location&quot;,x=780.0,y=400.0}, tail={id=&quot;Expression2.output&quot;,x=650.0,y=400.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.actor.LayoutHint" value="{ { head={id=&quot;dp.output&quot;,x=485.0,y=400.0}, tail={id=&quot;Expression2.deltap&quot;,x=650.0,y=400.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="{145.0, 330.0}">
                </vertex>
                <property name="_layoutHint" class="ptolemy.vergil.actor.LayoutHint" value="{ { head={id=&quot;.MostRecent_TIn.input&quot;,x=300.0,y=440.0}, tail={id=&quot;relation9.vertex1&quot;,x=65.0,y=690.0}, points={65.0,440.0} },{ head={id=&quot;.MostRecent_TIn.trigger&quot;,x=300.0,y=440.0,index=3}, tail={id=&quot;relation9.vertex1&quot;,x=65.0,y=690.0}, points={305.0,630.0,65.0,630.0} },{ head={id=&quot;.MostRecent_mdot.trigger&quot;,x=130.0,y=570.0,index=2}, tail={id=&quot;relation9.vertex1&quot;,x=65.0,y=690.0}, points={135.0,690.0} },{ head={id=&quot;Expression.Tin&quot;,x=235.0,y=465.0}, tail={id=&quot;relation9.vertex1&quot;,x=145.0,y=330.0}, points={145.0,455.0} },{ head={id=&quot;T_in._location&quot;,x=0.0,y=330.0}, tail={id=&quot;relation9.vertex1&quot;,x=145.0,y=330.0}, points={} },{ head={id=&quot;Const2.trigger&quot;,x=240.0,y=330.0}, tail={id=&quot;relation9.vertex1&quot;,x=145.0,y=330.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[150.0, 505.0]">
                </vertex>
            </relation>
            <link port="T_tank" relation="relation5"/>
            <link port="T_in" relation="relation9"/>
            <link port="m_in" relation="relation"/>
            <link port="m_out" relation="relation6"/>
            <link port="p_out" relation="relation15"/>
            <link port="p_in" relation="relation7"/>
            <link port="dT_dt_tank" relation="relation2"/>
            <link port="T" relation="relation5"/>
            <link port="dp.plus" relation="relation7"/>
            <link port="dp.minus" relation="relation15"/>
            <link port="dp.output" relation="relation4"/>
            <link port="Const2.output" relation="relation15"/>
            <link port="Const2.trigger" relation="relation9"/>
            <link port="Expression.output" relation="relation2"/>
            <link port="Expression.Tin" relation="relation9"/>
            <link port="Expression.m" relation="relation"/>
            <link port="Expression.T" relation="relation5"/>
            <link port="Expression2.output" relation="relation6"/>
            <link port="Expression2.deltap" relation="relation4"/>
        </entity>
        <entity name="Pump" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 165.0]">
            </property>
            <property name="p0" class="ptolemy.data.expr.Parameter" value="10000.0">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 280.0]">
                </property>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={688, 86, 722, 443}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 524]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.2002813159334218">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{289.4326171874997, 478.1164713541667}">
            </property>
            <property name="_layoutConfiguration" class="ptolemy.vergil.basic.layout.ActorLayoutConfiguration">
            </property>
            <property name="m0" class="ptolemy.data.expr.Parameter" value="0.2">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 310.0]">
                </property>
            </property>
            <port name="T_in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 380.0]">
                </property>
            </port>
            <port name="T_out" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[545.0, 380.0]">
                </property>
            </port>
            <port name="m_in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 460.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="m_out" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 460.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="p_in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 575.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="p_out" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[545.0, 565.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="Expression" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="p0 + p_in - m_in*p0/m0">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                    <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[285.0, 565.0]">
                </property>
                <port name="m_in" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="p_in" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[190.0, 460.0]">
                </vertex>
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="T_in" relation="relation"/>
            <link port="T_out" relation="relation"/>
            <link port="m_in" relation="relation6"/>
            <link port="m_out" relation="relation6"/>
            <link port="p_in" relation="relation7"/>
            <link port="p_out" relation="relation3"/>
            <link port="Expression.output" relation="relation3"/>
            <link port="Expression.m_in" relation="relation6"/>
            <link port="Expression.p_in" relation="relation7"/>
        </entity>
        <entity name="Heater" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{387.0, 162.0}">
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={655, 22, 672, 516}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 524]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.2548529291623303">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{296.9326171875, 478.5529240262681}">
            </property>
            <property name="_layoutConfiguration" class="ptolemy.vergil.basic.layout.ActorLayoutConfiguration">
            </property>
            <property name="k" class="ptolemy.data.expr.Parameter" value="1.0E6">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 280.0]">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Ideal heater.  Temperature out equals the set point.&#10;Mass out equals mass in.  Pressure out depends on&#10;mass in and pressure in.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 280.0]">
                </property>
            </property>
            <port name="TSet" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 345.0]">
                </property>
            </port>
            <port name="T_in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 395.0]">
                </property>
            </port>
            <port name="T_out" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 380.0]">
                </property>
            </port>
            <port name="m_in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 460.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="m_out" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 460.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="p_in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 575.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="p_out" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 565.0]">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="Expression" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="p_in - k*m_in*abs(m_in)">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                    <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[230.0, 565.0]">
                </property>
                <port name="m_in" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="p_in" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
            </entity>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[90.0, 460.0]">
                </vertex>
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="TSet" relation="relation"/>
            <link port="T_out" relation="relation"/>
            <link port="m_in" relation="relation6"/>
            <link port="m_out" relation="relation6"/>
            <link port="p_in" relation="relation9"/>
            <link port="p_out" relation="relation4"/>
            <link port="Expression.output" relation="relation4"/>
            <link port="Expression.m_in" relation="relation6"/>
            <link port="Expression.p_in" relation="relation9"/>
        </entity>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="{2.0, 242.0}">
            </vertex>
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="{15.0, 225.0}">
            </vertex>
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="{32.0, 207.0}">
            </vertex>
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[170.0, 145.0]">
            </vertex>
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[170.0, 160.0]">
            </vertex>
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="TSet" relation="relation10"/>
        <link port="m_flow" relation="relation2"/>
        <link port="TTank" relation="relation"/>
        <link port="dT_dt_tank" relation="relation12"/>
        <link port="T_tank" relation="relation11"/>
        <link port="Tank.T_tank" relation="relation"/>
        <link port="Tank.T_in" relation="relation7"/>
        <link port="Tank.m_in" relation="relation8"/>
        <link port="Tank.m_out" relation="relation2"/>
        <link port="Tank.p_out" relation="relation3"/>
        <link port="Tank.p_in" relation="relation9"/>
        <link port="Tank.dT_dt_tank" relation="relation12"/>
        <link port="Tank.T" relation="relation11"/>
        <link port="Pump.T_in" relation="relation"/>
        <link port="Pump.T_out" relation="relation4"/>
        <link port="Pump.m_in" relation="relation2"/>
        <link port="Pump.m_out" relation="relation5"/>
        <link port="Pump.p_in" relation="relation3"/>
        <link port="Pump.p_out" relation="relation6"/>
        <link port="Heater.TSet" relation="relation10"/>
        <link port="Heater.T_in" relation="relation4"/>
        <link port="Heater.T_out" relation="relation7"/>
        <link port="Heater.m_in" relation="relation5"/>
        <link port="Heater.m_out" relation="relation8"/>
        <link port="Heater.p_in" relation="relation6"/>
        <link port="Heater.p_out" relation="relation9"/>
    </entity>
    <entity name="TSet" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 180.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={253, 133, 934, 634}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 524]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{777.0, 461.29296875}">
        </property>
        <port name="port" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{640.0, 255.0}">
            </property>
        </port>
        <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
            <property name="value" class="ptolemy.data.expr.Parameter" value="20">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{475.0, 245.0}">
            </property>
        </entity>
        <entity name="Merge" class="ptolemy.domains.de.lib.Merge">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{590.0, 255.0}">
            </property>
        </entity>
        <entity name="SingleEvent3" class="ptolemy.actor.lib.SingleEvent">
            <property name="time" class="ptolemy.data.expr.Parameter" value="60">
            </property>
            <property name="value" class="ptolemy.data.expr.Parameter" value="30.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[475.0, 315.0]">
            </property>
        </entity>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <property name="_layoutHint" class="ptolemy.vergil.actor.LayoutHint" value="{ { head={id=&quot;port._location&quot;,x=640.0,y=255.0}, tail={id=&quot;Merge.output&quot;,x=590.0,y=255.0}, points={} } }">
            </property>
        </relation>
        <link port="port" relation="relation"/>
        <link port="SingleEvent.output" relation="relation10"/>
        <link port="Merge.input" relation="relation10"/>
        <link port="Merge.input" relation="relation12"/>
        <link port="Merge.output" relation="relation"/>
        <link port="SingleEvent3.output" relation="relation12"/>
    </entity>
    <entity name="QSSIntegrator" class="org.ptolemy.qss.QSSIntegrator">
        <property name="xInit" class="ptolemy.data.expr.Parameter" value="10.0">
        </property>
        <property name="quantum" class="ptolemy.data.expr.Parameter" value="0.05">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 310.0]">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="TimedPlotter" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={99, 398, 500, 344}, maximized=false}">
        </property>
        <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[500, 300]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 180.0]">
        </property>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>TimedPlotter</title>
<xLabel></xLabel>
<yLabel></yLabel>
<xRange min="0.0" max="135.6597119209"/>
<yRange min="10.0" max="30.000000000000284"/>
<default connected="no"/>
</plot>?>
        </configure>
    </entity>
    <entity name="Display" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={470, 346, 751, 408}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[410.0, 245.0]">
        </property>
    </entity>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[160.0, 180.0]">
        </vertex>
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="CompositeActor.TSet" relation="relation4"/>
    <link port="CompositeActor.m_flow" relation="relation5"/>
    <link port="CompositeActor.TTank" relation="relation"/>
    <link port="CompositeActor.dT_dt_tank" relation="relation2"/>
    <link port="CompositeActor.T_tank" relation="relation3"/>
    <link port="TSet.port" relation="relation4"/>
    <link port="QSSIntegrator.u" relation="relation2"/>
    <link port="QSSIntegrator.q" relation="relation3"/>
    <link port="TimedPlotter.input" relation="relation"/>
    <link port="TimedPlotter.input" relation="relation4"/>
    <link port="Display.input" relation="relation5"/>
</entity>
