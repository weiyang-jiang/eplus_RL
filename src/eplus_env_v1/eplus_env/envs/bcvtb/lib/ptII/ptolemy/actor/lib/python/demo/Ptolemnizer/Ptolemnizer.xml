<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="Ptolemnizer" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="8.1.devel">
    </property>
    <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
        <property name="iterations" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="85.0, 50.0">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={4, 22, 681, 460}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[468, 350]">
    </property>
    <property name="annotation" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">This model illustrates a Python actor
being used to process string data
provided by an interactive shell.</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="135.0, 5.0">
        </property>
    </property>
    <property name="annotation2" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:12; font-family:SansSerif; fill:black">The interactive shell displays
the input string, and then
permits a user to type text,
which it then produces as
output. In this example, the
user-provided text is processed
by the Python actor and fed
back to the input.</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="100.0, 160.0">
        </property>
    </property>
    <property name="annotation3" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:12; font-family:SansSerif; fill:black">The Python script
in this case finds
all words beginning
with "t" (but not
"th") and inserts
a leading (silent)
"p". You can see
the Python script
by double clicking
on the actor.</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="305.0, 160.0">
        </property>
    </property>
    <property name="annotation4" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:darkgray">Authors: Xiaojun Liu, Edward Lee, and Steve Neuendorffer</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="-10.0, 320.0">
        </property>
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{234.0, 175.0}">
    </property>
    <entity name="InteractiveShell" class="ptolemy.actor.lib.gui.InteractiveShell">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={450, 325, 654, 388}, maximized=false}">
        </property>
        <doc>Produce strings from an interactive shell on the screen</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{280.0, 140.0}">
        </property>
    </entity>
    <entity name="SampleDelay" class="ptolemy.domains.sdf.lib.SampleDelay">
        <property name="initialOutputs" class="ptolemy.data.expr.Parameter" value="{&quot;Welcome to the Ptolemnizer.&quot;}">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="initialOutputs">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="120.0, 145.0">
        </property>
    </entity>
    <entity name="Ptolemnizer" class="ptolemy.actor.lib.python.PythonScript">
        <property name="script" class="ptolemy.kernel.util.StringAttribute" value="from ptolemy.data import StringToken&#10;class Main :&#10;  &quot;ptolemizer&quot;&#10;  def fire(self) :&#10;    # read input, compute, send output&#10;    t = self.in.get(0)&#10;    s = t.stringValue()&#10;    s = self.ptolemize(s)&#10;    t = StringToken(s)&#10;    self.out.broadcast(t)&#10;    return&#10;&#10;  def ptolemize(self, s) :&#10;    l = list(s)&#10;    length = len(l)&#10;    if length == 0 :&#10;      return ''&#10;    if length == 1 :&#10;      if l[0] == 't' :&#10;        return 'pt'&#10;      else :&#10;        return l[0]&#10;    if l[0] == 't' and l[1] != 'h' :&#10;      l[0] = 'pt'&#10;    i = 1&#10;    while i &lt; length - 1 :&#10;      if l[i-1] == ' ' and l[i] == 't' and l[i+1] != 'h' :&#10;        l[i] = 'pt'&#10;      i = i + 1&#10;    if l[-2] == ' ' and l[-1] == 't' :&#10;      l[-1] = 'pt'&#10;    return reduce(lambda x,y: x+y, l, '')">
            <property name="style" class="ptolemy.actor.gui.style.TextStyle">
            </property>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.TextEditorConfigureFactory">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="script">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[380.0, 145.0]">
        </property>
        <port name="in" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
        </port>
        <port name="out" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
        </port>
    </entity>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[5.0, 95.0]">
        </vertex>
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="InteractiveShell.input" relation="relation4"/>
    <link port="InteractiveShell.output" relation="relation3"/>
    <link port="SampleDelay.input" relation="relation2"/>
    <link port="SampleDelay.output" relation="relation4"/>
    <link port="Ptolemnizer.in" relation="relation3"/>
    <link port="Ptolemnizer.out" relation="relation2"/>
</entity>
