<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="Pong" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="8.0.beta">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[711, 407]">
    </property>
    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 100]">
    </property>
    <property name="stoppedThreshold" class="ptolemy.data.expr.Parameter" value="0.01">
    </property>
    <property name="annotation" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">A simplified version of the game Pong using DE, 
Continuous, ModalModel and GR.</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{170.0, -25.0}">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 23, 924, 517}, maximized=false}">
    </property>
    <property name="annotation2" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:darkgray">Author: Bert Rodiers</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-20.0, 295.0]">
        </property>
    </property>
    <property name="annotation3" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:12; font-family:SansSerif; fill:red">This example requires Java3D. If you do not have
it installed, you can get it from:
http://java.sun.com/products/java-media/3D/</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[295.0, 255.0]">
        </property>
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{326.8863636363638, 145.9356060606061}">
    </property>
    <property name="paddle_size" class="ptolemy.data.expr.Parameter" value="3.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 170.0]">
        </property>
    </property>
    <property name="table_height" class="ptolemy.data.expr.Parameter" value="10.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 190.0]">
        </property>
    </property>
    <property name="table_width" class="ptolemy.data.expr.Parameter" value="10.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 210.0]">
        </property>
    </property>
    <property name="display_scale_factor" class="ptolemy.data.expr.Parameter" value="10.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 230.0]">
        </property>
    </property>
    <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
        <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 5.0]">
        </property>
    </property>
    <property name="paddle_step" class="ptolemy.data.expr.Parameter" value="0.2">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[5.0, 250.0]">
        </property>
    </property>
    <entity name="Animation" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 120.0]">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[604, 454]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 100]">
        </property>
        <property name="GR" class="ptolemy.domains.gr.kernel.GRDirector">
            <property name="iterations" class="ptolemy.data.expr.Parameter" value="0">
            </property>
            <property name="iterationTimeLowerBound" class="ptolemy.data.expr.Parameter" value="33">
            </property>
            <property name="iteration time lower bound" class="ptolemy.data.expr.Parameter" value="33">
            </property>
            <property name="Scheduler" class="ptolemy.domains.gr.kernel.GRScheduler">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="80.0, 41.0">
            </property>
        </property>
        <property name="wall_size" class="ptolemy.data.expr.Parameter" value="4.0">
        </property>
        <port name="x_position" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 150.0]">
            </property>
        </port>
        <port name="y_position" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 225.0]">
            </property>
        </port>
        <port name="PaddlePosition" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 340.0]">
            </property>
        </port>
        <port name="game_over" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[515.0, 615.0]">
            </property>
        </port>
        <entity name="Ball" class="ptolemy.domains.gr.lib.Sphere3D">
            <property name="radius" class="ptolemy.data.expr.Parameter" value="0.015">
            </property>
            <property name="diffuseColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 0.1, 0.1}">
            </property>
            <property name="shininess" class="ptolemy.actor.parameters.DoubleRangeParameter" value="1.0">
            </property>
            <property name="Sphere3DIcon" class="ptolemy.vergil.icon.EditorIcon">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={120, 11, 815, 516}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[210.0, 85.0]">
            </property>
        </entity>
        <entity name="Translate3D" class="ptolemy.domains.gr.lib.Translate3D">
            <property name="accumulate" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="initialXTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="initialYTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="initialZTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="xTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="yTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="zTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 165.0]">
            </property>
        </entity>
        <entity name="Paddle" class="ptolemy.domains.gr.lib.Box3D">
            <property name="xLength" class="ptolemy.data.expr.Parameter" value="paddle_size/display_scale_factor">
            </property>
            <property name="yHeight" class="ptolemy.data.expr.Parameter" value="0.02">
            </property>
            <property name="zWidth" class="ptolemy.data.expr.Parameter" value="0.5">
            </property>
            <property name="diffuseColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.7, 0.7, 0.7}">
            </property>
            <property name="shininess" class="ptolemy.actor.parameters.DoubleRangeParameter" value="1.0">
            </property>
            <property name="Box3DIcon" class="ptolemy.vergil.icon.EditorIcon">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={120, 11, 815, 516}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 290.0]">
            </property>
        </entity>
        <entity name="Translate3D10" class="ptolemy.domains.gr.lib.Translate3D">
            <property name="accumulate" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="initialXTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="initialYTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="initialZTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="xTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="yTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="zTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[515.0, 290.0]">
            </property>
        </entity>
        <entity name="Copy1:Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="-table_width /  (display_scale_factor * 2.0)">
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[205.0, 415.0]">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
        </entity>
        <entity name="Const2" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="table_height /  (display_scale_factor * 2.0)">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[180.0, 245.0]">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
        </entity>
        <entity name="AddSubtract2" class="ptolemy.actor.lib.AddSubtract">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[365.0, 235.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="table_width / (display_scale_factor * 2.0)">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 195.0]">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
        </entity>
        <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[370.0, 185.0]">
            </property>
        </entity>
        <entity name="AddSubtract3" class="ptolemy.actor.lib.AddSubtract">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[375.0, 320.0]">
            </property>
        </entity>
        <entity name="Const3" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="table_width / (display_scale_factor * 2.0)">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[195.0, 375.0]">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
        </entity>
        <entity name="Left Wall" class="ptolemy.domains.gr.lib.Box3D">
            <property name="xLength" class="ptolemy.data.expr.Parameter" value="wall_size">
            </property>
            <property name="yHeight" class="ptolemy.data.expr.Parameter" value="wall_size">
            </property>
            <property name="zWidth" class="ptolemy.data.expr.Parameter" value="wall_size">
            </property>
            <property name="diffuseColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.7, 0.7, 0.7}">
            </property>
            <property name="emissiveColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.2,0.2,1.0}">
            </property>
            <property name="specularColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
            </property>
            <property name="shininess" class="ptolemy.actor.parameters.DoubleRangeParameter" value="1.0">
            </property>
            <property name="transparency" class="ptolemy.actor.parameters.DoubleRangeParameter" value="0.0">
            </property>
            <property name="Box3DIcon" class="ptolemy.vergil.icon.EditorIcon">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={120, 11, 815, 516}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 450.0]">
            </property>
        </entity>
        <entity name="Translate3D2" class="ptolemy.domains.gr.lib.Translate3D">
            <property name="accumulate" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="initialXTranslation" class="ptolemy.data.expr.Parameter" value="-wall_size/2.0 - (table_width/2.0 / display_scale_factor)">
            </property>
            <property name="initialYTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="initialZTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="xTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="yTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="zTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 470.0]">
            </property>
        </entity>
        <entity name="ViewScreen" class="ptolemy.domains.gr.lib.ViewScreen3D">
            <property name="horizontalResolution" class="ptolemy.data.expr.Parameter" value="400">
            </property>
            <property name="verticalResolution" class="ptolemy.data.expr.Parameter" value="400">
            </property>
            <property name="rotatable" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="scalable" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="translatable" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="showAxes" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="iterationSynchronized" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="backgroundColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0}">
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={614, 333, 408, 434}, maximized=false}">
            </property>
            <property name="_viewSize" class="ptolemy.actor.gui.SizeAttribute">
            </property>
            <property name="horizontal resolution" class="ptolemy.data.expr.Parameter" value="400">
            </property>
            <property name="vertical resolution" class="ptolemy.data.expr.Parameter" value="400">
            </property>
            <property name="allow model rotation" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="allow model zooming" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="allow model translation" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="show axes" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="one frame per iteration" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[760.0, 390.0]">
            </property>
        </entity>
        <entity name="Right Wall" class="ptolemy.domains.gr.lib.Box3D">
            <property name="xLength" class="ptolemy.data.expr.Parameter" value="wall_size">
            </property>
            <property name="yHeight" class="ptolemy.data.expr.Parameter" value="wall_size">
            </property>
            <property name="zWidth" class="ptolemy.data.expr.Parameter" value="wall_size">
            </property>
            <property name="diffuseColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.7, 0.7, 0.7}">
            </property>
            <property name="emissiveColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.2,0.2,1.0}">
            </property>
            <property name="specularColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
            </property>
            <property name="shininess" class="ptolemy.actor.parameters.DoubleRangeParameter" value="1.0">
            </property>
            <property name="transparency" class="ptolemy.actor.parameters.DoubleRangeParameter" value="0.0">
            </property>
            <property name="Box3DIcon" class="ptolemy.vergil.icon.EditorIcon">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={120, 11, 815, 516}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 515.0]">
            </property>
        </entity>
        <entity name="Translate3D3" class="ptolemy.domains.gr.lib.Translate3D">
            <property name="accumulate" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="initialXTranslation" class="ptolemy.data.expr.Parameter" value="wall_size/2.0 + (table_width/2.0 / display_scale_factor)">
            </property>
            <property name="initialYTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="initialZTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="xTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="yTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="zTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 535.0]">
            </property>
        </entity>
        <entity name="Top Wall" class="ptolemy.domains.gr.lib.Box3D">
            <property name="xLength" class="ptolemy.data.expr.Parameter" value="wall_size">
            </property>
            <property name="yHeight" class="ptolemy.data.expr.Parameter" value="wall_size">
            </property>
            <property name="zWidth" class="ptolemy.data.expr.Parameter" value="wall_size">
            </property>
            <property name="diffuseColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.7, 0.7, 0.7}">
            </property>
            <property name="emissiveColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 0.0, 1.0}">
            </property>
            <property name="specularColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0, 1.0, 1.0, 1.0}">
            </property>
            <property name="texture" class="ptolemy.data.expr.FileParameter" value="">
            </property>
            <property name="shininess" class="ptolemy.actor.parameters.DoubleRangeParameter" value="1.0">
            </property>
            <property name="transparency" class="ptolemy.actor.parameters.DoubleRangeParameter" value="0.0">
            </property>
            <property name="Box3DIcon" class="ptolemy.vergil.icon.EditorIcon">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={120, 11, 815, 516}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 580.0]">
            </property>
        </entity>
        <entity name="Translate3D4" class="ptolemy.domains.gr.lib.Translate3D">
            <property name="accumulate" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="initialXTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="initialYTranslation" class="ptolemy.data.expr.Parameter" value="wall_size/2.0 + (table_height/2.0 / display_scale_factor)">
            </property>
            <property name="initialZTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="xTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="yTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="zTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 600.0]">
            </property>
        </entity>
        <entity name="Intersection" class="ptolemy.domains.gr.lib.Box3D">
            <property name="xLength" class="ptolemy.data.expr.Parameter" value="10.0">
            </property>
            <property name="yHeight" class="ptolemy.data.expr.Parameter" value="10.0">
            </property>
            <property name="zWidth" class="ptolemy.data.expr.Parameter" value="0.00000001">
            </property>
            <property name="emissiveColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.6,0.8,1.0,1.0}">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[415.0, 70.0]">
            </property>
        </entity>
        <entity name="Game Over" class="ptolemy.domains.gr.lib.Box3D">
            <property name="xLength" class="ptolemy.data.expr.Parameter" value="table_width / display_scale_factor">
            </property>
            <property name="yHeight" class="ptolemy.data.expr.Parameter" value="table_height / display_scale_factor">
            </property>
            <property name="texture" class="ptolemy.data.expr.FileParameter" value="$CLASSPATH/ptolemy/domains/gr/demo/Pong/gameover.gif">
            </property>
            <property name="shininess" class="ptolemy.actor.parameters.DoubleRangeParameter" value="1.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 495.0]">
            </property>
        </entity>
        <entity name="Translate3D5" class="ptolemy.domains.gr.lib.Translate3D">
            <property name="accumulate" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="initialXTranslation" class="ptolemy.data.expr.Parameter" value="-100.0">
            </property>
            <property name="initialYTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="initialZTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="xTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="yTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="zTranslation" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 515.0]">
            </property>
        </entity>
        <entity name="Const4" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[535.0, 570.0]">
            </property>
        </entity>
        <entity name="BooleanSelect" class="ptolemy.actor.lib.BooleanSelect">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[600.0, 580.0]">
            </property>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[55.0, 150.0]">
            </vertex>
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[60.0, 225.0]">
            </vertex>
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation13" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation14" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation15" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[55.0, 340.0]">
            </vertex>
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation16" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation17" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation18" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation19" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation20" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation21" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation22" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation23" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation26" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
        </relation>
        <relation name="relation25" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
        </relation>
        <relation name="relation27" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
        </relation>
        <link port="x_position" relation="relation9"/>
        <link port="y_position" relation="relation"/>
        <link port="PaddlePosition" relation="relation15"/>
        <link port="game_over" relation="relation27"/>
        <link port="Ball.sceneGraphOut" relation="relation2"/>
        <link port="Translate3D.sceneGraphIn" relation="relation2"/>
        <link port="Translate3D.sceneGraphOut" relation="relation16"/>
        <link port="Translate3D.xTranslate" relation="relation6"/>
        <link port="Translate3D.yTranslate" relation="relation7"/>
        <link port="Paddle.sceneGraphOut" relation="relation11"/>
        <link port="Translate3D10.sceneGraphIn" relation="relation11"/>
        <link port="Translate3D10.sceneGraphOut" relation="relation17"/>
        <link port="Translate3D10.xTranslate" relation="relation13"/>
        <link port="Translate3D10.yTranslate" relation="relation4"/>
        <link port="Copy1:Const.output" relation="relation4"/>
        <link port="Const2.output" relation="relation8"/>
        <link port="Const2.trigger" relation="relation"/>
        <link port="AddSubtract2.plus" relation="relation"/>
        <link port="AddSubtract2.minus" relation="relation8"/>
        <link port="AddSubtract2.output" relation="relation7"/>
        <link port="Const.output" relation="relation5"/>
        <link port="Const.trigger" relation="relation9"/>
        <link port="AddSubtract.plus" relation="relation9"/>
        <link port="AddSubtract.minus" relation="relation5"/>
        <link port="AddSubtract.output" relation="relation6"/>
        <link port="AddSubtract3.plus" relation="relation15"/>
        <link port="AddSubtract3.minus" relation="relation14"/>
        <link port="AddSubtract3.output" relation="relation13"/>
        <link port="Const3.output" relation="relation14"/>
        <link port="Const3.trigger" relation="relation15"/>
        <link port="Left Wall.sceneGraphOut" relation="relation10"/>
        <link port="Translate3D2.sceneGraphIn" relation="relation10"/>
        <link port="Translate3D2.sceneGraphOut" relation="relation3"/>
        <link port="ViewScreen.sceneGraphIn" relation="relation16"/>
        <link port="ViewScreen.sceneGraphIn" relation="relation17"/>
        <link port="ViewScreen.sceneGraphIn" relation="relation3"/>
        <link port="ViewScreen.sceneGraphIn" relation="relation18"/>
        <link port="ViewScreen.sceneGraphIn" relation="relation20"/>
        <link port="ViewScreen.sceneGraphIn" relation="relation21"/>
        <link port="ViewScreen.sceneGraphIn" relation="relation23"/>
        <link port="Right Wall.sceneGraphOut" relation="relation12"/>
        <link port="Translate3D3.sceneGraphIn" relation="relation12"/>
        <link port="Translate3D3.sceneGraphOut" relation="relation18"/>
        <link port="Top Wall.sceneGraphOut" relation="relation19"/>
        <link port="Translate3D4.sceneGraphIn" relation="relation19"/>
        <link port="Translate3D4.sceneGraphOut" relation="relation20"/>
        <link port="Intersection.sceneGraphOut" relation="relation21"/>
        <link port="Game Over.sceneGraphOut" relation="relation22"/>
        <link port="Translate3D5.sceneGraphIn" relation="relation22"/>
        <link port="Translate3D5.sceneGraphOut" relation="relation23"/>
        <link port="Translate3D5.xTranslate" relation="relation26"/>
        <link port="Const4.output" relation="relation25"/>
        <link port="BooleanSelect.trueInput" relation="relation25"/>
        <link port="BooleanSelect.control" relation="relation27"/>
        <link port="BooleanSelect.output" relation="relation26"/>
    </entity>
    <entity name="Key Sensor" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 120.0]">
        </property>
        <port name="LeftArrow" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[495.0, 130.0]">
            </property>
        </port>
        <port name="RightArrow" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[495.0, 200.0]">
            </property>
        </port>
        <entity name="ArrowKeySensor" class="ptolemy.actor.lib.gui.ArrowKeySensor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 165.0]">
            </property>
            <port name="leftArrow" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                </property>
            </port>
            <port name="rightArrow" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                </property>
            </port>
        </entity>
        <relation name="relation11_1" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="LeftArrow" relation="relation11_1"/>
        <link port="RightArrow" relation="relation"/>
        <link port="ArrowKeySensor.leftArrow" relation="relation11_1"/>
        <link port="ArrowKeySensor.rightArrow" relation="relation"/>
    </entity>
    <entity name="Pong Model" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[150.0, 120.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1032, 746}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 639]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.9635321650358">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{340.9609375000001, 278.7174590728277}">
        </property>
        <property name="Continuous Director" class="ptolemy.domains.continuous.kernel.ContinuousDirector">
            <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-15.0, -15.0]">
            </property>
        </property>
        <port name="LeftArrow" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, 50.0]">
            </property>
        </port>
        <port name="RightArrow" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, 125.0]">
            </property>
        </port>
        <port name="x_position" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[690.0, 25.0]">
            </property>
        </port>
        <port name="y_position" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[690.0, 115.0]">
            </property>
        </port>
        <port name="PaddlePosition" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[695.0, 185.0]">
            </property>
        </port>
        <entity name="Game Model" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{255.0, 85.0}">
            </property>
            <port name="x_position" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <port name="x_bump" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_hide" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="x_velocity" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_hide" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="y_position" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <port name="y_bump" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_hide" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="y_velocity" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_hide" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="paddle_x_pos" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="valid_y_bump" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_hide" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure><entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property></entity></entity></configure>
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[808, 462]">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 152]">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 98, 1023, 571}, maximized=false}">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{404.0, 231.0}">
                </property>
                <property name="x_initialPosition" class="ptolemy.data.expr.Parameter" value="5.0">
                </property>
                <property name="y_initialPosition" class="ptolemy.data.expr.Parameter" value="9.0">
                </property>
                <property name="x_initialVelocity" class="ptolemy.data.expr.Parameter" value="-4.0">
                </property>
                <property name="y_initialVelocity" class="ptolemy.data.expr.Parameter" value="-5.0">
                </property>
                <property name="x_initialAcceleration" class="ptolemy.data.expr.Parameter" value="-0.1">
                </property>
                <property name="y_initialAcceleration" class="ptolemy.data.expr.Parameter" value="-0.15">
                </property>
                <port name="x_position" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 145.0]">
                    </property>
                </port>
                <port name="x_bump" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="35.0, 90.0">
                    </property>
                </port>
                <port name="x_velocity" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="35.0, 40.0">
                    </property>
                </port>
                <port name="y_position" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 345.0]">
                    </property>
                </port>
                <port name="y_bump" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 300.0]">
                    </property>
                </port>
                <port name="y_velocity" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 245.0]">
                    </property>
                </port>
                <port name="paddle_x_pos" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 385.0]">
                    </property>
                </port>
                <port name="valid_y_bump" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 195.0]">
                    </property>
                </port>
                <entity name="init" class="ptolemy.domains.modal.kernel.State">
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{375.0, 50.0}">
                    </property>
                </entity>
                <entity name="free" class="ptolemy.domains.modal.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="free">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{210.0, 245.0}">
                    </property>
                </entity>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="free.x_initialPosition = x_initialPosition; free.x_initialVelocity = x_initialVelocity; free.y_initialPosition = y_initialPosition; free.y_initialVelocity = y_initialVelocity; free.x_acceleration = x_initialAcceleration; free.y_acceleration = y_initialAcceleration">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.4216814692820417">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.242878205603077">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="x_bump_isPresent">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="free.x_initialVelocity = -x_velocity; free.x_initialPosition = x_position; free.x_acceleration = -free.x_acceleration">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.7571031978398914">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.6619450289203337">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="y_bump_isPresent &amp;&amp; valid_y_bump_isPresent &amp;&amp; valid_y_bump == true">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="free.y_initialVelocity = -y_velocity; free.y_initialPosition = y_position; free.y_acceleration = -free.y_acceleration">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.8131194028758855">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.874138946608209">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <link port="init.outgoingPort" relation="relation2"/>
                <link port="free.incomingPort" relation="relation2"/>
                <link port="free.incomingPort" relation="relation3"/>
                <link port="free.incomingPort" relation="relation"/>
                <link port="free.outgoingPort" relation="relation3"/>
                <link port="free.outgoingPort" relation="relation"/>
            </entity>
            <entity name="free" class="ptolemy.domains.modal.modal.Refinement">
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 639]">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 102]">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 22, 1032, 746}, maximized=false}">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{408.5, 319.5}">
                </property>
                <property name="x_initialPosition" class="ptolemy.data.expr.Parameter" value="10.000001099101">
                </property>
                <property name="y_initialPosition" class="ptolemy.data.expr.Parameter" value="9.0">
                </property>
                <property name="x_initialVelocity" class="ptolemy.data.expr.Parameter" value="-4.3589012588108">
                </property>
                <property name="y_initialVelocity" class="ptolemy.data.expr.Parameter" value="-5.0">
                </property>
                <property name="x_acceleration" class="ptolemy.data.expr.Parameter" value="-0.1">
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                </property>
                <property name="y_acceleration" class="ptolemy.data.expr.Parameter" value="-0.15">
                </property>
                <property name="Continuous Director" class="ptolemy.domains.continuous.kernel.ContinuousDirector">
                    <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 50.0]">
                    </property>
                </property>
                <port name="x_position" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[705.0, 270.0]">
                    </property>
                    <property name="_showName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                </port>
                <port name="x_bump" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[705.0, 135.0]">
                    </property>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="x_velocity" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[705.0, 185.0]">
                    </property>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="y_position" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[705.0, 430.0]">
                    </property>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="y_bump" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[705.0, 320.0]">
                    </property>
                    <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                </port>
                <port name="y_velocity" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[705.0, 360.0]">
                    </property>
                </port>
                <port name="paddle_x_pos" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 540.0]">
                    </property>
                </port>
                <port name="valid_y_bump" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[700.0, 540.0]">
                    </property>
                </port>
                <entity name="X_Movement" class="ptolemy.actor.TypedCompositeActor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{195.0, 165.0}">
                    </property>
                    <property name="initialPosition" class="ptolemy.data.expr.Parameter" value="-5.0E-5">
                    </property>
                    <property name="initialVelocity" class="ptolemy.data.expr.Parameter" value="5.0">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
                    </property>
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 195, 1038, 543}, maximized=false}">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[823, 436]">
                    </property>
                    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                    </property>
                    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{411.5, 218.0}">
                    </property>
                    <port name="bump" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[710.0, 295.0]">
                        </property>
                    </port>
                    <port name="velocity" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[705.0, 115.0]">
                        </property>
                    </port>
                    <port name="position" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[715.0, 210.0]">
                        </property>
                    </port>
                    <port name="acceleration" class="ptolemy.domains.modal.modal.RefinementPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 115.0]">
                        </property>
                    </port>
                    <entity name="Position" class="ptolemy.domains.continuous.lib.Integrator">
                        <property name="initialState" class="ptolemy.actor.parameters.PortParameter" value="x_initialPosition">
                        </property>
                        <property name="IntegratorIcon" class="ptolemy.vergil.icon.EditorIcon">
                            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={117, 239, 815, 518}, maximized=false}">
                            </property>
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="{265.0, 210.0}">
                        </property>
                    </entity>
                    <entity name="Velocity" class="ptolemy.domains.continuous.lib.Integrator">
                        <property name="initialState" class="ptolemy.actor.parameters.PortParameter" value="x_initialVelocity">
                        </property>
                        <property name="IntegratorIcon" class="ptolemy.vergil.icon.EditorIcon">
                            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={117, 239, 815, 518}, maximized=false}">
                            </property>
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 115.0]">
                        </property>
                    </entity>
                    <entity name="Expression" class="ptolemy.actor.lib.Expression">
                        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="input - table_width">
                        </property>
                        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                            </property>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                            </property>
                            <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[420.0, 370.0]">
                        </property>
                        <port name="input" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                        </port>
                    </entity>
                    <entity name="ZeroCrossingDetector2" class="ptolemy.domains.continuous.lib.LevelCrossingDetector">
                        <property name="direction" class="ptolemy.data.expr.StringParameter" value="falling">
                        </property>
                        <property name="defaultEventValue" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="useDefaultEventValue" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[470.0, 265.0]">
                        </property>
                    </entity>
                    <entity name="ZeroCrossingDetector" class="ptolemy.domains.continuous.lib.LevelCrossingDetector">
                        <property name="direction" class="ptolemy.data.expr.StringParameter" value="rising">
                        </property>
                        <property name="defaultEventValue" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="useDefaultEventValue" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[550.0, 370.0]">
                        </property>
                    </entity>
                    <entity name="ContinuousMerge" class="ptolemy.domains.continuous.lib.ContinuousMerge">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[635.0, 270.0]">
                        </property>
                    </entity>
                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                        <vertex name="vertex1" value="[340.0, 210.0]">
                        </vertex>
                    </relation>
                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                        </property>
                    </relation>
                    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                        </property>
                    </relation>
                    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                        </property>
                        <vertex name="vertex1" value="[220.0, 115.0]">
                        </vertex>
                    </relation>
                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <link port="bump" relation="relation"/>
                    <link port="velocity" relation="relation6"/>
                    <link port="position" relation="relation3"/>
                    <link port="acceleration" relation="relation5"/>
                    <link port="Position.derivative" relation="relation6"/>
                    <link port="Position.state" relation="relation3"/>
                    <link port="Velocity.derivative" relation="relation5"/>
                    <link port="Velocity.state" relation="relation6"/>
                    <link port="Expression.output" relation="relation4"/>
                    <link port="Expression.input" relation="relation3"/>
                    <link port="ZeroCrossingDetector2.output" relation="relation2"/>
                    <link port="ZeroCrossingDetector2.trigger" relation="relation3"/>
                    <link port="ZeroCrossingDetector.output" relation="relation7"/>
                    <link port="ZeroCrossingDetector.trigger" relation="relation4"/>
                    <link port="ContinuousMerge.input" relation="relation2"/>
                    <link port="ContinuousMerge.input" relation="relation7"/>
                    <link port="ContinuousMerge.output" relation="relation"/>
                </entity>
                <entity name="Y_Movement" class="ptolemy.actor.TypedCompositeActor">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[195.0, 360.0]">
                    </property>
                    <property name="initialPosition" class="ptolemy.data.expr.Parameter" value="-5.0E-5">
                    </property>
                    <property name="initialVelocity" class="ptolemy.data.expr.Parameter" value="5.0">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
                    </property>
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 22, 1032, 746}, maximized=false}">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[817, 639]">
                    </property>
                    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                    </property>
                    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{408.5, 319.5}">
                    </property>
                    <port name="bump" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[715.0, 310.0]">
                        </property>
                    </port>
                    <port name="velocity" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[645.0, 115.0]">
                        </property>
                    </port>
                    <port name="position" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[655.0, 210.0]">
                        </property>
                    </port>
                    <port name="acceleration" class="ptolemy.domains.modal.modal.RefinementPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, 115.0]">
                        </property>
                    </port>
                    <entity name="Position" class="ptolemy.domains.continuous.lib.Integrator">
                        <property name="initialState" class="ptolemy.actor.parameters.PortParameter" value="y_initialPosition">
                        </property>
                        <property name="IntegratorIcon" class="ptolemy.vergil.icon.EditorIcon">
                            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={117, 239, 815, 518}, maximized=false}">
                            </property>
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[265.0, 210.0]">
                        </property>
                    </entity>
                    <entity name="Velocity" class="ptolemy.domains.continuous.lib.Integrator">
                        <property name="initialState" class="ptolemy.actor.parameters.PortParameter" value="y_initialVelocity">
                        </property>
                        <property name="IntegratorIcon" class="ptolemy.vergil.icon.EditorIcon">
                            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={117, 239, 815, 518}, maximized=false}">
                            </property>
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 115.0]">
                        </property>
                    </entity>
                    <entity name="Expression" class="ptolemy.actor.lib.Expression">
                        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="input - table_height">
                        </property>
                        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                            </property>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                            </property>
                            <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="{420.0, 370.0}">
                        </property>
                        <port name="input" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                        </port>
                    </entity>
                    <entity name="ZeroCrossingDetector" class="ptolemy.domains.continuous.lib.LevelCrossingDetector">
                        <property name="direction" class="ptolemy.data.expr.StringParameter" value="falling">
                        </property>
                        <property name="defaultEventValue" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="useDefaultEventValue" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[460.0, 265.0]">
                        </property>
                    </entity>
                    <entity name="ZeroCrossingDetector2" class="ptolemy.domains.continuous.lib.LevelCrossingDetector">
                        <property name="direction" class="ptolemy.data.expr.StringParameter" value="rising">
                        </property>
                        <property name="defaultEventValue" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="useDefaultEventValue" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="[555.3515625, 370.0]">
                        </property>
                    </entity>
                    <entity name="ContinuousMerge" class="ptolemy.domains.continuous.lib.ContinuousMerge">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="{645.0, 280.0}">
                        </property>
                    </entity>
                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                        <vertex name="vertex1" value="[340.0, 210.0]">
                        </vertex>
                    </relation>
                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                        </property>
                    </relation>
                    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                        </property>
                    </relation>
                    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                        </property>
                        <vertex name="vertex1" value="[215.0, 115.0]">
                        </vertex>
                    </relation>
                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <link port="bump" relation="relation7"/>
                    <link port="velocity" relation="relation6"/>
                    <link port="position" relation="relation3"/>
                    <link port="acceleration" relation="relation5"/>
                    <link port="Position.derivative" relation="relation6"/>
                    <link port="Position.state" relation="relation3"/>
                    <link port="Velocity.derivative" relation="relation5"/>
                    <link port="Velocity.state" relation="relation6"/>
                    <link port="Expression.output" relation="relation4"/>
                    <link port="Expression.input" relation="relation3"/>
                    <link port="ZeroCrossingDetector.output" relation="relation"/>
                    <link port="ZeroCrossingDetector.trigger" relation="relation3"/>
                    <link port="ZeroCrossingDetector2.output" relation="relation2"/>
                    <link port="ZeroCrossingDetector2.trigger" relation="relation4"/>
                    <link port="ContinuousMerge.input" relation="relation"/>
                    <link port="ContinuousMerge.input" relation="relation2"/>
                    <link port="ContinuousMerge.output" relation="relation7"/>
                </entity>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(abs(y_pos - 10.0) &lt; 0.001)  || ((abs(y_pos - 0.0) &lt; 0.001) &amp;&amp; (abs(x_pos - paddle_x_pos) * 2.0 &lt; paddle_size))">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                        <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{480.0, 540.0}">
                    </property>
                    <port name="x_pos" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="paddle_x_pos" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="y_pos" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="Const" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="x_acceleration">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 165.0]">
                    </property>
                </entity>
                <entity name="Const2" class="ptolemy.actor.lib.Const">
                    <property name="value" class="ptolemy.data.expr.Parameter" value="y_acceleration">
                    </property>
                    <doc>Create a constant sequence.</doc>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 360.0]">
                    </property>
                </entity>
                <relation name="relation_6" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[245.0, 270.0]">
                    </vertex>
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[275.0, 435.0]">
                    </vertex>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="x_position" relation="relation5"/>
                <link port="x_bump" relation="relation3"/>
                <link port="x_velocity" relation="relation_6"/>
                <link port="y_position" relation="relation"/>
                <link port="y_bump" relation="relation9"/>
                <link port="y_velocity" relation="relation2"/>
                <link port="paddle_x_pos" relation="relation6"/>
                <link port="valid_y_bump" relation="relation4"/>
                <link port="X_Movement.bump" relation="relation3"/>
                <link port="X_Movement.velocity" relation="relation_6"/>
                <link port="X_Movement.position" relation="relation5"/>
                <link port="X_Movement.acceleration" relation="relation8"/>
                <link port="Y_Movement.bump" relation="relation9"/>
                <link port="Y_Movement.velocity" relation="relation2"/>
                <link port="Y_Movement.position" relation="relation"/>
                <link port="Y_Movement.acceleration" relation="relation7"/>
                <link port="Expression.output" relation="relation4"/>
                <link port="Expression.x_pos" relation="relation5"/>
                <link port="Expression.paddle_x_pos" relation="relation6"/>
                <link port="Expression.y_pos" relation="relation"/>
                <link port="Const.output" relation="relation8"/>
                <link port="Const2.output" relation="relation7"/>
            </entity>
            <relation name="heightRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="x_positionRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="x_bumpRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="x_velocityRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="y_positionRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="y_bumpRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="y_velocityRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="paddle_x_posRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="valid_y_bumpRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="x_position" relation="x_positionRelation"/>
            <link port="x_bump" relation="x_bumpRelation"/>
            <link port="x_velocity" relation="x_velocityRelation"/>
            <link port="y_position" relation="y_positionRelation"/>
            <link port="y_bump" relation="y_bumpRelation"/>
            <link port="y_velocity" relation="y_velocityRelation"/>
            <link port="paddle_x_pos" relation="paddle_x_posRelation"/>
            <link port="valid_y_bump" relation="valid_y_bumpRelation"/>
            <link port="_Controller.x_position" relation="x_positionRelation"/>
            <link port="_Controller.x_bump" relation="x_bumpRelation"/>
            <link port="_Controller.x_velocity" relation="x_velocityRelation"/>
            <link port="_Controller.y_position" relation="y_positionRelation"/>
            <link port="_Controller.y_bump" relation="y_bumpRelation"/>
            <link port="_Controller.y_velocity" relation="y_velocityRelation"/>
            <link port="_Controller.paddle_x_pos" relation="paddle_x_posRelation"/>
            <link port="_Controller.valid_y_bump" relation="valid_y_bumpRelation"/>
            <link port="free.x_position" relation="x_positionRelation"/>
            <link port="free.x_bump" relation="x_bumpRelation"/>
            <link port="free.x_velocity" relation="x_velocityRelation"/>
            <link port="free.y_position" relation="y_positionRelation"/>
            <link port="free.y_bump" relation="y_bumpRelation"/>
            <link port="free.y_velocity" relation="y_velocityRelation"/>
            <link port="free.paddle_x_pos" relation="paddle_x_posRelation"/>
            <link port="free.valid_y_bump" relation="valid_y_bumpRelation"/>
        </entity>
        <entity name="Scale" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="1.0/display_scale_factor">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 115.0]">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
            </property>
        </entity>
        <entity name="Paddle Position" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 85.0]">
            </property>
            <port name="LeftArrow" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                </property>
            </port>
            <port name="RightArrow" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                </property>
            </port>
            <port name="PaddlePosition" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
                </property>
                <property name="paddle_position" class="ptolemy.data.expr.Parameter" value="5.0">
                </property>
                <port name="LeftArrow" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 50.0]">
                    </property>
                </port>
                <port name="RightArrow" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 95.0]">
                    </property>
                </port>
                <port name="PaddlePosition" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 50.0]">
                    </property>
                </port>
                <entity name="init" class="ptolemy.domains.modal.kernel.State">
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[195.0, 145.0]">
                    </property>
                </entity>
                <entity name="state" class="ptolemy.domains.modal.kernel.State">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[280.0, 245.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="PaddlePosition = table_width / 2.0">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="paddle_position = table_width / 2.0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.9854072545829464">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="!LeftArrow_isPresent &amp;&amp; RightArrow_isPresent	">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="PaddlePosition = (paddle_position + paddle_size / 2.0) &lt; table_width ? paddle_position + paddle_step : paddle_position">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="paddle_position = (paddle_position + paddle_size / 2.0) &lt; table_width ? paddle_position + paddle_step : paddle_position">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.356194490192345">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.4794429884635387">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="LeftArrow_isPresent">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="PaddlePosition = (paddle_position - paddle_size / 2.0) &gt; 0.0 ? paddle_position - paddle_step : paddle_position">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="paddle_position = (paddle_position - paddle_size / 2.0) &gt; 0.0 ? paddle_position - paddle_step : paddle_position">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.356194490192345">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.6640256879501686">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="defaultTransition" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <link port="init.outgoingPort" relation="relation"/>
                <link port="state.incomingPort" relation="relation"/>
                <link port="state.incomingPort" relation="relation2"/>
                <link port="state.incomingPort" relation="relation3"/>
                <link port="state.outgoingPort" relation="relation2"/>
                <link port="state.outgoingPort" relation="relation3"/>
            </entity>
            <relation name="LeftArrowRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="RightArrowRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="PaddlePositionRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="LeftArrow" relation="LeftArrowRelation"/>
            <link port="RightArrow" relation="RightArrowRelation"/>
            <link port="PaddlePosition" relation="PaddlePositionRelation"/>
            <link port="_Controller.LeftArrow" relation="LeftArrowRelation"/>
            <link port="_Controller.RightArrow" relation="RightArrowRelation"/>
            <link port="_Controller.PaddlePosition" relation="PaddlePositionRelation"/>
        </entity>
        <entity name="Scale3" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="1.0/display_scale_factor">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[200.0, 185.0]">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
            </property>
        </entity>
        <entity name="Scale2" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="1.0/display_scale_factor">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[515.0, 25.0]">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
            </property>
        </entity>
        <entity name="PeriodicSampler" class="ptolemy.domains.continuous.lib.PeriodicSampler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[615.0, 25.0]">
            </property>
        </entity>
        <entity name="PeriodicSampler2" class="ptolemy.domains.continuous.lib.PeriodicSampler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[615.0, 115.0]">
            </property>
        </entity>
        <entity name="ZeroOrderHold" class="ptolemy.domains.continuous.lib.ZeroOrderHold">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[170.0, 85.0]">
            </property>
        </entity>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[115.0, 85.0]">
            </vertex>
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="LeftArrow" relation="relation11"/>
        <link port="RightArrow" relation="relation9"/>
        <link port="x_position" relation="relation6"/>
        <link port="y_position" relation="relation7"/>
        <link port="PaddlePosition" relation="relation"/>
        <link port="Game Model.x_position" relation="relation3"/>
        <link port="Game Model.y_position" relation="relation4"/>
        <link port="Game Model.paddle_x_pos" relation="relation12"/>
        <link port="Scale.input" relation="relation4"/>
        <link port="Scale.output" relation="relation8"/>
        <link port="Paddle Position.LeftArrow" relation="relation11"/>
        <link port="Paddle Position.RightArrow" relation="relation9"/>
        <link port="Paddle Position.PaddlePosition" relation="relation10"/>
        <link port="Scale3.input" relation="relation10"/>
        <link port="Scale3.output" relation="relation"/>
        <link port="Scale2.input" relation="relation3"/>
        <link port="Scale2.output" relation="relation2"/>
        <link port="PeriodicSampler.input" relation="relation2"/>
        <link port="PeriodicSampler.output" relation="relation6"/>
        <link port="PeriodicSampler2.input" relation="relation8"/>
        <link port="PeriodicSampler2.output" relation="relation7"/>
        <link port="ZeroOrderHold.input" relation="relation10"/>
        <link port="ZeroOrderHold.output" relation="relation12"/>
    </entity>
    <entity name="Stop" class="ptolemy.actor.lib.Stop">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, 215.0]">
        </property>
    </entity>
    <entity name="Expression" class="ptolemy.actor.lib.Expression">
        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="position &lt; -table_height / 10.0">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
            <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[310.0, 215.0]">
        </property>
        <port name="position" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
    </entity>
    <entity name="TimedDelay" class="ptolemy.domains.de.lib.TimedDelay">
        <property name="delay" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 215.0]">
        </property>
    </entity>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[205.0, 120.0]">
        </vertex>
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[420.0, 215.0]">
        </vertex>
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="Animation.x_position" relation="relation3"/>
    <link port="Animation.y_position" relation="relation5"/>
    <link port="Animation.PaddlePosition" relation="relation"/>
    <link port="Animation.game_over" relation="relation7"/>
    <link port="Key Sensor.LeftArrow" relation="relation4"/>
    <link port="Key Sensor.RightArrow" relation="relation2"/>
    <link port="Pong Model.LeftArrow" relation="relation4"/>
    <link port="Pong Model.RightArrow" relation="relation2"/>
    <link port="Pong Model.x_position" relation="relation3"/>
    <link port="Pong Model.y_position" relation="relation5"/>
    <link port="Pong Model.PaddlePosition" relation="relation"/>
    <link port="Stop.input" relation="relation6"/>
    <link port="Expression.output" relation="relation7"/>
    <link port="Expression.position" relation="relation5"/>
    <link port="TimedDelay.input" relation="relation7"/>
    <link port="TimedDelay.output" relation="relation6"/>
</entity>
